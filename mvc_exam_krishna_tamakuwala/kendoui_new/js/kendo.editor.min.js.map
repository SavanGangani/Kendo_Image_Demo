{"version":3,"file":"kendo.editor.min.js","names":["factory","define","amd","$","editorNS","Command","GenericCommand","registerTool","Tool","RestorePoint","extend","InsertHtmlCommand","InsertHtmlTool","kendo","UndoRedoStack","Observable","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","nameToKebab","replace","toLowerCase","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","encoded","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","_destroyResizings","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","left","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","$head","head","append","assign","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","ToolBar","on","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","is","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","assign$1","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","getKendoResizable","ignore","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","top","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","plugin","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","arguments$1","arguments","count","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","ref","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","UnlinkCommand","LinkCommand","url","_initialText","img","minWidth","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","borderWidth","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResize","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","WIDTH","HEIGHT","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","closeHandler","_dialogTemplate","collectDialogValues","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_cellPropertiesForm","_createCellPropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","check","cellView","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["(function (factory) {\n    typeof define === 'function' && define.amd ? define(['kendo.combobox', 'kendo.dropdownlist', 'kendo.resizable', 'kendo.window', 'kendo.colorpicker', 'kendo.imagebrowser', 'kendo.numerictextbox', 'kendo.textarea', 'kendo.core', 'kendo.toolbar', 'kendo.icons', 'kendo.form', 'kendo.filebrowser', 'kendo.draganddrop', 'kendo.html.button', 'kendo.tabstrip'], factory) :\n    factory();\n})((function () {\n    (function(kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function(options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [ \"undo\", \"redo\" ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger(\"undo\", { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger(\"redo\", { command: command });\n                }\n            },\n            clear: function() {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n\n        kendo.deepExtend(kendo, {\n            util: {\n                UndoRedoStack: UndoRedoStack\n            }\n        });\n    })(kendo);\n\n    (function($,undefined$1) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Widget = kendo.ui.Widget,\n            os = kendo.support.mobileOS,\n            browser = kendo.support.browser,\n            extend = $.extend,\n            deepExtend = kendo.deepExtend,\n            keys = kendo.keys,\n            outerWidth = kendo._outerWidth,\n            outerHeight = kendo._outerHeight,\n            NS = \".kendoEditor\";\n\n        var SELECT = \"select\";\n        var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n        var PLACEHOLDER_CLASS = \"k-placeholder\";\n        var PLACEHOLDER_TAG_ID = \"placeholder\";\n        var REFRESH_INTERVAL = 200;\n        var DEFAULT_LANGUAGE = \"en\";\n\n        var NATIVE_TOOLS = [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ];\n\n        var EditorUtils = {\n            editorWrapperTemplate: function () { return '<div class=\"k-editor\">' +\n                    '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                    '<div class=\"k-editable-area k-editor-content\"></div>' +\n                '</div>'; },\n\n            formatByName: function(name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n\n            getToolCssClass: function(name, icon) {\n                var toolCssClassNames = {\n                    superscript: \"supscript\",\n                    subscript: \"subscript\",\n                    justifyLeft: \"align-left\",\n                    justifyCenter: \"align-center\",\n                    justifyRight: \"align-right\",\n                    justifyFull: \"align-justify\",\n                    insertUnorderedList: \"list-unordered\",\n                    insertOrderedList: \"list-ordered\",\n                    insertUpperRomanList: \"list-roman-upper\",\n                    insertLowerRomanList: \"list-roman-lower\",\n                    \"import\": \"import\",\n                    indent: \"indent\",\n                    outdent: \"outdent\",\n                    createLink: \"link\",\n                    unlink: \"unlink\",\n                    insertImage: \"image\",\n                    insertFile: \"file-add\",\n                    viewHtml: \"code\",\n                    foreColor: \"foreground-color\",\n                    backColor: \"droplet\",\n                    createTable: \"table-add\",\n                    addColumnLeft: \"table-column-insert-left\",\n                    addColumnRight: \"table-column-insert-right\",\n                    addRowAbove: \"table-row-insert-above\",\n                    addRowBelow: \"table-row-insert-below\",\n                    deleteRow: \"table-row-delete\",\n                    deleteColumn: \"table-column-delete\",\n                    mergeCellsHorizontally: \"cells-merge-horizontally\",\n                    mergeCellsVertically: \"cells-merge-vertically\",\n                    splitCellHorizontally: \"cell-split-horizontally\",\n                    splitCellVertically: \"cell-split-vertically\",\n                    tableWizard: \"table-properties\",\n                    tableWizardInsert: \"table-wizard\",\n                    tableAlignLeft: \"table-position-start\",\n                    tableAlignCenter: \"table-position-center\",\n                    tableAlignRight: \"table-position-end\",\n                    cleanFormatting: \"clear-css\",\n                    copyFormat: \"copy-format\",\n                    applyFormat: \"apply-format\"\n                };\n\n                var cssClass = toolCssClassNames[name];\n\n                if (cssClass) {\n                    return cssClass;\n                }\n\n                if (icon) {\n                    return icon;\n                }\n\n                return EditorUtils.nameToKebab(name);\n            },\n\n            nameToKebab: function(name) {\n                return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                    .replace(/[\\s_]+/g, '-')\n                    .toLowerCase();\n            },\n\n            registerTool: function(toolName, tool) {\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n\n                if (!tool.options.ui) {\n                    tool.options.ui = {};\n                }\n\n                tool.options.ui.command = toolName;\n\n                Editor.defaultTools[toolName] = tool;\n            },\n\n            registerFormat: function(formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            },\n\n            cacheComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(comments[index], \"{\" + index + \"}\");\n                }\n                return content;\n            },\n\n            retrieveComments: function(content, comments) {\n                for (var index in comments) {\n                    content = content.replace(\"{\" + index + \"}\", comments[index]);\n                }\n                return content;\n            }\n        };\n\n        var messages = {\n            bold: \"Bold\",\n            italic: \"Italic\",\n            underline: \"Underline\",\n            strikethrough: \"Strikethrough\",\n            superscript: \"Superscript\",\n            subscript: \"Subscript\",\n            justifyCenter: \"Center text\",\n            justifyLeft: \"Align text left\",\n            justifyRight: \"Align text right\",\n            justifyFull: \"Justify\",\n            insertUnorderedList: \"Insert unordered list\",\n            insertOrderedList: \"Insert ordered list\",\n            indent: \"Indent\",\n            outdent: \"Outdent\",\n            createLink: \"Insert hyperlink\",\n            unlink: \"Remove hyperlink\",\n            insertImage: \"Insert image\",\n            insertFile: \"Insert file\",\n            insertHtml: \"Insert HTML\",\n            viewHtml: \"View HTML\",\n            fontName: \"Select font family\",\n            fontNameInherit: \"(inherited font)\",\n            fontSize: \"Select font size\",\n            fontSizeInherit: \"(inherited size)\",\n            formatBlock: \"Format\",\n            formatting: \"Format\",\n            foreColor: \"Color\",\n            backColor: \"Background color\",\n            style: \"Styles\",\n            emptyFolder: \"Empty Folder\",\n            editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n            uploadFile: \"Upload\",\n            overflowAnchor: \"More tools\",\n            orderBy: \"Arrange by:\",\n            orderBySize: \"Size\",\n            orderByName: \"Name\",\n            invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: \"A directory with this name was not found.\",\n            imageWebAddress: \"Web address\",\n            imageAltText: \"Alternate text\",\n            imageWidth: \"Width (px)\",\n            imageHeight: \"Height (px)\",\n            fileWebAddress: \"Web address\",\n            fileTitle: \"Title\",\n            fileText: \"Text\",\n            linkWebAddress: \"Web address\",\n            linkText: \"Text\",\n            linkToolTip: \"ToolTip\",\n            linkOpenInNewWindow: \"Open link in new window\",\n            dialogUpdate: \"Update\",\n            dialogInsert: \"Insert\",\n            dialogOk: \"Ok\",\n            dialogCancel: \"Cancel\",\n            cleanFormatting: \"Clean formatting\",\n            createTable: \"Create a table\",\n            createTableHint: \"Create a {0} x {1} table\",\n            addColumnLeft: \"Add column on the left\",\n            addColumnRight: \"Add column on the right\",\n            addRowAbove: \"Add row above\",\n            addRowBelow: \"Add row below\",\n            deleteRow: \"Delete row\",\n            deleteColumn: \"Delete column\",\n            mergeCellsHorizontally: \"Merge cells horizontally\",\n            mergeCellsVertically: \"Merge cells vertically\",\n            splitCellHorizontally: \"Split cells horizontally\",\n            splitCellVertically: \"Split cells vertically\",\n            tableAlignLeft: \"Table Align Left\",\n            tableAlignCenter: \"Table Align Center\",\n            tableAlignRight: \"Table Align Right\",\n            tableWizard: \"Table Wizard\",\n            tableTab: \"Table\",\n            cellTab: \"Cell\",\n            accessibilityTab: \"Accessibility\",\n            caption: \"Caption\",\n            summary: \"Summary\",\n            width: \"Width\",\n            height: \"Height\",\n            units: \"Units\",\n            cellSpacing: \"Cell Spacing\",\n            cellPadding: \"Cell Padding\",\n            cellMargin: \"Cell Margin\",\n            alignment: \"Alignment\",\n            background: \"Background\",\n            cssClass: \"CSS Class\",\n            id: \"ID\",\n            border: \"Border\",\n            borderStyle: \"Border Style\",\n            collapseBorders: \"Collapse borders\",\n            wrapText: \"Wrap text\",\n            associateCellsWithHeaders: \"Associate headers\",\n            alignLeft: \"Align Left\",\n            alignCenter: \"Align Center\",\n            alignRight: \"Align Right\",\n            alignLeftTop: \"Align Left Top\",\n            alignCenterTop: \"Align Center Top\",\n            alignRightTop: \"Align Right Top\",\n            alignLeftMiddle: \"Align Left Middle\",\n            alignCenterMiddle: \"Align Center Middle\",\n            alignRightMiddle: \"Align Right Middle\",\n            alignLeftBottom: \"Align Left Bottom\",\n            alignCenterBottom: \"Align Center Bottom\",\n            alignRightBottom: \"Align Right Bottom\",\n            alignRemove: \"Remove Alignment\",\n            columns: \"Columns\",\n            rows: \"Rows\",\n            selectAllCells: \"Select All Cells\",\n            exportAs: \"Export As\",\n            \"import\": \"Import\",\n            print: \"Print\",\n            headerRows: \"Header Rows\",\n            headerColumns: \"Header Cols\",\n            tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n            associateNone: \"None\",\n            associateScope: \"Associate using 'scope' attribute\",\n            associateIds: \"Associate using Ids\",\n            copyFormat: \"Copy format\",\n            applyFormat: \"Apply format\",\n            borderNone: \"None\",\n            undo: \"Undo\",\n            redo: \"Redo\"\n        };\n\n        var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n        var toolGroups = {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\" ],\n            dent: [\"indent\", \"outdent\"],\n            tablesWizard: [\"tableWizard\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        };\n\n        var Editor = Widget.extend({\n            init: function(element, options) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    toolbarContainer,\n                    type, domElement;\n\n                /* suppress initialization in devices w/o proper contenteditable support */\n                if (!supportedContentEditable) {\n                    return;\n                }\n\n                Widget.fn.init.call(that, element, options);\n\n                that.options = deepExtend({}, that.options, options);\n\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n\n                this._registerHandler(\n                    element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n                );\n\n                toolbarContainer = that._setupType(element);\n\n                that._initToolbar(toolbarContainer);\n                that._setupHeight(type);\n                that._resizable();\n                that._initializeContentElement(that);\n                that._setupKeyboard();\n\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n                that._populateValue(options, domElement);\n\n                that._registerHandler(document, {\n                    \"mousedown\": function() { that._endTyping(); },\n                    \"mouseup\": function(e) { that._mouseup(e); }\n                });\n\n                that._initializeImmutables();\n\n                if (type == \"textarea\") {\n                    that._ariaLabel(that.wrapper.find(\"iframe\"));\n                }\n\n                that.toolbar.resize();\n\n                kendo.notify(that);\n            },\n\n            events: [\n                \"select\",\n                \"change\",\n                \"execute\",\n                \"error\",\n                \"paste\",\n                \"keydown\",\n                \"keyup\"\n            ],\n\n            options: {\n                name: \"Editor\",\n                messages: messages,\n                placeholder: \"\",\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: {\n                    custom: null\n                },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false,\n                    optimizeTags: false,\n                    keepEOL: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true, resizable: false, draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                navigateOnTab: false,\n                fontName: [\n                    { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                    { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                    { text: \"Georgia\", value: \"Georgia, serif\" },\n                    { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                    { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                    { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                    { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                    { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                    { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n                ],\n                fontSize: [\n                    { text: \"1 (8pt)\", value: \"xx-small\" },\n                    { text: \"2 (10pt)\", value: \"x-small\" },\n                    { text: \"3 (12pt)\", value: \"small\" },\n                    { text: \"4 (14pt)\", value: \"medium\" },\n                    { text: \"5 (18pt)\", value: \"large\" },\n                    { text: \"6 (24pt)\", value: \"x-large\" },\n                    { text: \"7 (36pt)\", value: \"xx-large\" }\n                ],\n                formatBlock: [\n                    { text: \"Paragraph\", value: \"p\" },\n                    { text: \"Quotation\", value: \"blockquote\" },\n                    { text: \"Heading 1\", value: \"h1\" },\n                    { text: \"Heading 2\", value: \"h2\" },\n                    { text: \"Heading 3\", value: \"h3\" },\n                    { text: \"Heading 4\", value: \"h4\" },\n                    { text: \"Heading 5\", value: \"h5\" },\n                    { text: \"Heading 6\", value: \"h6\" }\n                ],\n                tools: [\n                    \"formatting\",\n                    \"bold\",\n                    \"italic\",\n                    \"underline\",\n                    \"undo\",\n                    \"redo\",\n                    \"justifyLeft\",\n                    \"justifyCenter\",\n                    \"justifyRight\",\n                    \"copyFormat\",\n                    \"applyFormat\",\n                    \"insertUnorderedList\",\n                    \"insertOrderedList\",\n                    \"indent\",\n                    \"outdent\",\n                    \"createLink\",\n                    \"unlink\",\n                    \"insertImage\",\n                    \"tableWizard\",\n                    \"createTable\",\n                    \"addRowAbove\",\n                    \"addRowBelow\",\n                    \"addColumnLeft\",\n                    \"addColumnRight\",\n                    \"deleteRow\",\n                    \"deleteColumn\",\n                    \"mergeCellsHorizontally\",\n                    \"mergeCellsVertically\",\n                    \"splitCellHorizontally\",\n                    \"splitCellVertically\",\n                    \"tableAlignLeft\",\n                    \"tableAlignCenter\",\n                    \"tableAlignRight\"\n                ]\n            },\n\n            destroy: function() {\n                var editor = this;\n\n                Widget.fn.destroy.call(this);\n\n                this._endTyping(true);\n\n                this._deregisterHandlers();\n\n                clearTimeout(this._spellCorrectTimeout);\n\n                this._focusOutside();\n\n                this.toolbar.destroy();\n\n                if (this.windowInstance) {\n                    this.windowInstance.destroy();\n                }\n                if (this.tablePopup) {\n                    this.tablePopup.destroy();\n                }\n\n                editor._destroyUploadWidget();\n\n                editor._destroyResizings();\n\n                kendo.destroy(this.wrapper);\n            },\n\n            setOptions: function(options) {\n                var editor = this;\n\n                Widget.fn.setOptions.call(editor, options);\n\n                if (options.tools) {\n                    this._setOptionsTools(options.tools);\n                }\n\n                this._initializePlaceholder();\n            },\n\n            createRange: function(document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n\n            encodedValue: function() {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n\n            exec: function(name, params) {\n                var that = this;\n                var command = null;\n                var defaultTools = kendo.ui.Editor.defaultTools;\n                var range, tool, prevented;\n\n                if (!name) {\n                    throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n                }\n\n                if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                    name !== \"print\" &&\n                    name !== \"pdf\" &&\n                    name !== \"exportAs\") {\n                    return false;\n                }\n\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n\n                tool = that.tools[name] || defaultTools[name];\n\n                if (!tool) {\n                    Object.keys(defaultTools).map(function (key) {\n                        if (key.toLowerCase() === name) {\n                            tool = defaultTools[key];\n                        }\n                    });\n                }\n\n                if (tool) {\n                    range = that.getRange();\n\n                    if (tool.command) {\n                        command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                    }\n\n                    prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                    if (prevented) {\n                        return;\n                    }\n\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n\n                        if (command.async) {\n                            command.change = that._selectionChange.bind(that);\n                            return;\n                        }\n                    }\n\n                    that._selectionChange();\n                }\n            },\n\n            execCommand: function(command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n\n                command.editor = this;\n                command.exec();\n            },\n\n            focus: function() {\n                this.restoreSelection();\n            },\n\n            getRange: function() {\n                var selection = this.getSelection(),\n                    range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                    doc = this.document;\n\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n\n                return range;\n            },\n\n            getSelection: function() {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n\n            paste: function(html, options) {\n                this.focus();\n\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n\n                command.editor = this;\n\n                command.exec();\n            },\n\n            refresh: function() {\n                var that = this;\n\n                if (that.textarea) {\n                    that._destroyResizings();\n                    // preserve updated value before re-initializing\n                    // don't use update() to prevent the editor from encoding the content too early\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find(\"iframe\").remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n\n            restoreSelection: function() {\n                this._focusBody();\n\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n\n            saveSelection: function(range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer,\n                    body = this.body;\n\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n\n            selectedHtml: function() {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n\n            selectRange: function(range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n\n            state: function(toolName) {\n                var tool = kendo.ui.Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n\n                if (finder) {\n                    range = this.getRange();\n\n                    textNodes = RangeUtils.textNodes(range);\n\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n\n                return false;\n            },\n\n            update: function(value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n                if (this.textarea) {\n                    this.textarea.val(value);\n                    this._togglePlaceholder(!value.trim());\n                } else {\n                    this._oldValue = value;\n                }\n            },\n\n            value: function(html) {\n                var body = this.body,\n                    editorNS = kendo.ui.editor,\n                    options = this.options,\n                    currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n                if (html === undefined$1) {\n                    return currentHtml;\n                }\n\n                if (html == currentHtml) {\n                    return;\n                }\n\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n                this.selectionRestorePoint = null;\n                this.update();\n                this._refreshTools();\n            },\n\n            _bindTools: function() {\n                var that = this,\n                    defaultTools = this.tools;\n\n                that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter(function (i, el) { return $(el).find(\"[data-command]\").length === 0; })\n                    .each(function (i, el) {\n                        var toolName = el.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName];\n\n                        if (tool && tool.initialize) {\n                            tool.initialize($(el), that);\n                        }\n                    });\n\n                that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n            },\n\n            _blur: function() {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n\n                this.update();\n\n                if (textarea) {\n                    textarea.trigger(\"blur\");\n                }\n\n                if (value != old) {\n                    this.trigger(\"change\");\n                    if (textarea) {\n                        textarea.trigger(\"change\");\n                    }\n                }\n            },\n\n            _containsRange: function(range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                    dom.isAncestorOrSelf(body, range.endContainer);\n            },\n\n            _createContentElement: function(stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = \"\";\n                var src = 'javascript:\"\"';\n                var lang = \"\";\n\n                textarea.hide();\n\n                iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n                $(iframe)\n                    .css(\"display\", \"\")\n                    .addClass(\"k-content k-iframe\")\n                    .attr(\"tabindex\", textarea[0].tabIndex)\n                    .insertBefore(textarea);\n\n                // automatically relax same-origin policy if document.domain != location.hostname,\n                // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n                if (specifiedDomain || domain != location.hostname) {\n                    // relax same-origin policy\n                    domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                    src = \"javascript:document.write('\" + domainScript + \"')\";\n                    iframe.src = src;\n                }\n\n                if (!iframe.src) {\n                    iframe.src = \"\";\n                }\n\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n\n                $(iframe).one(\"load\", function() {\n                    editor._decorateFormatting(doc.body);\n                });\n\n                lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n                doc.open();\n                doc.write(\n                    \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                    \"<meta charset='utf-8' />\" +\n                    \"<title>Kendo UI Editor content</title>\" +\n                    \"<style>\" +\n                        \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                        \"body{padding:0;margin:0;}\" +\n                        \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                        \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                        (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                        (os.ios ? \"word-break:keep-all;\" : \"\") +\n                        (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                        \"}\" +\n                        \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                        \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                        \"ul,ol{padding-left:2.5em}\" +\n                        \"span{-ms-high-contrast-adjust:none;}\" +\n                        \"a{color:#00a}\" +\n                        \"code{font-size:1.23em}\" +\n                        \"telerik\\\\3Ascript{display: none;}\" +\n                        \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                        \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                        \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                        \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                        \".k-table p{margin:0;padding:0;}\" +\n                        \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                        \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                        \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                        \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                        \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                        \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                        \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                        \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                        \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                        \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                        \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                        \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                        \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                        \".k-table.k-element-resizing{opacity:0.6;}\" +\n                        \".k-placeholder{color:grey}\" +\n                        \"k\\\\:script{display:none;}\" +\n                    \"</style>\" +\n                    domainScript +\n                    $.map(stylesheets, function(href) {\n                        return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                    }).join(\"\") +\n                    \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n                );\n                doc.close();\n\n                return wnd;\n            },\n\n            _deleteSavedRange: function() {\n                if (\"_range\" in this) {\n                    delete this._range;\n                }\n            },\n\n            _decorateFormatting: function(body) {\n                var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                    dom = kendo.ui.editor.Dom,\n                    component, dataSource, items, i, tag, className, style;\n\n                if (formattingElement.length) {\n                    component = formattingElement.getKendoDropDownList();\n                    if (!component) {\n                        return;\n                    }\n                    dataSource = component.dataSource;\n                    items = dataSource.data();\n\n                    if (body) {\n                        component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                    }\n\n                    for (i = 0; i < items.length; i++) {\n                        tag = items[i].tag || \"span\";\n                        className = items[i].className;\n\n                        style = dom.inlineStyle(body, tag, { className: className });\n                        style = style.replace(/\"/g, \"'\");\n\n                        items[i].style = style + \";display:inline-block\";\n                    }\n\n                    dataSource.trigger(\"change\");\n                }\n            },\n\n            _deregisterHandlers: function() {\n                var handlers = this._handlers;\n\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n\n                this._handlers = [];\n            },\n\n            _destroyUploadWidget: function() {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n\n            _endTyping: function() {\n                var keyboard = this.keyboard;\n\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) { }\n            },\n\n            _focusBody: function() {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n\n\n                if (!iframe && body.scrollHeight > body.clientHeight) {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n\n                } else if (activeElement != body && activeElement != iframe) {\n                    scrollTop = documentElement.scrollTop;\n                    body.focus();\n                    documentElement.scrollTop = scrollTop;\n                }\n            },\n\n            _focusOutside: function() {\n                // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                    tempInput.trigger(\"blur\").remove();\n                }\n            },\n\n            _handleToolbarClick: function(e) {\n                var toolName = e.target.data(\"command\");\n\n                if (toolName && toolName !== \"createTable\") {\n                    this.exec(toolName);\n                }\n            },\n\n            _immutablesContext: function(range) {\n                var editorNS = kendo.ui.editor;\n\n                if (this.options.immutables) {\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n\n            _initializeContentElement: function() {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                    // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                    // https://github.com/telerik/kendo-ui-core/issues/3515\n                    if (!doc.body) {\n                        var body = doc.createElement(\"body\");\n                        body.setAttribute(\"contenteditable\", \"true\");\n                        body.setAttribute(\"autocorrect\", \"off\");\n                        doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                        var interval = setInterval(function() {\n                            if ($(editor.document).find(\"body\").length > 1) {\n                                $(editor.document).find(\"body\").last().remove();\n                                window.clearInterval(interval);\n                            }\n                        },10);\n                    }\n\n                    editor.body = doc.body;\n\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n\n                    this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n\n                    setTimeout(function () {\n                        editor._decorateFormatting(editor.body);\n                    });\n                }\n\n                this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n                editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n                try {\n                    doc.execCommand(\"enableInlineTableEditing\", null, false);\n                } catch (e) { }\n\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        \"keydown\": function() {\n                            // necessary in iOS when touch events are bound to the page\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n\n                this._initializePlaceholder();\n\n                this._spellCorrect(editor);\n\n                this._registerHandler(editor.document, {\n                    \"mouseover dragenter\": function(e) {\n                        var height = $(editor.body).height();\n                        var htmlHeight = $(editor.body.parentElement).height();\n\n                        if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                            editor._cachedHeight = \"\" + editor.body.style.height;\n                            editor.body.style.height = \"100%\";\n                        }\n                    },\n                    \"mouseout dragleave drop contextmenu\": function(e) {\n                        var restoreHeight = function() {\n                            if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                                editor.body.style.height = editor._cachedHeight;\n                                delete editor._cachedHeight;\n                            }\n                        };\n\n                        if (e.type === \"contextmenu\") {\n                            setTimeout(function() {\n                                restoreHeight();\n                            }, 10);\n                        } else {\n                            restoreHeight();\n                        }\n\n                    }\n                });\n\n                this._registerHandler(editor.body, {\n                    \"keydown\": function(e) {\n                        var range;\n\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                            return false;\n                        }\n\n                        if (e.keyCode === keys.F10) {\n                            editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                            editor.toolbar.preventPopupHide = true;\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            // skip bom nodes when navigating with arrows\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? \"startContainer\" : \"endContainer\"];\n                            var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                            var direction = left ? -1 : 1;\n\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n\n                        var tools = editor.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n\n                            editor.trigger(\"keydown\", e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n\n                            return false;\n                        }\n\n                        editor.keyboard.clearTimeout();\n\n                        editor.keyboard.keydown(e);\n                    },\n                    \"keypress\": function(e) {\n                        setTimeout(function() {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showElementResizeHandles();\n                        }, 0);\n                    },\n                    \"keyup\": function(e) {\n                        var selectionCodes = [\n                           keys.BACKSPACE,\n                           keys.TAB,\n                           keys.PAGEUP,\n                           keys.PAGEDOWN,\n                           keys.END,\n                           keys.HOME,\n                           keys.LEFT,\n                           keys.UP,\n                           keys.RIGHT,\n                           keys.DOWN,\n                           keys.INSERT,\n                           keys.DELETE\n                        ];\n\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                            window.clearTimeout(this._refreshInterval);\n                            this._refreshInterval = window.setTimeout(function() {\n                                editor._selectionChange();\n                            }, REFRESH_INTERVAL);\n                        }\n\n                        editor.keyboard.keyup(e);\n                    },\n                    \"click\": function(e) {\n                        var dom = kendo.ui.editor.Dom, range;\n\n                        if (dom.name(e.target) === \"img\") {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    \"cut copy paste drop dragover\": function(e) {\n                        editor.clipboard[\"on\" + e.type](e);\n                    },\n                    \"focusin\": function() {\n                        if (editor.body.hasAttribute(\"contenteditable\")) {\n                            $(this).addClass(\"k-active\");\n                            // To be moved to the Editor\n                            editor._showWindow();\n                            editor._togglePlaceholder(false);\n                        }\n                    },\n                    \"focusout\": function() {\n                        setTimeout(function() {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            // All below to be moved to the Editor\n                            var toolbar = editor.toolbar;\n\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = editor.windowInstance.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n\n                            if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                                $(body).removeClass(\"k-active\");\n                                editor._hideWindow();\n                            }\n\n                            editor._togglePlaceholder(!editor.value().trim());\n                        }, 10);\n                    }\n                });\n\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            },\n\n            _initializeImmutables: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n\n            _initializePlaceholder: function() {\n                var that = this,\n                    placeholder = that.options.placeholder,\n                    style, $head;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                            PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                        \"</style>\";\n\n                $head = $(that.document.head);\n                $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n                $head.append(style);\n\n                that._togglePlaceholder(!that.value().trim());\n            },\n\n            _initToolbar: function(toolbarContainer) {\n                var assign;\n\n                var that = this,\n                    tools, defaults, toolbarOptions;\n\n                that.tools = [];\n                (assign = that._processToolbarItems(that.options.tools), tools = assign[0], defaults = assign[1]);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this),\n                    navigateOnTab: that.options.navigateOnTab\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n                that.bind(\"select\", that._refreshTools.bind(that));\n\n                toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                    e.preventDefault();\n                });\n\n                if (!that.textarea) {\n                    that._initToolbarWindow(toolbarContainer);\n                }\n            },\n\n            _initToolbarWindow: function(toolbarEl) {\n                var that = this;\n\n                this.windowInstance = toolbarEl\n                    .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                    .parent()\n                    .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                    .kendoWindow({\n                        title: false,\n                        resizable: false,\n                        draggable: {\n                            dragHandle: \".k-editortoolbar-dragHandle\"\n                        },\n                        animation: {\n                            open: { effects: \"fade:in\" },\n                            close: { effects: \"fade:out\" }\n                        },\n                        minHeight: 42,\n                        visible: false,\n                        autoFocus: false,\n                        actions: [],\n                        dragend: function() {\n                            this._moved = true;\n                        }\n                    })\n                    .on(\"mousedown\", function(e) {\n                        if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                            that.toolbar.preventPopupHide = true;\n                        }\n                    })\n                    .on(\"focusout\", function() {\n                        that.element.focusout();\n                    })\n                    .data(\"kendoWindow\");\n            },\n\n            _mousedown: function(e) {\n                var editor = this;\n                editor._selectionStarted = true;\n\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n\n                // handle middle-click and ctrl-click on links\n                if (browser.gecko) {\n                    return;\n                }\n\n                var target = $(e.target).closest(\"a[href]\");\n\n                if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                    window.open(target.attr(\"href\"), \"_new\");\n                }\n\n                if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                    setTimeout(function() {\n                        editor.body.focus();\n                    }, 0);\n                }\n            },\n\n            _mouseup: function(e) {\n                var that = this;\n\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n\n                if (that._selectionStarted) {\n                    setTimeout(function() {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n\n            _populateValue: function(options, domElement) {\n                var that = this,\n                    editorNS = kendo.ui.editor,\n                    dom = editorNS.Dom,\n                    value, comments;\n\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    // indented HTML introduces problematic ranges in IE\n                    value = domElement.value;\n\n                    if (!value.replace(/\\s/g, '').length) {\n                        value = value.replace(/\\s/g, '');\n                    }\n\n                    // revert encoding of value when content is fetched from cache\n                    if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                        value = domElement.defaultValue;\n                    }\n\n                    var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                    comments = dom.getAllComments(deserializedRoot);\n                    value = EditorUtils.cacheComments(value, comments);\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                    value = EditorUtils.retrieveComments(value, comments);\n                } else {\n                    value = domElement.innerHTML;\n                }\n\n                that.value(value || '\\ufeff');\n            },\n\n            _resetGroups: function(current) {\n                var result = {};\n\n                Object.keys(current).map(function (key) {\n                    result[key + \"_\"] = current[key];\n                });\n\n                return result;\n            },\n\n            _processToolbarItems: function(optionsTools) {\n                var assign, assign$1;\n\n                var flatDefaultTools = {},\n                    processedObject = {},\n                    tools = [],\n                    currentGroups = $.extend(true, {}, toolGroups),\n                    i, j, t, name, guidGroupName;\n\n                for (i = 0; i < optionsTools.length; i++) {\n                    t = optionsTools[i];\n\n                    if (Array.isArray(t)) {\n                        guidGroupName = kendo.guid();\n\n                        for (j = 0; j < t.length; j++) {\n                            (assign = this._processToolOptions(t[j], flatDefaultTools), flatDefaultTools = assign[0], name = assign[1]);\n\n                            if (!name) {\n                                continue;\n                            }\n\n                            flatDefaultTools[name].gr = guidGroupName;\n                        }\n                    } else {\n                        (assign$1 = this._processToolOptions(t, flatDefaultTools), flatDefaultTools = assign$1[0], name = assign$1[1]);\n\n                        if (!name) {\n                            continue;\n                        } else if (name === \"separator\") {\n                            currentGroups = this._resetGroups(currentGroups);\n                        }\n\n                        Object.keys(currentGroups).map(function (key) {\n                            var group = currentGroups[key];\n\n                            if (group.includes(name)) {\n                                flatDefaultTools[name].gr = key;\n                            }\n                        });\n                    }\n                }\n\n                Object.values(flatDefaultTools).map(function (tool) {\n                    var group = tool.gr;\n\n                    delete tool.gr;\n\n                    if (group === undefined$1) {\n                        processedObject[tool.name] = tool;\n                    } else {\n                        if (!processedObject[group]) {\n                            processedObject[group] = [];\n                        }\n\n                        processedObject[group].push(tool);\n                    }\n                });\n\n                tools = Object.values(processedObject).map(function (g) {\n                    var result;\n\n                    if (g.length) {\n                        result = g.map(function (to) { return to.name; });\n                    } else {\n                        result = g.name;\n                    }\n\n                    if (result.length === 1) {\n                        result = result[0];\n                    }\n\n                    return result;\n                });\n\n                return [tools, flatDefaultTools];\n            },\n\n            _processDefaultTool: function(tool, defaultTools) {\n                var name = tool.name,\n                    result = {},\n                    options;\n\n                if ($.isPlainObject(tool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result = extend({}, defaultTools[name]);\n                        extend(result.options, tool);\n                    } else {\n                        // custom tool\n                        options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        result = {\n                            options: options\n                        };\n\n                        name = options.name;\n                    }\n                } else if (defaultTools[tool]) {\n                    name = tool;\n                    result = defaultTools[name];\n                } else {\n                    return null;\n                }\n\n                this.tools[name] = result;\n\n                return result;\n            },\n\n            _processToolOptions: function(t, flatDefaultTools) {\n                var that = this,\n                    defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, palette;\n\n                tool = this._processDefaultTool(t, defaultTools);\n\n                if (!tool) {\n                    return [flatDefaultTools, null];\n                }\n\n                options = tool.options;\n                name = options.name;\n                uiOptions = options.ui || {};\n                icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n                toolOptions = $.extend({\n                    name: options.name,\n                    command: options.command,\n                    template: options.template,\n                    type: \"button\",\n                    icon: icon,\n                    showText: \"overflow\",\n                    showIcon: \"both\"\n                }, uiOptions);\n\n                if (options.tooltip) {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes.title = options.tooltip;\n                }\n                if (options.exec) {\n                    toolOptions.click = options.exec.bind(that);\n                    delete toolOptions.exec;\n                }\n                if (toolOptions.component === \"ColorPicker\") {\n                    if (options.palette || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                        palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                        view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                        toolOptions.componentOptions.palette = palette;\n                        toolOptions.componentOptions.views = [view];\n                        toolOptions.componentOptions.preview = view === \"gradient\";\n                        toolOptions.componentOptions.input = view === \"gradient\";\n                        toolOptions.componentOptions.buttons = view === \"gradient\";\n                    }\n                    if (toolOptions.columns) {\n                        toolOptions.componentOptions.columns = options.columns;\n                    }\n                }\n\n                if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                    if (!toolOptions.componentOptions) {\n                        toolOptions.componentOptions = {};\n                    }\n\n                    if (!toolOptions.componentOptions.dataSource) {\n                        toolOptions.componentOptions.dataSource = that.options[name] || options.items;\n                    }\n                }\n                if (toolOptions.template) {\n                    delete toolOptions.type;\n                }\n\n                shortcuts = this._shortcutSequence(name);\n\n                if (shortcuts !== \"\") {\n                    if (!toolOptions.attributes) {\n                        toolOptions.attributes = {};\n                    }\n\n                    toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n                }\n\n                flatDefaultTools[name] = toolOptions;\n\n                return [flatDefaultTools, name];\n            },\n\n            _refreshTools: function() {\n                var that = this,\n                    range = that.getRange(),\n                    editorNS = kendo.ui.editor,\n                    rangeUtils = editorNS.RangeUtils,\n                    nodes = rangeUtils.textNodes(range),\n                    immutables = that.options.immutables,\n                    immutablesContext = that._immutablesContext(range),\n                    defaultTools = that.tools;\n\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n\n                that.toolbar.element.find(\"[data-command]\")\n                    .filter(function (i, el) { return $(el).find(\"[data-command]\").length === 0; })\n                    .each(function() {\n                        var toolName = this.getAttribute(\"data-command\"),\n                            tool = defaultTools[toolName],\n                            ui;\n\n                        if (tool) {\n                            ui = $(this);\n\n                            if (tool.update) {\n                                tool.update(ui, nodes, that.undoRedoStack);\n                            }\n\n                            if (immutables) {\n                                that._updateImmutablesState(tool, ui, immutablesContext);\n                            }\n                        }\n                    });\n            },\n\n            _registerHandler: function(element, type, handler) {\n                var editor = this;\n                var NS = \".kendoEditor\";\n                var eventNames;\n                var i;\n\n                element = $(element);\n\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        //map the original event to handle interaction on mobile platforms\n                        eventNames = kendo.applyEventMap(type).split(\" \");\n\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n\n            _runPostContentKeyCommands: function(e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n\n            _selectionChange: function() {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger(\"select\", {});\n            },\n\n            _setOptionsTools: function(optionsTools) {\n                var assign;\n\n                var that = this,\n                    toolbar = that.toolbar,\n                    toolbarContainer = toolbar.element,\n                    tools, defaults, toolbarOptions;\n\n                toolbar.destroy();\n                toolbarContainer.empty();\n\n                that.tools = [];\n                (assign = that._processToolbarItems(optionsTools), tools = assign[0], defaults = assign[1]);\n                that._setNativeTools();\n\n                toolbarOptions = {\n                    tools: tools,\n                    defaultTools: defaults,\n                    parentMessages: that.options.messages,\n                    resizable: that.options.resizable && that.options.resizable.toolbar,\n                    toggle: that._handleToolbarClick.bind(this),\n                    click: that._handleToolbarClick.bind(this)\n                };\n\n                that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n                that._bindTools();\n            },\n\n            _setNativeTools: function() {\n                var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                    i;\n\n                for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                    if (!this.tools[NATIVE_TOOLS[i]]) {\n                        this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                    }\n                }\n            },\n\n            _setupHeight: function(type) {\n                var that = this;\n\n                if (type == \"textarea\") {\n                    setTimeout(function() {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n            },\n\n            _setupKeyboard: function() {\n                var that = this,\n                    editorNS = kendo.ui.editor;\n\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n            },\n\n            _setupType: function(element) {\n                var domElement = element[0],\n                    type = kendo.ui.editor.Dom.name(domElement),\n                    id = domElement.id,\n                    toolbarContainer;\n\n                if (type == \"textarea\") {\n                    this._wrapTextarea();\n\n                    toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                    if (!id) {\n                        id = kendo.guid();\n                        domElement.setAttribute(\"id\", id);\n                    }\n\n                    toolbarContainer.attr(\"aria-controls\", id);\n                } else {\n                    this.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n                    toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n                }\n\n                return toolbarContainer;\n            },\n\n            _shortcutSequence: function(name) {\n                var tool = kendo.ui.Editor.defaultTools[name],\n                    res = \"\",\n                    options;\n\n                if (!tool || !tool.options) {\n                    return res;\n                }\n\n                options = tool.options;\n\n                if (options.ctrl) {\n                    res += \"Ctrl+\";\n                }\n\n                if (options.shift) {\n                    res += \"Shift+\";\n                }\n\n                if (options.alt) {\n                    res += \"Alt+\";\n                }\n\n                if (options.key) {\n                    res += options.key;\n                }\n\n                return res;\n            },\n\n            _spellCorrect: function(editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n\n                this._registerHandler(editor.body, {\n                    \"contextmenu\": function() {\n                        editor.one(\"select\", function() {\n                            beforeCorrection = null;\n                        });\n\n                        editor._spellCorrectTimeout = setTimeout(function() {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    \"input\": function() {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n\n            _togglePlaceholder: function(show) {\n                var that = this,\n                    body = that.body,\n                    $body = $(body),\n                    placeholder = that.options.placeholder;\n\n                if (!that.textarea || !placeholder) {\n                    return;\n                }\n\n                $body.attr('aria-label', function() {\n                    return show ? placeholder : \"\";\n                });\n\n                $body.toggleClass(PLACEHOLDER_CLASS, show);\n            },\n\n            _toolbarFocused: function() {\n                var active = kendo._activeElement(),\n                    popup = this.windowInstance,\n                    overflowPopup = this.overflowPopup;\n\n                return (popup && $(active).closest(popup.wrapper).length) ||\n                    (overflowPopup && overflowPopup.visible());\n            },\n\n            _updateImmutablesState: function(tool, ui, immutablesContext) {\n                var toolbar = this.toolbar,\n                    name = tool.name,\n                    uiElement = ui.closest(\".k-toolbar-tool\"),\n                    trackImmutables = tool.options.trackImmutables,\n                    editorNS = kendo.ui.editor;\n\n                if (trackImmutables === undefined$1) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n\n                if (trackImmutables) {\n                    if (immutablesContext) {\n                        toolbar.hide(uiElement);\n                    } else {\n                        toolbar.show(uiElement);\n                    }\n                }\n            },\n\n            _wrapTextarea: function() {\n                var that = this,\n                    textarea = that.element,\n                    w = textarea[0].style.width,\n                    h = textarea[0].style.height,\n                    template = EditorUtils.editorWrapperTemplate(),\n                    editorWrap = $(template).insertBefore(textarea),\n                    editArea = editorWrap.find(\".k-editable-area\");\n\n                editorWrap.css({\n                    \"width\": w,\n                    \"height\": h\n                });\n\n                textarea.attr(\"autocomplete\", \"off\")\n                    .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n\n            // Resizing methods\n            _resizable: function() {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n                if (isResizable && this.textarea) {\n                    var draggableElement = $(\"<div class='k-resize-handle'>\" + kendo.ui.icon(\"caret-br\") + \"</div>\")\n                        .insertAfter(this.textarea);\n\n                    this.wrapper.addClass('k-resizable');\n\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        draggableElement: draggableElement,\n                        start: function(e) {\n                            var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                            this.initialSize = editor.height();\n                            editor.find(\".k-editable-area\").last().append(\"<div class='k-overlay' />\");\n                        },\n                        resize: function(e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n\n                            newSize = Math.min(max, Math.max(min, newSize));\n\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function() {\n                            this.editor.find(\".k-overlay\").remove();\n                            this.editor = null;\n                        }\n                    }));\n\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n\n            _destroyResizings: function() {\n                var editor = this;\n\n                editor._destroyElementResizing();\n                kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n\n            _initializeElementResizing: function() {\n                var editor = this;\n\n                kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n                editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n                editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n            },\n\n            _destroyElementResizing: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing) {\n                    elementResizing.destroy();\n                    editor.elementResizing = null;\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            },\n\n            _showElementResizeHandles: function() {\n                var editor = this;\n                var elementResizing = editor.elementResizing;\n\n                if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                    elementResizing.showResizeHandles();\n                } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                    editor._destroyElementResizing();\n                }\n            },\n\n            _initializeColumnResizing: function() {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n\n            _destroyColumnResizing: function() {\n                var editor = this;\n\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n\n            _initializeRowResizing: function() {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n\n            _destroyRowResizing: function() {\n                var editor = this;\n\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n\n            // ToolBar Window methods\n            _getWindowWidth: function() {\n                var that = this,\n                    wrapper = that.windowInstance.wrapper,\n                    editorElement = that.element;\n\n                return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n            },\n\n            _hideWindow: function() {\n                if (this.windowInstance) {\n                    this.windowInstance.close();\n                }\n            },\n\n            _overlapsWindow: function(box) {\n                var toolbarWrapper = this.windowInstance.wrapper,\n                    toolbarWrapperOffset = toolbarWrapper.offset(),\n                    toolbarWrapperLeft = toolbarWrapperOffset.left,\n                    toolbarWrapperTop = toolbarWrapperOffset.top,\n                    boxOffset = box.offset(),\n                    boxOffsetLeft = boxOffset.left,\n                    boxOffsetTop = boxOffset.top;\n\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                        boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                        boxOffsetTop + box.height() < toolbarWrapperTop ||\n                        boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n\n            _showWindow: function() {\n                var that = this,\n                    windowInstance = that.windowInstance,\n                    wrapper, editorElement, editorOffset,\n                    browser = kendo.support.browser;\n\n                if (windowInstance) {\n                    wrapper = windowInstance.wrapper;\n                    editorElement = that.element;\n\n                    if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(this._getWindowWidth());\n                        }\n\n                        // track content position when other parts of page change\n                        if (!windowInstance._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n\n                        if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                            setTimeout(function() {\n                                windowInstance.open();\n                            }, 0);\n                        } else {\n                            windowInstance.open();\n                        }\n                    }\n                }\n            }\n        });\n\n        Editor.defaultTools = {};\n\n        kendo.ui.plugin(Editor);\n\n        var Tool = Class.extend({\n            init: function(options) {\n                this.options = options;\n            },\n\n            command: function(commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n\n            update: $.noop\n        });\n\n        Tool.exec = function(editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n\n        var UndoTool = Tool.extend({\n            command: $.noop,\n            update: function(ui, nodes, undoRedoStack) {\n                var that = this,\n                    name = that.options.name,\n                    toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n                switch (name) {\n                    case \"undo\":\n                        toolbar.enable(ui, undoRedoStack.canUndo());\n                        break;\n                    case \"redo\":\n                        toolbar.enable(ui, undoRedoStack.canRedo());\n                        break;\n                    default:\n                        break;\n                }\n\n                ui.removeAttr(\"disabled\");\n            }\n        });\n\n        EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n        EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n        EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n        // Exports ================================================================\n\n        var emptyElementContent = '\\ufeff';\n        var emptyTableCellContent = emptyElementContent;\n\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n        }\n\n        extend(kendo.ui, {\n            editor: {\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function() {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function() {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n\n                if (this.trigger(\"pdfExport\", args)) {\n                    return;\n                }\n\n                var options = this.options.pdf;\n\n                this._drawPDF(progress)\n                .then(function(root) {\n                    return kendo.drawing.exportPDF(root, options);\n                })\n                .done(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                })\n                .fail(function(err) {\n                    progress.reject(err);\n                });\n\n                return promise;\n            };\n        }\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        map = $.map,\n        extend = $.extend,\n        browser = kendo.support.browser,\n        STYLE = \"style\",\n        FLOAT = \"float\",\n        CSSFLOAT = \"cssFloat\",\n        STYLEFLOAT = \"styleFloat\",\n        CLASS = \"class\",\n        KMARKER = \"k-marker\";\n\n    function makeMap(items) {\n        var obj = {},\n            i, len;\n\n        for (i = 0, len = items.length; i < len; i++) {\n            obj[items[i]] = true;\n        }\n        return obj;\n    }\n\n    var empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n        nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n        blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n        block = makeMap(blockElements),\n        selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n        inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n        inline = makeMap(inlineElements),\n        fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n        nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\n    var normalize = function(node) {\n        if (node.nodeType == 1) {\n            node.normalize();\n        }\n    };\n\n    if (browser.msie && browser.version >= 8) {\n        normalize = function(parent) {\n            if (parent.nodeType == 1 && parent.firstChild) {\n                var prev = parent.firstChild,\n                    node = prev;\n\n                normalize(node);\n\n                while (true) {\n                    node = node.nextSibling;\n\n                    if (!node) {\n                        break;\n                    }\n\n                    normalize(node);\n\n                    if (node.nodeType == 3 && prev.nodeType == 3) {\n                        node.nodeValue = prev.nodeValue + node.nodeValue;\n                        Dom.remove(prev);\n                    }\n\n                    prev = node;\n                }\n            }\n        };\n    }\n\n    var whitespace = /^\\s+$/,\n        emptyspace = /^[\\n\\r\\t]+$/,\n        rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n        bom = /\\ufeff/g,\n        whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n        persistedScrollTop,\n        cssAttributes =\n               (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n                \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n                \"border-top-style,border-top-width,border-top-color,\" +\n                \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n                \"border-left-style,border-left-width,border-left-color,\" +\n                \"border-right-style,border-right-width,border-right-color,\" +\n                \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n               ).split(\",\"),\n        htmlRe = /[<>\\&]/g,\n        entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n        entityTable = {\n                34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n                160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n                165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n                170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n                175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n                180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n                185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n                190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n                195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n                200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n                205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n                210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n                215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n                220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n                225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n                230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n                235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n                240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n                245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n                250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n                255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n                916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n                921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n                926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n                932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n                937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n                949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n                954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n                959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n                964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n                969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n                8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n                8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n                8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n                8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n                8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n                8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n                8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n                8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n                8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n                8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n                8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n                8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n                8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n                9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n                338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n                710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n                8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n                8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n                8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n                8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n            };\n\n    var Dom = {\n        block: block,\n        inline: inline,\n\n        findNodeIndex: function(node, skipText) {\n            var i = 0;\n\n            if (!node) {\n                return -1;\n            }\n\n            while (true) {\n                node = node.previousSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                if (!(skipText && node.nodeType == 3)) {\n                    i++;\n                }\n            }\n\n            return i;\n        },\n\n        isDataNode: function(node) {\n            return node && node.nodeValue !== null && node.data !== null;\n        },\n\n        isAncestorOf: function(parent, node) {\n            try {\n                return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n            } catch (e) {\n                return false;\n            }\n        },\n\n        isAncestorOrSelf: function(root, node) {\n            return Dom.isAncestorOf(root, node) || root == node;\n        },\n\n        findClosestAncestor: function(root, node) {\n            if (Dom.isAncestorOf(root, node)) {\n                while (node && node.parentNode != root) {\n                    node = node.parentNode;\n                }\n            }\n\n            return node;\n        },\n\n        getAllComments: function(rootElem) {\n            var comments = [];\n            // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n            var iterator = document.createNodeIterator(rootElem,\n                NodeFilter.SHOW_COMMENT,\n                function() {\n                    return NodeFilter.FILTER_ACCEPT;\n                }, false);\n\n            var curNode = iterator.nextNode();\n            while (curNode) {\n                comments.push(curNode.nodeValue);\n                curNode = iterator.nextNode();\n            }\n            return comments;\n        },\n\n        getNodeLength: function(node) {\n            return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n        },\n\n        splitDataNode: function(node, offset) {\n            var newNode = node.cloneNode(false);\n            var denormalizedText = \"\";\n            var iterator = node.nextSibling;\n            var temp;\n\n            while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                denormalizedText += iterator.nodeValue;\n                temp = iterator;\n                iterator = iterator.nextSibling;\n                Dom.remove(temp);\n            }\n\n            node.deleteData(offset, node.length);\n            newNode.deleteData(0, offset);\n            newNode.nodeValue += denormalizedText;\n            Dom.insertAfter(newNode, node);\n        },\n\n        attrEquals: function(node, attributes) {\n            for (var key in attributes) {\n                var value = node[key];\n\n                if (key == FLOAT) {\n                    value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                }\n\n                if (typeof value == \"object\") {\n                    if (!Dom.attrEquals(value, attributes[key])) {\n                        return false;\n                    }\n                } else if (value != attributes[key]) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        blockParentOrBody: function(node) {\n            return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n        },\n\n        blockParents: function(nodes) {\n            var blocks = [],\n                i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                if (block && $.inArray(block, blocks) < 0) {\n                    blocks.push(block);\n                }\n            }\n\n            return blocks;\n        },\n\n        windowFromDocument: function(document) {\n            return document.defaultView || document.parentWindow;\n        },\n\n        normalize: normalize,\n        blockElements: blockElements,\n        nonListBlockElements: nonListBlockElements,\n        inlineElements: inlineElements,\n        empty: empty,\n        fillAttrs: fillAttrs,\n        nodeTypes: {\n            ELEMENT_NODE: 1,\n            ATTRIBUTE_NODE: 2,\n            TEXT_NODE: 3,\n            CDATA_SECTION_NODE: 4,\n            ENTITY_REFERENCE_NODE: 5,\n            ENTITY_NODE: 6,\n            PROCESSING_INSTRUCTION_NODE: 7,\n            COMMENT_NODE: 8,\n            DOCUMENT_NODE: 9,\n            DOCUMENT_TYPE_NODE: 10,\n            DOCUMENT_FRAGMENT_NODE: 11,\n            NOTATION_NODE: 12\n        },\n\n        toHex: function(color) {\n            var matches = rgb.exec(color);\n\n            if (!matches) {\n                return color;\n            }\n\n            return \"#\" + map(matches.slice(1), function(x) {\n                x = parseInt(x, 10).toString(16);\n                return x.length > 1 ? x : \"0\" + x;\n            }).join(\"\");\n        },\n\n        encode: function(value, options) {\n            var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n            return value.replace(encodableChars, function(c) {\n                var charCode = c.charCodeAt(0);\n                var entity = entityTable[charCode];\n                return entity ? '&' + entity + ';' : c;\n            });\n        },\n        isBom: function(node) {\n            return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n        },\n        stripBom: function(text) {\n            return (text || \"\").replace(bom, \"\");\n        },\n\n        stripBomNode: function(node) {\n            if (Dom.isBom(node)) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        insignificant: function(node) {\n            var attr = node.attributes;\n\n            return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n        },\n        tableCell: function(node) {\n            return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n        },\n        significantNodes: function(nodes) {\n            return $.grep(nodes, function(child) {\n                var name = Dom.name(child);\n\n                if (name == 'br') {\n                    return false;\n                } else if (Dom.insignificant(child)) {\n                    return false;\n                } else if (Dom.emptyTextNode(child)) {\n                    return false;\n                } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                    return false;\n                }\n\n                return true;\n            });\n        },\n\n        emptyTextNode: function(node) {\n            return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n        },\n\n        emptyNode: function(node) {\n            return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n        },\n\n        name: function(node) {\n            return node.nodeName.toLowerCase();\n        },\n\n        significantChildNodes: function(node) {\n            return $.grep(node.childNodes, function(child) {\n                return child.nodeType != 3 || !Dom.isWhitespace(child);\n            });\n        },\n\n        lastTextNode: function(node) {\n            var result = null;\n\n            if (node.nodeType == 3) {\n                return node;\n            }\n\n            for (var child = node.lastChild; child; child = child.previousSibling) {\n                result = Dom.lastTextNode(child);\n\n                if (result) {\n                    return result;\n                }\n            }\n\n            return result;\n        },\n\n        is: function(node, nodeName) {\n            return node && Dom.name(node) == nodeName;\n        },\n\n        isMarker: function(node) {\n            return node.className == KMARKER;\n        },\n\n        isWhitespace: function(node) {\n            return whitespace.test(node.nodeValue);\n        },\n\n        allowsTextContent: function(node) {\n            var result = true;\n\n            nonEmptyNonTextContentElements.every(function(name) {\n                if (Dom.is(node, name)) {\n                    result = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        allWhitespaceContent: function(node) {\n            var child = node.firstChild;\n            while (child && Dom.isWhitespace(child)) {\n                child = child.nextSibling;\n            }\n\n            return !child;\n        },\n\n        isEmptyspace: function(node) {\n            return emptyspace.test(node.nodeValue);\n        },\n\n        htmlIndentSpace: function(node) {\n            if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                return false;\n            }\n\n            if (emptyspace.test(node.nodeValue)) {\n                return true;\n            }\n\n            var sibling = function(el, direction) {\n                while (el[direction]) {\n                    el = el[direction];\n                    if (Dom.significantNodes([el]).length > 0) {\n                        return el;\n                    }\n                }\n            };\n\n            var parent = node.parentNode;\n            var prev = sibling(node, \"previousSibling\");\n            var next = sibling(node, \"nextSibling\");\n\n            if (bom.test(node.nodeValue)) {\n                return !!(prev || next);\n            }\n\n            if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n                return true;\n            }\n\n            if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n                var isPrevBlock = prev && Dom.isBlock(prev);\n                var isNextBlock = next && Dom.isBlock(next);\n                if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        isBlock: function(node) {\n            return block[Dom.name(node)];\n        },\n\n        isSelfClosing: function(node) {\n            return selfClosing[Dom.name(node)];\n        },\n\n        isEmpty: function(node) {\n            return empty[Dom.name(node)];\n        },\n\n        isInline: function(node) {\n            return inline[Dom.name(node)];\n        },\n\n        isBr: function(node) {\n            return Dom.name(node) == \"br\";\n        },\n\n        list: function(node) {\n            var name = node ? Dom.name(node) : \"\";\n            return name == \"ul\" || name == \"ol\" || name == \"dl\";\n        },\n\n        scrollContainer: function(doc) {\n            var wnd = Dom.windowFromDocument(doc),\n                scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n            if (scrollContainer.compatMode == 'BackCompat') {\n                scrollContainer = scrollContainer.body;\n            } else {\n                scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n            }\n\n            return scrollContainer;\n        },\n\n        scrollTo: function(node, toStart) {\n            var doc = node.ownerDocument;\n            var wnd = Dom.windowFromDocument(doc);\n            var windowHeight = wnd.innerHeight;\n            var scrollContainer = Dom.scrollContainer(doc);\n            var element, elementTop, elementHeight, marker;\n\n            if (Dom.isDataNode(node)) {\n                if (toStart) {\n                    marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                    Dom.insertBefore(marker, node);\n                    element = $(marker);\n                } else {\n                    element = $(node.parentNode);\n                }\n            } else {\n                element = $(node);\n            }\n\n            elementTop = element.offset().top;\n            elementHeight = element[0].offsetHeight;\n\n            if (toStart || !elementHeight) {\n                elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                                Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                                15;\n            }\n\n            if (marker) {\n                Dom.remove(marker);\n            }\n\n            if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n            }\n        },\n\n        persistScrollTop: function(doc) {\n            persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n        },\n\n        offset: function(target, offsetParent) {\n            var result = { top: target.offsetTop, left: target.offsetLeft };\n            var parent = target.offsetParent;\n\n            while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                result.top += parent.offsetTop;\n                result.left += parent.offsetLeft;\n                parent = parent.offsetParent;\n            }\n\n            return result;\n        },\n\n        restoreScrollTop: function(doc) {\n            if (typeof persistedScrollTop == \"number\") {\n                Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                persistedScrollTop = undefined;\n            }\n        },\n\n        insertAt: function(parent, newElement, position) {\n            parent.insertBefore(newElement, parent.childNodes[position] || null);\n        },\n\n        insertBefore: function(newElement, referenceElement) {\n            if (referenceElement.parentNode) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n            } else {\n                return referenceElement;\n            }\n        },\n\n        insertAfter: function(newElement, referenceElement) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n        },\n\n        remove: function(node) {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        },\n\n        removeChildren: function(node) {\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n        },\n\n        removeTextSiblings: function(node) {\n            var parentNode = node.parentNode;\n\n            while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                parentNode.removeChild(node.nextSibling);\n            }\n\n            while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                parentNode.removeChild(node.previousSibling);\n            }\n        },\n\n        trim: function(parent) {\n            for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                var node = parent.childNodes[i];\n                if (Dom.isDataNode(node)) {\n                    if (!Dom.stripBom(node.nodeValue).length) {\n                        Dom.remove(node);\n                    }\n                } else if (node.className != KMARKER) {\n                    Dom.trim(node);\n\n                    if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                        (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                        Dom.remove(node);\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        closest: function(node, tags) {\n            if (typeof tags === \"string\") {\n                tags = [tags];\n            }\n\n            while (node && tags.indexOf(Dom.name(node)) < 0) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        closestBy: function(node, condition, rootCondition) {\n            while (node && !condition(node)) {\n                if (rootCondition && rootCondition(node)) {\n                    return null;\n                }\n                node = node.parentNode;\n            }\n            return node;\n        },\n\n        sibling: function(node, direction) {\n            do {\n                node = node[direction];\n            } while (node && node.nodeType != 1);\n\n            return node;\n        },\n\n        next: function(node) {\n            return Dom.sibling(node, \"nextSibling\");\n        },\n\n        prev: function(node) {\n            return Dom.sibling(node, \"previousSibling\");\n        },\n\n        parentOfType: function(node, tags) {\n            do {\n                node = node.parentNode;\n            } while (node && !(Dom.ofType(node, tags)));\n\n            return node;\n        },\n\n        ofType: function(node, tags) {\n            return $.inArray(Dom.name(node), tags) >= 0;\n        },\n\n        changeTag: function(referenceElement, tagName, skipAttributes) {\n            var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n                attributes = referenceElement.attributes,\n                i, len, name, value, attribute;\n\n            if (!skipAttributes) {\n                for (i = 0, len = attributes.length; i < len; i++) {\n                    attribute = attributes[i];\n                    if (attribute.specified) {\n                        // IE < 8 cannot set class or style via setAttribute\n                        name = attribute.nodeName;\n                        value = attribute.nodeValue;\n                        if (name == CLASS) {\n                            newElement.className = value;\n                        } else if (name == STYLE) {\n                            newElement.style.cssText = referenceElement.style.cssText;\n                        } else {\n                            newElement.setAttribute(name, value);\n                        }\n                    }\n                }\n            }\n\n            while (referenceElement.firstChild) {\n                newElement.appendChild(referenceElement.firstChild);\n            }\n\n            Dom.insertBefore(newElement, referenceElement);\n            Dom.remove(referenceElement);\n            return newElement;\n        },\n\n        editableParent: function(node) {\n            while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        wrap: function(node, wrapper) {\n            Dom.insertBefore(wrapper, node);\n            wrapper.appendChild(node);\n            return wrapper;\n        },\n\n        unwrap: function(node) {\n            var parent = node.parentNode;\n            while (node.firstChild) {\n                parent.insertBefore(node.firstChild, node);\n            }\n\n            parent.removeChild(node);\n        },\n\n        wrapper: function(node) {\n            var wrapper = Dom.closestBy(node, function(el) {\n                return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n            });\n\n            return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n        },\n\n        create: function(document, tagName, attributes) {\n            return Dom.attr(document.createElement(tagName), attributes);\n        },\n\n        createEmptyNode: function(document, tagName, attributes) {\n            var node = Dom.attr(document.createElement(tagName), attributes);\n            node.innerHTML = \"\\ufeff\";\n            return node;\n        },\n\n        attr: function(element, attributes) {\n            attributes = extend({}, attributes);\n\n            if (attributes && STYLE in attributes) {\n                Dom.style(element, attributes.style);\n                delete attributes.style;\n            }\n\n            for (var attr in attributes) {\n                if (attributes[attr] === null) {\n                    element.removeAttribute(attr);\n                    delete attributes[attr];\n                } else if (attr == \"className\") {\n                    element[attr] = attributes[attr];\n                }\n            }\n\n            return extend(element, attributes);\n        },\n\n        mergeAttributes: function(origin, target, traverseCss) {\n            if (!origin.attributes.length) {\n                return;\n            }\n\n            $.each(origin.attributes, function() {\n                if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                    $(target).attr(this.name, this.value);\n                }\n\n                if (traverseCss && this.name === STYLE) {\n                    $.each(origin.style, function() {\n                        target.style[this] = origin.style[this];\n                    });\n                }\n            });\n        },\n\n        style: function(node, value) {\n            $(node).css(value || {});\n        },\n\n        unstyle: function(node, value) {\n            for (var key in value) {\n                if (key == FLOAT) {\n                    key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                }\n\n                node.style[key] = \"\";\n            }\n\n            if (node.style.cssText === \"\") {\n                node.removeAttribute(STYLE);\n            }\n        },\n\n        inlineStyle: function(body, name, attributes) {\n            var span = $(Dom.create(body.ownerDocument, name, attributes)),\n                style;\n\n            body.appendChild(span[0]);\n\n            style = map(cssAttributes, function(value) {\n                if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                    return \"line-height:1.5\";\n                } else {\n                    return value + \":\" + span.css(value);\n                }\n            }).join(\";\");\n\n            span.remove();\n\n            return style;\n        },\n\n        getEffectiveBackground: function(element) {\n            var backgroundStyle = element.css(\"background-color\") || \"\";\n\n            if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n                return backgroundStyle;\n            } else if (element[0].tagName.toLowerCase() === \"html\") {\n                return \"Window\";\n            } else {\n                return Dom.getEffectiveBackground(element.parent());\n            }\n        },\n\n        innerText: function(node) {\n            var text = node.innerHTML;\n            text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n            text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n            return text;\n        },\n\n        removeClass: function(node, classNames) {\n            var className = \" \" + node.className + \" \",\n                classes = classNames.split(\" \"),\n                i, len;\n\n            for (i = 0, len = classes.length; i < len; i++) {\n                className = className.replace(\" \" + classes[i] + \" \", \" \");\n            }\n\n            className = kendo.trim(className);\n\n            if (className.length) {\n                node.className = className;\n            } else {\n                node.removeAttribute(CLASS);\n            }\n        },\n\n        commonAncestor: function() {\n            var arguments$1 = arguments;\n\n            var count = arguments.length,\n                paths = [],\n                minPathLength = Infinity,\n                output = null,\n                i, ancestors, node, first, j;\n\n            if (!count) {\n                return null;\n            }\n\n            if (count == 1) {\n                return arguments[0];\n            }\n\n            for (i = 0; i < count; i++) {\n                ancestors = [];\n                node = arguments$1[i];\n                while (node) {\n                    ancestors.push(node);\n                    node = node.parentNode;\n                }\n                paths.push(ancestors.reverse());\n                minPathLength = Math.min(minPathLength, ancestors.length);\n            }\n\n            if (count == 1) {\n                return paths[0][0];\n            }\n\n            for (i = 0; i < minPathLength; i++) {\n                first = paths[0][i];\n\n                for (j = 1; j < count; j++) {\n                    if (first != paths[j][i]) {\n                        return output;\n                    }\n                }\n\n                output = first;\n            }\n            return output;\n        },\n\n        closestSplittableParent: function(nodes) {\n            var result;\n\n            if (nodes.length == 1) {\n                result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n            } else {\n                result = Dom.commonAncestor.apply(null, nodes);\n            }\n\n            if (!result) {\n                result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n            }\n\n            if (Dom.isInline(result)) {\n                result = Dom.blockParentOrBody(result);\n            }\n\n            var editableParents = map(nodes, Dom.editableParent);\n            var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n            if ($.contains(result, editableAncestor)) {\n                result = editableAncestor;\n            }\n\n            return result;\n        },\n\n        closestEditable: function(node, types) {\n            var closest;\n            var editable = Dom.editableParent(node);\n\n            if (Dom.ofType(node, types)) {\n                closest = node;\n            } else {\n                closest = Dom.parentOfType(node, types);\n            }\n\n            if (closest && editable && $.contains(closest, editable)) {\n                closest = editable;\n            } else if (!closest && editable) {\n                closest = editable;\n            }\n\n            return closest;\n        },\n\n        closestEditableOfType: function(node, types) {\n            var editable = Dom.closestEditable(node, types);\n\n            if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n                return editable;\n            }\n        },\n\n        filter: function(tagName, nodes, invert) {\n            var filterFn = function(node) {\n                return Dom.name(node) == tagName;\n            };\n\n            return Dom.filterBy(nodes, filterFn, invert);\n        },\n\n        filterBy: function(nodes, condition, invert) {\n            var i = 0;\n            var len = nodes.length;\n            var result = [];\n            var match;\n\n            for (; i < len; i++) {\n                match = condition(nodes[i]);\n                if ((match && !invert) || (!match && invert)) {\n                    result.push(nodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        ensureTrailingBreaks: function(node) {\n            var elements = $(node).find(\"p,td,th\");\n            var length = elements.length;\n            var i = 0;\n\n            if (length) {\n                for (; i < length; i++) {\n                    Dom.ensureTrailingBreak(elements[i]);\n                }\n            } else {\n                Dom.ensureTrailingBreak(node);\n            }\n        },\n\n        removeTrailingBreak: function(node) {\n            $(node).find(\"br[type=_moz],.k-br\").remove();\n        },\n\n        ensureTrailingBreak: function(node) {\n            Dom.removeTrailingBreak(node);\n\n            var lastChild = node.lastChild;\n            var name = lastChild && Dom.name(lastChild);\n            var br;\n\n            if (!name ||\n                (name != \"br\" && name != \"img\") ||\n                (name == \"br\" && lastChild.className != \"k-br\")) {\n                br = node.ownerDocument.createElement(\"br\");\n                br.className = \"k-br\";\n                node.appendChild(br);\n            }\n        },\n\n        // Start: Table Utilities\n\n        reMapTableColumns: function(table, colAttr) {\n            Dom._mapColIndices(table, colAttr);\n        },\n\n        clearTableMappings: function(table, colAttr) {\n            $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n        },\n\n        _mapColIndices: function(table, colAttr) {\n            var registeredColumns = {};\n\n            for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n                var cells = table.rows[rowIndex].cells;\n                var colIndex = 0;\n                for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                    var cell = cells[cellIndex];\n\n                    if (cell.rowSpan > 1) {\n                        this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][colIndex]) {\n                            colIndex++;\n                        }\n                    }\n\n                    cell.setAttribute(colAttr, colIndex);\n\n                    if (cell.colSpan > 1) {\n                        colIndex = colIndex + cell.colSpan - 1;\n                    }\n                }\n            }\n        },\n\n        _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n            var rowSpan = cell.rowSpan,\n                colSpan = cell.colSpan,\n                index;\n\n            for (var ci = 0; ci < colSpan; ci++) {\n                index = colIndex + ci;\n\n                for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                    if (!registeredColumns[ri]) {\n                        registeredColumns[ri] = {};\n                        registeredColumns[ri].length = 0;\n                    }\n\n                    if (registeredColumns[rowIndex]) {\n                        while (registeredColumns[rowIndex][index]) {\n                            index++;\n                        }\n                    }\n\n                    registeredColumns[ri][index] = true;\n                    registeredColumns[ri].length++;\n                }\n            }\n\n        },\n\n        associateWithIds: function(table) {\n            var that = this;\n            var numberOfTheadRows = 0;\n            var tableRows = table.rows;\n            var numberOfTableRows = tableRows.length;\n            var theadMatrix = [];\n            var tbodyMatrix = [];\n            var theadRows, i;\n\n            if (table.tHead) {\n                theadRows = table.tHead.rows;\n                numberOfTheadRows = theadRows.length;\n            } else {\n                numberOfTheadRows = that._getNumberOfHeaderRows(table);\n                theadRows = [];\n                for (i = 0; i < numberOfTheadRows; i++) {\n                    theadRows.push(tableRows[i]);\n                }\n            }\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadMatrix.push([]);\n            }\n            for (i = 0; i < numberOfTableRows; i++) {\n                tbodyMatrix.push([]);\n            }\n\n            that._generateIdsForColumns(theadMatrix, theadRows);\n            that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n            that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        },\n\n        _generateIdsForColumns: function(theadMatrix, theadRows) {\n            var timestamp = new Date().getTime();\n            var numberOfTheadRows = theadRows ? theadRows.length : 0;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n            for (i = 0; i < numberOfTheadRows; i++) {\n                row = theadRows[i];\n                cells = row.cells;\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (theadMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            theadMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n                }\n            }\n        },\n\n        _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var timestamp = new Date().getTime();\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"th\");\n                col = 0;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    id = \"table\" + i + j + (++timestamp);\n                    cell.setAttribute(\"id\", id);\n                    colspan = cell.getAttribute(\"colspan\") || 1;\n                    rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                    while (tbodyMatrix[i][j + col]) {\n                        col += 1;\n                    }\n\n                    for (k = 0; k < rowspan; k++) {\n                        for (l = 0; l < colspan; l++) {\n                            tbodyMatrix[i + k][j + col + l] = id;\n                        }\n                    }\n\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = [];\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n            var that = this;\n            var numberOfTableRows = tableRows.length;\n            var row, cells, cell, i, j, colIndex, headers;\n\n            var pushHeaderId = function(row) {\n                headers.push(row[colIndex]);\n            };\n\n            for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n                row = tableRows[i];\n                cells = $(row.cells).filter(\"td\");\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    colIndex = cell.getAttribute(\"col-index\");\n                    headers = tbodyMatrix[i].slice();\n\n                    theadMatrix.forEach(pushHeaderId);\n                    headers = headers.filter(that._onlyUnique);\n                    cell.setAttribute(\"headers\", headers.join(\" \").trim());\n                }\n            }\n        },\n\n        _getNumberOfColumns: function(table) {\n            var cells = $(table).find(\"th, td\");\n            var numberOfCols = 0;\n            var cell, i, currentIndex;\n\n            for (i = 0; i < cells.length; i++) {\n                cell = cells[i];\n                currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                if (currentIndex > numberOfCols) {\n                    numberOfCols = currentIndex;\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n            var rows = table.rows;\n            var numberOfCols = 0;\n            var currentIndex, row, i, j, cell;\n\n            for (i = numberOfHeaderRows; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (this.is(cell, \"th\")) {\n                        currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                        if (currentIndex > numberOfCols) {\n                            numberOfCols = currentIndex;\n                        }\n                    }\n                }\n            }\n\n            return numberOfCols;\n        },\n\n        _getNumberOfHeaderRows: function(table) {\n            var rows = table.rows;\n            var thead = table.tHead;\n            var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n            var j, row, cell, length;\n\n            if (number === 0) {\n                row = rows[0];\n                length = row.cells && row.cells.length;\n\n                while (row && length && this.is(row.cells[0], \"th\")) {\n                    for (j = 0; j < length; j++) {\n                        cell = row ? row.cells[j] : null;\n\n                        if (!this.is(cell, \"th\")) {\n                            row = null;\n                        }\n                    }\n\n                    if (row) {\n                        number += 1;\n                        row = this.next(row);\n                        length = row && row.cells && row.cells.length;\n                    }\n                }\n            }\n\n            return number;\n        },\n\n        // End: Table Utilities\n\n        _onlyUnique: function(value, index, self) {\n            return self.indexOf(value) === index;\n        }\n    };\n\n    kendo.ui.editor.Dom = Dom;\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo;\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var extend = $.extend;\n\n    var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n    var quoteRe = /\"/g; //\"\n    var brRe = /<br[^>]*>/i;\n    var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n    var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n    var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n    var sizzleAttr = /^sizzle-\\d+/i;\n    var scriptAttr = /^k-script-/i;\n    var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n    var br = '<br class=\"k-br\">';\n    var bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\n    var div = document.createElement(\"div\");\n    div.innerHTML = \" <hr>\";\n    var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n    div = null;\n    var isFunction = kendo.isFunction;\n\n    var TD = \"td\";\n\n    var Serializer = {\n        toEditableHtml: function(html) {\n            return (html || \"\")\n                .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n                .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n                .replace(/<img([^>]*)>/ig, function(match) {\n                    return match.replace(onerrorRe, \"\");\n                })\n                .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n                .replace(/^<(table|blockquote)/i, br + '<$1')\n                .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n                .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n        },\n\n        _toEditableImmutables: function(body) {\n            var immutable = Editor.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        _fillEmptyElements: function(body) {\n            // fills empty elements to allow them to be focused\n            $(body).find(\"p,td\").each(function() {\n                var p = $(this);\n                if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                    var node = this;\n                    while (node.children[0] && node.children[0].nodeType != 3) {\n                        node = node.children[0];\n                    }\n\n                    if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                        if (dom.is(node, \"td\")) {\n                            node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                        }\n                        else {\n                            node.innerHTML = kendo.ui.editor.emptyElementContent;\n                        }\n                    }\n                }\n            });\n        },\n\n        _removeSystemElements: function(body) {\n            // removes persisted system elements\n            $(\".k-paste-container\", body).remove();\n        },\n\n        _resetOrderedLists: function(root) {\n            // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n            var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n            for (i = 0; i < ols.length; i++) {\n                ol = ols[i];\n                originalStart = ol.getAttribute(\"start\");\n\n                ol.setAttribute(\"start\", 1);\n\n                if (originalStart) {\n                    ol.setAttribute(\"start\", originalStart);\n                } else {\n                    ol.removeAttribute(originalStart);\n                }\n            }\n        },\n\n        _preventScriptExecution: function(root) {\n            $(root).find(\"*\").each(function() {\n                var attributes = this.attributes;\n                var attribute, i, l, name;\n                var attributesToRemove = [];\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n\n                    if (attribute.specified && /^on/i.test(name)) {\n                        this.setAttribute(\"k-script-\" + name, attribute.value);\n                        attributesToRemove.push(name);\n                    }\n                }\n\n                for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                    this.removeAttribute(attributesToRemove[i]);\n                }\n            });\n        },\n\n        htmlToDom: function(html, root, options) {\n            var browser = kendo.support.browser;\n            var msie = browser.msie;\n            var o = options || {};\n            var immutables = o.immutables;\n\n            html = Serializer.toEditableHtml(html);\n\n            if (isFunction(o.custom)) {\n                html = o.custom(html) || html;\n            }\n            root.innerHTML = html;\n\n            if (immutables) {\n                immutables.deserialize(root);\n            }\n\n            if (msie) {\n                // unicode characters denormalize the DOM tree in IE9\n                dom.normalize(root);\n\n                Serializer._resetOrderedLists(root);\n            }\n\n            Serializer._preventScriptExecution(root);\n\n            Serializer._fillEmptyElements(root);\n\n            Serializer._removeSystemElements(root);\n\n            Serializer._toEditableImmutables(root);\n\n            // add k-table class to all tables\n            $(\"table\", root).addClass(\"k-table\");\n\n            return root;\n        },\n\n        domToXhtml: function(root, options) {\n            var result = [];\n            var immutables = options && options.immutables;\n\n            function semanticFilter(attributes) {\n                return $.grep(attributes, function(attr) {\n                    return attr.name != \"style\";\n                });\n            }\n\n            function mapStart(node, tag) {\n                result.push('<' + tag);\n                attr(node);\n                result.push('>');\n            }\n\n            var tagMap = {\n                iframe: {\n                    start: function(node) { mapStart(node, \"iframe\"); },\n                    end: function() { result.push('</iframe>'); }\n                },\n                'k:script': {\n                    start: function(node) { mapStart(node, \"script\"); },\n                    end: function() { result.push('</script>'); },\n                    skipEncoding: true\n                },\n                span: {\n                    canOptimize: true,\n                    semantic: true,\n                    start: function(node) {\n                        var style = node.style;\n\n                        var attributes = specifiedAttributes(node);\n                        var semanticAttributes = semanticFilter(attributes);\n\n                        if (semanticAttributes.length) {\n                            result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"<u>\");\n                        }\n\n                        var font = [];\n                        if (style.color) {\n                            font.push('color=\"' + dom.toHex(style.color) + '\"');\n                        }\n\n                        if (style.fontFamily) {\n                            font.push('face=\"' + style.fontFamily + '\"');\n                        }\n\n                        if (style.fontSize) {\n                            var size = $.inArray(style.fontSize, fontSizeMappings);\n                            font.push('size=\"' + size + '\"');\n                        }\n\n                        // Apply the rest of the inline styles back\n                        var inlineStyles = [];\n                        var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                        for (var i = 0; i < style.length; i++) {\n                            var inlineStyle = style[i];\n\n                            if (ignoredStylePrefixes.filter(function (prop) { return inlineStyle.startsWith(prop); }).length <= 0) {\n                                inlineStyles.push((inlineStyle + \": \" + (style[inlineStyle])));\n                            }\n                        }\n\n                        if (inlineStyles.length) {\n                            font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                        }\n\n                        if (font.length) {\n                            result.push(\"<font \" + font.join(\" \") + \">\");\n                        }\n                    },\n                    end: function(node) {\n                        var style = node.style;\n\n                        if (style.color || style.fontFamily || style.fontSize) {\n                            result.push(\"</font>\");\n                        }\n\n                        if (style.textDecoration == \"underline\") {\n                            result.push(\"</u>\");\n                        }\n\n                        if (semanticFilter(specifiedAttributes(node)).length) {\n                            result.push(\"</span>\");\n                        }\n                    }\n                },\n                strong: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"b\"); },\n                    end: function() { result.push('</b>'); }\n                },\n                em: {\n                    semantic: true,\n                    start: function(node) { mapStart(node, \"i\"); },\n                    end: function() { result.push('</i>'); }\n                },\n                b: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"strong\"); },\n                    end: function() { result.push('</strong>'); }\n                },\n                i: {\n                    semantic: false,\n                    start: function(node) { mapStart(node, \"em\"); },\n                    end: function() { result.push('</em>'); }\n                },\n                u: {\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span');\n\n                        var attributes = specifiedAttributes(node);\n                        var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                        var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                        if (style) {\n                            styleObj.value = style.value;\n                            if (!/text-decoration/i.test(styleObj.value)) {\n                                styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                            }\n                            attributes.splice($.inArray(style, attributes), 1);\n                        }\n                        attributes.push(styleObj);\n\n                        attr(node, attributes);\n                        result.push('>');\n                    },\n                    end: function() { result.push('</span>'); }\n                },\n                font: {\n                    canOptimize: true,\n                    semantic: false,\n                    start: function(node) {\n                        result.push('<span style=\"');\n\n                        var color = node.getAttribute('color');\n                        var size = fontSizeMappings[node.getAttribute('size')];\n                        var face = node.getAttribute('face');\n\n                        if (color) {\n                            result.push('color:');\n                            result.push(dom.toHex(color));\n                            result.push(';');\n                        }\n\n                        if (face) {\n                            result.push('font-family:');\n                            result.push(face);\n                            result.push(';');\n                        }\n\n                        if (size) {\n                            result.push('font-size:');\n                            result.push(size);\n                            result.push(';');\n                        }\n\n                        result.push('\">');\n                    },\n                    end: function() {\n                        result.push('</span>');\n                    }\n                }\n            };\n\n            tagMap.script = tagMap[\"k:script\"];\n\n            options = options || {};\n\n            if (typeof options.semantic == \"undefined\") {\n                options.semantic = true;\n            }\n\n            function cssProperties(cssText) {\n                var trim = kendo.trim;\n                var css = trim(cssText);\n                var match;\n                var property, value;\n                var properties = [];\n\n                cssDeclaration.lastIndex = 0;\n\n                while (true) {\n                    match = cssDeclaration.exec(css);\n\n                    if (!match) {\n                        break;\n                    }\n\n                    property = trim(match[1].toLowerCase());\n                    value = trim(match[2]);\n\n                    if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                        continue;\n                    }\n\n                    if (property.indexOf('color') >= 0) {\n                        value = dom.toHex(value);\n                    } else if (property.indexOf('font') >= 0) {\n                        value = value.replace(quoteRe, \"'\");\n                    } else if (/\\burl\\(/g.test(value)) {\n                        value = value.replace(quoteRe, \"\");\n                    }\n\n                    properties.push({ property: property, value: value });\n                }\n\n                return properties;\n            }\n\n            function styleAttr(cssText) {\n                var properties = cssProperties(cssText);\n                var i;\n\n                for (i = 0; i < properties.length; i++) {\n                    result.push(properties[i].property);\n                    result.push(':');\n                    result.push(properties[i].value);\n                    result.push(';');\n                }\n            }\n\n            function specifiedAttributes(node) {\n                var result = [];\n                var attributes = node.attributes;\n                var attribute, i, l;\n                var name, value, specified;\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n\n                    name = attribute.nodeName;\n                    value = attribute.value;\n                    specified = attribute.specified;\n\n                    // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                    if (name == 'value' && 'value' in node && node.value) {\n                        specified = true;\n                    } else if (name == 'type' && value == 'text') {\n                        specified = true;\n                    } else if (name == \"class\" && !value) {\n                        specified = false;\n                    } else if (sizzleAttr.test(name)) {\n                        specified = false;\n                    } else if (name == 'complete') {\n                        specified = false;\n                    } else if (name == 'altHtml') {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ul\")) {\n                        specified = false;\n                    } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                        specified = false;\n                    } else if (name.indexOf('_moz') >= 0) {\n                        specified = false;\n                    } else if (scriptAttr.test(name)) {\n                        specified = !!options.scripts;\n                    } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                        specified = false;\n                    }\n\n                    if (specified) {\n                        result.push(attribute);\n                    }\n                }\n\n                return result;\n            }\n\n            function attr(node, attributes) {\n                var i, l, attribute, name, value;\n\n                attributes = attributes || specifiedAttributes(node);\n\n                if (dom.is(node, 'img')) {\n                    var width = node.style.width,\n                        height = node.style.height,\n                        $node = $(node);\n\n                    if (width && pixelRe.test(width)) {\n                        $node.attr('width', parseInt(width, 10));\n                        dom.unstyle(node, { width: undefined$1 });\n                    }\n\n                    if (height && pixelRe.test(height)) {\n                        $node.attr('height', parseInt(height, 10));\n                        dom.unstyle(node, { height: undefined$1 });\n                    }\n                }\n\n                if (!attributes.length) {\n                    return;\n                }\n\n                // Remove the following if everything seems to be in order.\n                // https://github.com/telerik/kendo-ui-core/issues/3639\n                // attributes.sort(function (a, b) {\n                //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                // });\n\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    value = attribute.value;\n\n                    if (name == \"class\" && value == \"k-table\") {\n                        continue;\n                    }\n\n                    name = name.replace(scriptAttr, \"\");\n\n                    result.push(' ');\n                    result.push(name);\n                    result.push('=\"');\n\n                    if (name == 'style') {\n                        styleAttr(value || node.style.cssText);\n                    } else if (name == 'src' || name == 'href') {\n                        result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                    } else {\n                        result.push(dom.fillAttrs[name] ? name : value);\n                    }\n\n                    result.push('\"');\n                }\n            }\n\n            function children(node, skip, skipEncoding) {\n                for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                    child(childNode, skip, skipEncoding);\n                }\n            }\n\n            function text(node) {\n                return node.nodeValue.replace(/\\ufeff/g, \"\");\n            }\n\n            function isEmptyBomNode(node) {\n                if (dom.isBom(node)) {\n                    do {\n                        node = node.parentNode;\n\n                        if (dom.is(node, TD) && node.childNodes.length === 1) {\n                            return true;\n                        }\n\n                        if (node.childNodes.length !== 1) {\n                            return false;\n                        }\n                    } while (!dom.isBlock(node));\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            function child(node, skip, skipEncoding) {\n                var nodeType = node.nodeType,\n                    tagName, mapper,\n                    parent, value, previous, jqNode;\n\n                if (immutables && Editor.Immutables.immutable(node)) {\n                    result.push(immutables.serialize(node));\n                } else if (nodeType == 1) {\n                    tagName = dom.name(node);\n                    jqNode = $(node);\n\n                    if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                        return;\n                    }\n\n                    if (!tagName || dom.insignificant(node)) {\n                        return;\n                    }\n\n                    if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                        return;\n                    }\n\n                    mapper = tagMap[tagName];\n\n                    if (mapper) {\n                        if (mapper.canOptimize &&\n                            options.optimizeTags &&\n                            shouldOptimize(node)) {\n                                children(node, false, mapper.skipEncoding);\n                            return;\n                        }\n\n                        if (typeof mapper.semantic == \"undefined\" ||\n                            (options.semantic ^ mapper.semantic)) {\n                            mapper.start(node);\n                            children(node, false, mapper.skipEncoding);\n                            mapper.end(node);\n                            return;\n                        }\n                    }\n\n                    result.push('<');\n                    result.push(tagName);\n\n                    attr(node);\n\n                    if (dom.empty[tagName]) {\n                        result.push(' />');\n                    } else {\n                        result.push('>');\n                        children(node, skip || dom.is(node, 'pre'));\n                        result.push('</');\n                        result.push(tagName);\n                        result.push('>');\n                    }\n                } else if (nodeType == 3) {\n                    if (isEmptyBomNode(node)) {\n                        result.push('&nbsp;');\n                        return;\n                    }\n\n                    value = text(node);\n\n                    if (!skip && supportsLeadingWhitespace) {\n                        parent = node.parentNode;\n                        previous = node.previousSibling;\n\n                        if (!previous) {\n                             previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                        }\n\n                        if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                            if (options.keepEOL) {\n                                value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                            } else {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                        }\n\n                        value = value.replace(/ +/, ' ');\n                    }\n\n                    result.push(skipEncoding ? value : dom.encode(value, options));\n\n                } else if (nodeType == 4) {\n                    result.push('<![CDATA[');\n                    result.push(node.data);\n                    result.push(']]>');\n                } else if (nodeType == 8) {\n                    if (node.data.indexOf('[CDATA[') < 0) {\n                        result.push('<!--');\n                        result.push(node.data);\n                        result.push('-->');\n                    } else {\n                        result.push('<!');\n                        result.push(node.data);\n                        result.push('>');\n                    }\n                }\n            }\n\n            function shouldOptimize(node) {\n                return node.attributes.length === 0;\n            }\n\n            function textOnly(root) {\n                var childrenCount = root.childNodes.length;\n                var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n                return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n            }\n\n            function runCustom() {\n                if (kendo.isFunction(options.custom)) {\n                    result = options.custom(result) || result;\n                }\n            }\n\n            if (textOnly(root)) {\n                result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                runCustom();\n\n                return result;\n            }\n\n            children(root);\n            result = result.join('');\n            runCustom();\n\n            // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n            if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n                return \"\";\n            }\n\n            return result;\n        }\n\n    };\n\n    extend(Editor, {\n        Serializer: Serializer\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            extend = $.extend,\n            Editor = kendo.ui.editor,\n            browser = kendo.support.browser,\n            dom = Editor.Dom,\n            findNodeIndex = dom.findNodeIndex,\n            isDataNode = dom.isDataNode,\n            findClosestAncestor = dom.findClosestAncestor,\n            getNodeLength = dom.getNodeLength,\n            normalize = dom.normalize;\n\n    var SelectionUtils = {\n        selectionFromWindow: function(window) {\n            if (!window) {\n                return;\n            }\n\n            if (!(\"getSelection\" in window)) {\n                return new W3CSelection(window.document);\n            }\n\n            return window.getSelection();\n        },\n\n        selectionFromRange: function(range) {\n            var rangeDocument = RangeUtils.documentFromRange(range);\n            return SelectionUtils.selectionFromDocument(rangeDocument);\n        },\n\n        selectionFromDocument: function(document) {\n            return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n        }\n    };\n\n    var W3CRange = Class.extend({\n        init: function(doc) {\n            $.extend(this, {\n                ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n                startContainer: doc,\n                endContainer: doc,\n                commonAncestorContainer: doc,\n                startOffset: 0,\n                endOffset: 0,\n                collapsed: true\n            });\n        },\n\n        // Positioning Methods\n        setStart: function(node, offset) {\n            this.startContainer = node;\n            this.startOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, true);\n        },\n\n        setEnd: function(node, offset) {\n            this.endContainer = node;\n            this.endOffset = offset;\n            updateRangeProperties(this);\n            fixIvalidRange(this, false);\n        },\n\n        setStartBefore: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node));\n        },\n\n        setStartAfter: function(node) {\n            this.setStart(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        setEndBefore: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node));\n        },\n\n        setEndAfter: function(node) {\n            this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n        },\n\n        selectNode: function(node) {\n            this.setStartBefore(node);\n            this.setEndAfter(node);\n        },\n\n        selectNodeContents: function(node) {\n            this.setStart(node, 0);\n            this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n        },\n\n        collapse: function(toStart) {\n            var that = this;\n\n            if (toStart) {\n                that.setEnd(that.startContainer, that.startOffset);\n            } else {\n                that.setStart(that.endContainer, that.endOffset);\n            }\n        },\n\n        // Editing Methods\n\n        deleteContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            (function deleteSubtree(iterator) {\n                while (iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        deleteSubtree(iterator.getSubtreeIterator());\n                    } else {\n                        iterator.remove();\n                    }\n                }\n            })(new RangeIterator(range));\n        },\n\n        cloneContents: function() {\n            // clone subtree\n            var document = RangeUtils.documentFromRange(this);\n            return (function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n\n                        frag.appendChild(node);\n                    }\n\n                    return frag;\n            })(new RangeIterator(this));\n        },\n\n        extractContents: function() {\n            var that = this,\n                range = that.cloneRange();\n\n            if (that.startContainer != that.commonAncestorContainer) {\n                that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n            }\n\n            that.collapse(true);\n\n            var document = RangeUtils.documentFromRange(that);\n\n            return (function extractSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    if (iterator.hasPartialSubtree()) {\n                        node = node.cloneNode(false);\n                        node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                    } else {\n                        iterator.remove(that.originalRange);\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n            })(new RangeIterator(range));\n        },\n\n        insertNode: function(node) {\n            var that = this;\n\n            if (isDataNode(that.startContainer)) {\n                if (that.startOffset != that.startContainer.nodeValue.length) {\n                    dom.splitDataNode(that.startContainer, that.startOffset);\n                }\n\n                dom.insertAfter(node, that.startContainer);\n            } else {\n                dom.insertAt(that.startContainer, node, that.startOffset);\n            }\n\n            that.setStart(that.startContainer, that.startOffset);\n        },\n\n        cloneRange: function() {\n            // fast copy\n            return $.extend(new W3CRange(this.ownerDocument), {\n                startContainer: this.startContainer,\n                endContainer: this.endContainer,\n                commonAncestorContainer: this.commonAncestorContainer,\n                startOffset: this.startOffset,\n                endOffset: this.endOffset,\n                collapsed: this.collapsed,\n\n                originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n            });\n        },\n\n        // used for debug purposes\n        toString: function() {\n            var startNodeName = this.startContainer.nodeName,\n                endNodeName = this.endContainer.nodeName;\n\n            return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                    endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n        }\n    });\n\n    W3CRange.fromNode = function(node) {\n        return new W3CRange(node.ownerDocument);\n    };\n\n    /* can be used in Range.compareBoundaryPoints if we need it one day */\n    function compareBoundaries(start, end, startOffset, endOffset) {\n        if (start == end) {\n            return endOffset - startOffset;\n        }\n\n        // end is child of start\n        var container = end;\n        while (container && container.parentNode != start) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return findNodeIndex(container) - startOffset;\n        }\n\n        // start is child of end\n        container = start;\n        while (container && container.parentNode != end) {\n            container = container.parentNode;\n        }\n\n        if (container) {\n            return endOffset - findNodeIndex(container) - 1;\n        }\n\n        // deep traversal\n        var root = dom.commonAncestor(start, end);\n        var startAncestor = start;\n\n        while (startAncestor && startAncestor.parentNode != root) {\n            startAncestor = startAncestor.parentNode;\n        }\n\n        if (!startAncestor) {\n            startAncestor = root;\n        }\n\n        var endAncestor = end;\n        while (endAncestor && endAncestor.parentNode != root) {\n            endAncestor = endAncestor.parentNode;\n        }\n\n        if (!endAncestor) {\n            endAncestor = root;\n        }\n\n        if (startAncestor == endAncestor) {\n            return 0;\n        }\n\n        return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n    }\n\n    function fixIvalidRange(range, toStart) {\n        function isInvalidRange(range) {\n            try {\n                return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n            } catch (ex) {\n                // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n                return true;\n            }\n        }\n\n        if (isInvalidRange(range)) {\n            if (toStart) {\n                range.commonAncestorContainer = range.endContainer = range.startContainer;\n                range.endOffset = range.startOffset;\n            } else {\n                range.commonAncestorContainer = range.startContainer = range.endContainer;\n                range.startOffset = range.endOffset;\n            }\n\n            range.collapsed = true;\n        }\n    }\n\n    function updateRangeProperties(range) {\n        range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n        var node = range.startContainer;\n        while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n            node = node.parentNode;\n        }\n\n        range.commonAncestorContainer = node;\n    }\n\n    var RangeIterator = Class.extend({\n        init: function(range) {\n            $.extend(this, {\n                range: range,\n                _current: null,\n                _next: null,\n                _end: null\n            });\n\n            if (range.collapsed) {\n                return;\n            }\n\n            var root = range.commonAncestorContainer;\n\n            this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n            range.startContainer.childNodes[range.startOffset] :\n            findClosestAncestor(root, range.startContainer);\n\n            this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n            range.endContainer.childNodes[range.endOffset] :\n            findClosestAncestor(root, range.endContainer).nextSibling;\n        },\n\n        hasNext: function() {\n            return !!this._next;\n        },\n\n        next: function() {\n            var that = this,\n                current = that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ?\n            that._current.nextSibling : null;\n\n            if (isDataNode(that._current)) {\n                if (that.range.endContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                }\n\n                if (that.range.startContainer == that._current) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, that.range.startOffset);\n                }\n            }\n\n            return current;\n        },\n\n        traverse: function(callback) {\n            var that = this,\n                current;\n\n            function next() {\n                that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                return that._current;\n            }\n\n            while (current = next()) {\n                if (that.hasPartialSubtree()) {\n                    that.getSubtreeIterator().traverse(callback);\n                } else {\n                    callback(current);\n                }\n            }\n\n            return current;\n        },\n\n        remove: function(originalRange) {\n            var that = this,\n                inStartContainer = that.range.startContainer == that._current,\n                inEndContainer = that.range.endContainer == that._current,\n                start, end, delta;\n\n            if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                start = inStartContainer ? that.range.startOffset : 0;\n                end = inEndContainer ? that.range.endOffset : that._current.length;\n                delta = end - start;\n\n                if (originalRange && (inStartContainer || inEndContainer)) {\n                    if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                        originalRange.startOffset -= delta;\n                    }\n\n                    if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                        originalRange.endOffset -= delta;\n                    }\n                }\n\n                that._current.deleteData(start, delta);\n            } else {\n                var parent = that._current.parentNode;\n\n                if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                    var nodeIndex = findNodeIndex(that._current);\n\n                    if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                        originalRange.startOffset -= 1;\n                    }\n\n                    if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                        originalRange.endOffset -= 1;\n                    }\n                }\n\n                dom.remove(that._current);\n            }\n        },\n\n        hasPartialSubtree: function() {\n            return !isDataNode(this._current) &&\n            (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n                dom.isAncestorOrSelf(this._current, this.range.endContainer));\n        },\n\n        getSubtreeIterator: function() {\n            return new RangeIterator(this.getSubRange());\n        },\n\n        getSubRange: function() {\n            var that = this,\n                subRange = that.range.cloneRange();\n            subRange.selectNodeContents(that._current);\n            if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                subRange.setStart(that.range.startContainer, that.range.startOffset);\n            }\n            if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                subRange.setEnd(that.range.endContainer, that.range.endOffset);\n            }\n\n            return subRange;\n        }\n    });\n\n    var W3CSelection = Class.extend({\n        init: function(doc) {\n            this.ownerDocument = doc;\n            this.rangeCount = 1;\n        },\n\n        addRange: function(range) {\n            var textRange = this.ownerDocument.body.createTextRange();\n\n            // end container should be adopted first in order to prevent selection with negative length\n            adoptContainer(textRange, range, false);\n            adoptContainer(textRange, range, true);\n\n            textRange.select();\n        },\n\n        removeAllRanges: function() {\n            var selection = this.ownerDocument.selection;\n\n            if (selection.type != \"None\") {\n                selection.empty();\n            }\n        },\n\n        getRangeAt: function() {\n            var textRange,\n                range = new W3CRange(this.ownerDocument),\n                selection = this.ownerDocument.selection,\n                element, commonAncestor;\n\n            try {\n                textRange = selection.createRange();\n                element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                if (element.ownerDocument != this.ownerDocument) {\n                    return range;\n                }\n            } catch (ex) {\n                return range;\n            }\n\n            if (selection.type == \"Control\") {\n                range.selectNode(textRange.item(0));\n            } else {\n                commonAncestor = textRangeContainer(textRange);\n                adoptEndPoint(textRange, range, commonAncestor, true);\n                adoptEndPoint(textRange, range, commonAncestor, false);\n\n                if (range.startContainer.nodeType == 9) {\n                    range.setStart(range.endContainer, range.startOffset);\n                }\n\n                if (range.endContainer.nodeType == 9) {\n                    range.setEnd(range.startContainer, range.endOffset);\n                }\n\n                if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                    range.collapse(false);\n                }\n\n                var startContainer = range.startContainer,\n                    endContainer = range.endContainer,\n                    body = this.ownerDocument.body;\n\n                if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                    !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                    var movedStart = false,\n                        movedEnd = false;\n\n                    while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                        startContainer = startContainer.parentNode;\n                        movedStart = true;\n                    }\n\n                    while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                        endContainer = endContainer.parentNode;\n                        movedEnd = true;\n                    }\n\n                    if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                        range.setStart(startContainer, 0);\n                        range.setEnd(endContainer, getNodeLength(body));\n                    }\n                }\n            }\n\n            return range;\n        }\n    });\n\n    function textRangeContainer(textRange) {\n        var left = textRange.duplicate(),\n            right = textRange.duplicate();\n\n        left.collapse(true);\n        right.collapse(false);\n\n        return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n    }\n\n    function adoptContainer(textRange, range, start) {\n        // find anchor node and offset\n        var container = range[start ? \"startContainer\" : \"endContainer\"],\n            offset = range[start ? \"startOffset\" : \"endOffset\"],\n            textOffset = 0,\n            isData = isDataNode(container),\n            anchorNode = isData ? container : container.childNodes[offset] || null,\n            anchorParent = isData ? container.parentNode : container,\n            doc = range.ownerDocument,\n            cursor = doc.body.createTextRange(),\n            cursorNode;\n\n        // visible data nodes need a text offset\n        if (container.nodeType == 3 || container.nodeType == 4) {\n            textOffset = offset;\n        }\n\n        if (!anchorParent) {\n            anchorParent = doc.body;\n        }\n\n        if (anchorParent.nodeName.toLowerCase() == \"img\") {\n            cursor.moveToElementText(anchorParent);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        } else {\n            // create a cursor element node to position range (since we can't select text nodes)\n            cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n            cursor.moveToElementText(cursorNode);\n            dom.remove(cursorNode);\n            cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n            cursor.collapse(false);\n            textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n        }\n    }\n\n    function adoptEndPoint(textRange, range, commonAncestor, start) {\n        var cursorNode = dom.create(range.ownerDocument, \"a\"),\n            cursor = textRange.duplicate(),\n            comparison = start ? \"StartToStart\" : \"StartToEnd\",\n            result, parent, target,\n            previous, next,\n            args, index,\n            appended = false;\n\n        cursorNode.innerHTML = \"\\ufeff\";\n        cursor.collapse(start);\n\n        parent = cursor.parentElement();\n\n        if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n            parent = commonAncestor;\n        }\n\n        // detect range end points\n        // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n        do {\n            if (appended) {\n                parent.insertBefore(cursorNode, cursorNode.previousSibling);\n            } else {\n                parent.appendChild(cursorNode);\n                appended = true;\n            }\n            cursor.moveToElementText(cursorNode);\n        } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n        target = cursorNode.nextSibling;\n\n        if (result == -1 && isDataNode(target)) {\n            cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n            dom.remove(cursorNode);\n\n            args = [target, cursor.text.length];\n        } else {\n            previous = !start && cursorNode.previousSibling;\n            next = start && cursorNode.nextSibling;\n\n            if (isDataNode(next)) {\n                args = [next, 0];\n            } else if (isDataNode(previous)) {\n                args = [previous, previous.length];\n            } else {\n                index = findNodeIndex(cursorNode);\n\n                if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                    args = [parent.nextSibling, 0];\n                } else {\n                    args = [parent, index];\n                }\n            }\n\n            dom.remove(cursorNode);\n        }\n\n        range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n    }\n\n    var RangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n\n                function visit(node) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n\n                new RangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var ImmutablesRangeIterator = RangeIterator.extend({\n        hasPartialSubtree: function() {\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n        },\n\n        getSubtreeIterator: function() {\n            return new ImmutablesRangeIterator(this.getSubRange());\n        }\n    });\n\n    var ImmutablesRangeEnumerator = Class.extend({\n        init: function(range) {\n            this.enumerate = function() {\n                var nodes = [];\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                function visit(node) {\n                    if (immutable && !immutable(node)) {\n                        if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                }\n\n                new ImmutablesRangeIterator(range).traverse(visit);\n\n                return nodes;\n            };\n        }\n    });\n\n    var RestorePoint = Class.extend({\n        init: function(range, body, options) {\n            var that = this;\n            that.range = range;\n            that.rootNode = RangeUtils.documentFromRange(range);\n            that.body = body || that.getEditable(range);\n            if (dom.name(that.body) != \"body\") {\n                that.rootNode = that.body;\n            }\n\n            that.startContainer = that.nodeToPath(range.startContainer);\n            that.endContainer = that.nodeToPath(range.endContainer);\n            that.startOffset = that.offset(range.startContainer, range.startOffset);\n            that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n            that.immutables = options && options.immutables;\n\n            if (that.immutables) {\n                that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n            }\n\n            that.html = that.body.innerHTML;\n\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        index: function(node) {\n            var result = 0,\n                lastType = node.nodeType;\n\n            while (node = node.previousSibling) {\n                var nodeType = node.nodeType;\n\n                if (nodeType != 3 || lastType != nodeType) {\n                    result ++;\n                }\n\n                lastType = nodeType;\n            }\n\n            return result;\n        },\n\n        getEditable: function(range) {\n            var root = range.commonAncestorContainer;\n\n            while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n                root = root.parentNode;\n            }\n\n            return root;\n        },\n\n        restoreHtml: function() {\n            var that = this;\n\n            dom.removeChildren(that.body);\n            that.body.innerHTML = that.html;\n            if (that.immutables && !that.serializedImmutables.empty) {\n                Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n            }\n        },\n\n        offset: function(node, value) {\n            if (node.nodeType == 3) {\n                while ((node = node.previousSibling) && node.nodeType == 3) {\n                    value += node.nodeValue.length;\n                }\n            }\n\n            return value;\n        },\n\n        nodeToPath: function(node) {\n            var path = [];\n\n            while (node != this.rootNode) {\n                path.push(this.index(node));\n                node = node.parentNode;\n            }\n\n            return path;\n        },\n\n        toRangePoint: function(range, start, path, denormalizedOffset) {\n            var node = this.rootNode,\n                length = path.length,\n                offset = denormalizedOffset;\n\n            while (length-- && node) {\n                node = node.childNodes[path[length]];\n            }\n\n            while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                offset -= node.nodeValue.length;\n                node = node.nextSibling;\n            }\n\n            if (node && offset >= 0) {\n                range[start ? 'setStart' : 'setEnd'](node, offset);\n            }\n        },\n\n        toRange: function() {\n            var that = this,\n                result = that.range.cloneRange();\n\n            that.toRangePoint(result, true, that.startContainer, that.startOffset);\n            that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n            return result;\n        }\n\n    });\n\n    var Marker = Class.extend({\n        init: function() {\n            this.caret = null;\n        },\n\n        addCaret: function(range) {\n            var that = this;\n            var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n            range.insertNode(caret);\n\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n\n            range.selectNode(caret);\n            return caret;\n        },\n\n        removeCaret: function(range) {\n            var that = this,\n                previous = that.caret.previousSibling,\n                startOffset = 0;\n\n            if (previous) {\n                startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n            }\n\n            var container = that.caret.parentNode;\n            var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n            dom.remove(that.caret);\n            normalize(container);\n\n            var node = container.childNodes[containerIndex];\n\n            if (isDataNode(node)) {\n                range.setStart(node, startOffset);\n            } else if (node) {\n                var textNode = dom.lastTextNode(node);\n                if (textNode) {\n                    range.setStart(textNode, textNode.nodeValue.length);\n                } else {\n                    range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                }\n            } else {\n                if (!browser.msie && !container.innerHTML) {\n                    container.innerHTML = '<br _moz_dirty=\"\" />';\n                }\n\n                range.selectNodeContents(container);\n            }\n            range.collapse(true);\n        },\n\n        add: function(range, expand) {\n            var that = this;\n\n            var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (expand && range.collapsed) {\n                that.addCaret(range);\n                range = RangeUtils.expand(range);\n            }\n\n            var rangeBoundary = range.cloneRange();\n\n            rangeBoundary.collapse(false);\n            that.end = dom.create(doc, 'span', { className: 'k-marker' });\n            rangeBoundary.insertNode(that.end);\n\n            rangeBoundary = range.cloneRange();\n            rangeBoundary.collapse(true);\n            that.start = that.end.cloneNode(true);\n            rangeBoundary.insertNode(that.start);\n\n            that._removeDeadMarkers(that.start, that.end);\n\n            if (collapsed) {\n                var bom = doc.createTextNode(\"\\ufeff\");\n                dom.insertAfter(bom.cloneNode(), that.start);\n                dom.insertBefore(bom, that.end);\n            }\n\n            normalize(range.commonAncestorContainer);\n\n            range.setStartBefore(that.start);\n            range.setEndAfter(that.end);\n\n            return range;\n        },\n\n        _removeDeadMarkers: function(start, end) {\n            if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(start.previousSibling);\n            }\n\n            if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n                dom.remove(end.nextSibling);\n            }\n        },\n\n        _normalizedIndex: function(node) {\n            var index = findNodeIndex(node);\n            var pointer = node;\n\n            while (pointer.previousSibling) {\n                if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                    index--;\n                }\n\n                pointer = pointer.previousSibling;\n            }\n\n            return index;\n        },\n\n        remove: function(range) {\n            var that = this,\n                start = that.start,\n                end = that.end,\n                shouldNormalizeStart,\n                shouldNormalizeEnd,\n                shouldNormalize;\n\n            normalize(range.commonAncestorContainer);\n\n            while (!start.nextSibling && start.parentNode) {\n                start = start.parentNode;\n            }\n\n            while (!end.previousSibling && end.parentNode) {\n                end = end.parentNode;\n            }\n\n            // merely accessing the siblings will solve range issues in IE\n            shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                                   (start.nextSibling && start.nextSibling.nodeType == 3);\n\n            shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                                 (end.nextSibling && end.nextSibling.nodeType == 3);\n\n            shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n            start = start.nextSibling;\n            end = end.previousSibling;\n\n            var isBomSelected = start === end && dom.isBom(start);\n            if (isBomSelected && start.length > 1) {\n                start.nodeValue = start.nodeValue.charAt(0);\n            }\n\n            var collapsed = isBomSelected;\n            var collapsedToStart = false;\n            // collapsed range\n            if (start == that.end) {\n                collapsedToStart = !!that.start.previousSibling;\n                start = end = that.start.previousSibling || that.end.nextSibling;\n                collapsed = true;\n            }\n\n            dom.remove(that.start);\n            dom.remove(that.end);\n\n            if (!start || !end) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                range.collapse(true);\n                return;\n            }\n\n            var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n            var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n            if (start.nodeType == 3) {\n                while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                    start = start.previousSibling;\n                    startOffset += start.nodeValue.length;\n                }\n            }\n\n            if (end.nodeType == 3) {\n                while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                    end = end.previousSibling;\n                    endOffset += end.nodeValue.length;\n                }\n            }\n\n            var startParent = start.parentNode;\n            var endParent = end.parentNode;\n            var startIndex = this._normalizedIndex(start);\n            var endIndex = this._normalizedIndex(end);\n\n            normalize(startParent);\n            if (start.nodeType == 3) {\n                start = startParent.childNodes[startIndex];\n            }\n\n            normalize(endParent);\n            if (end.nodeType == 3) {\n                end = endParent.childNodes[endIndex];\n            }\n\n            if (collapsed) {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                }\n\n                range.collapse(true);\n\n            } else {\n                if (start.nodeType == 3) {\n                    range.setStart(start, startOffset);\n                } else {\n                    range.setStartBefore(start);\n                }\n\n                if (end.nodeType == 3) {\n                    range.setEnd(end, endOffset);\n                } else {\n                    range.setEndAfter(end);\n                }\n            }\n\n            if (that.caret) {\n                that.removeCaret(range);\n            }\n        }\n    });\n\n    var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\n    var RangeUtils = {\n        nodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n            return nodes;\n        },\n\n        textNodes: function(range) {\n            var allNodes = new RangeEnumerator(range).enumerate(),\n                result = allNodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n\n            return result;\n        },\n\n        editableTextNodes: function(range) {\n            var nodes = [],\n                immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n                result = [];\n\n            if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                result = nodes.filter(function(node) {\n                    return dom.allowsTextContent(node.parentElement);\n                });\n            }\n\n            return result;\n        },\n\n        documentFromRange: function(range) {\n            var startContainer = range.startContainer;\n            return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n        },\n\n        createRange: function(document) {\n            return document.createRange();\n        },\n\n        selectRange: function(range) {\n            var image = RangeUtils.image(range);\n            if (image) {\n                range.setStartAfter(image);\n                range.setEndAfter(image);\n            }\n            var selection = SelectionUtils.selectionFromRange(range);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        },\n\n        stringify: function(range) {\n            return kendo.format(\n                \"{0}:{1} - {2}:{3}\",\n                dom.name(range.startContainer), range.startOffset,\n                dom.name(range.endContainer), range.endOffset\n            );\n        },\n\n        split: function(range, node, trim) {\n            function partition(start) {\n                var partitionRange = range.cloneRange();\n                partitionRange.collapse(start);\n                partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                var contents = partitionRange.extractContents();\n                if (trim) {\n                    contents = dom.trim(contents);\n                }\n                dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n            }\n            partition(true);\n            partition(false);\n        },\n\n        mapAll: function(range, map) {\n            var nodes = [];\n\n            new RangeIterator(range).traverse(function(node) {\n                var mapped = map(node);\n\n                if (mapped && $.inArray(mapped, nodes) < 0) {\n                    nodes.push(mapped);\n                }\n            });\n\n            return nodes;\n        },\n\n        getAll: function(range, predicate) {\n            var selector = predicate;\n\n            if (typeof predicate == \"string\") {\n                predicate = function(node) {\n                    return dom.is(node, selector);\n                };\n            }\n\n            return RangeUtils.mapAll(range, function(node) {\n                if (predicate(node)) {\n                    return node;\n                }\n            });\n        },\n\n        getMarkers: function(range) {\n            return RangeUtils.getAll(range, function(node) {\n                return node.className == 'k-marker';\n            });\n        },\n\n        image: function(range) {\n            var nodes = RangeUtils.getAll(range, \"img\");\n\n            if (nodes.length == 1) {\n                return nodes[0];\n            }\n        },\n\n        isStartOf: function(originalRange, node) {\n            if (originalRange.startOffset !== 0) {\n                return false;\n            }\n\n            var range = originalRange.cloneRange();\n\n            while (range.startOffset === 0 && range.startContainer != node) {\n                var index = dom.findNodeIndex(range.startContainer);\n                var parent = range.startContainer.parentNode;\n\n                while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                    index--;\n                }\n\n                range.setStart(parent, index);\n            }\n\n            return range.startOffset === 0 && range.startContainer == node;\n        },\n\n        isEndOf: function(originalRange, node) {\n            var range = originalRange.cloneRange();\n\n            range.collapse(false);\n\n            var start = range.startContainer;\n\n            if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                range.collapse(true);\n            }\n\n            range.setEnd(node, dom.getNodeLength(node));\n\n            var nodes = [];\n\n            function visit(node) {\n                if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                    nodes.push(node);\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return !nodes.length;\n        },\n\n        wrapSelectedElements: function(range) {\n            var startEditable = dom.editableParent(range.startContainer);\n            var endEditable = dom.editableParent(range.endContainer);\n\n            while (range.startOffset === 0 && range.startContainer != startEditable) {\n                range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n            }\n\n            function isEnd(offset, container) {\n                var length = dom.getNodeLength(container);\n\n                if (offset == length) {\n                    return true;\n                }\n\n                for (var i = offset; i < length; i++) {\n                    if (!dom.insignificant(container.childNodes[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n            }\n\n            return range;\n        },\n\n        expand: function(range) {\n            var result = range.cloneRange();\n\n            var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n            var endContainer = result.endContainer.childNodes[result.endOffset];\n\n            if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                return result;\n            }\n\n            var beforeCaret = startContainer.nodeValue;\n            var afterCaret = endContainer.nodeValue;\n\n            if (!beforeCaret || !afterCaret) {\n                return result;\n            }\n\n            var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            var endOffset = afterCaret.search(boundary);\n\n            if (!startOffset || !endOffset) {\n                return result;\n            }\n\n            endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n            startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n            result.setStart(startContainer, startOffset);\n            result.setEnd(endContainer, endOffset);\n\n            return result;\n        },\n\n        isExpandable: function(range) {\n            var node = range.startContainer;\n            var rangeDocument = RangeUtils.documentFromRange(range);\n\n            if (node == rangeDocument || node == rangeDocument.body) {\n                return false;\n            }\n\n            var result = range.cloneRange();\n\n            var value = node.nodeValue;\n            if (!value) {\n                return false;\n            }\n\n            var beforeCaret = value.substring(0, result.startOffset);\n            var afterCaret = value.substring(result.startOffset);\n\n            var startOffset = 0, endOffset = 0;\n\n            if (beforeCaret) {\n                startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n            }\n\n            if (afterCaret) {\n                endOffset = afterCaret.search(boundary);\n            }\n\n            return startOffset && endOffset;\n        }\n    };\n\n    extend(Editor, {\n        SelectionUtils: SelectionUtils,\n        W3CRange: W3CRange,\n        RangeIterator: RangeIterator,\n        W3CSelection: W3CSelection,\n        RangeEnumerator: RangeEnumerator,\n        RestorePoint: RestorePoint,\n        Marker: Marker,\n        RangeUtils: RangeUtils\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            Editor = kendo.ui.editor,\n            dom = Editor.Dom,\n            template = kendo.template,\n            RangeUtils = Editor.RangeUtils,\n            complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n            toolsToBeUpdated = [\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"strikethrough\",\n                \"superscript\",\n                \"subscript\",\n                \"forecolor\",\n                \"backcolor\",\n                \"fontname\",\n                \"fontsize\",\n                \"createlink\",\n                \"unlink\",\n                \"autolink\",\n                \"addcolumnleft\",\n                \"addcolumnright\",\n                \"addrowabove\",\n                \"addrowbelow\",\n                \"deleterow\",\n                \"deletecolumn\",\n                \"mergecells\",\n                \"formatting\",\n                \"cleanformatting\" ],\n            IMMUTABALE = \"k-immutable\",\n            IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n            IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n        var rootCondition = function(node) {\n            return $(node).is(\"body,.k-editor\");\n        };\n\n        var immutable = function(node) {\n            return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n        };\n\n        var immutableParent = function(node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n\n        var expandImmutablesIn = function(range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n\n        var immutablesContext = function(range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        var randomId = function(length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n\n        var removeImmutables = function(root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n             $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n                serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n\n            return serializedImmutables;\n        };\n\n        var restoreImmutables = function(root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr(\"style\")) {\n                    $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n                }\n            });\n        };\n\n        var deletingKey = function(keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function(tool) {\n            var options = tool ? tool.options : undefined$1;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n\n        var Immutables = Class.extend({\n            init: function(editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n                var tools = kendo.ui.Editor.defaultTools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n\n            serialize: function(node) {\n                var result = this._toHtml(node),\n                    id;\n\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n\n            _toHtml: function(node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n\n                switch (serializationType) {\n                    case \"string\":\n                        return template(serialization)(node);\n                    case \"function\":\n                        return serialization(node);\n                    default:\n                        nodeName = dom.name(node);\n                        return \"<\" + nodeName + \"></\" + nodeName + \">\";\n                }\n            },\n\n            deserialize: function(node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n\n                that.serializedImmutables = {};\n            },\n\n            randomId: function(length) {\n                return randomId(length);\n            },\n\n            keydown: function(e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                    (!isDeleting && this._cancelTyping(e, range));\n\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n\n            _cancelTyping: function(e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n\n                return range.collapsed && !keyboard.typingInProgress &&\n                    keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n\n            _cancelDeleting: function(e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, \"li\");\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n\n            nextImmutable: function(range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n\n            _removeImmutable: function(immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n\n            _nextNode: function(node, forwards) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n\n        Editor.Immutables = Immutables;\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            extend = $.extend;\n\n    function finishUpdate(editor, startRestorePoint) {\n        var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n        var command = new GenericCommand(startRestorePoint, endRestorePoint);\n        command.editor = editor;\n\n        editor.undoRedoStack.push(command);\n        editor._refreshTools();\n\n        return endRestorePoint;\n    }\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = options;\n            this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n            this.marker = new Marker();\n            this.formatter = options.formatter;\n        },\n\n        getRange: function() {\n            return this.restorePoint.toRange();\n        },\n\n        lockRange: function(expand) {\n            return this.marker.add(this.getRange(), expand);\n        },\n\n        releaseRange: function(range) {\n            this.marker.remove(range);\n            this.editor.selectRange(range);\n        },\n\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n            this.editor.selectRange(point.toRange());\n        },\n\n        redo: function() {\n            this.exec();\n        },\n\n        createDialog: function(content, options) {\n            var editor = this.editor;\n\n            return $(content).appendTo(document.body)\n                .kendoWindow(extend({}, editor.options.dialogOptions, options))\n                .closest(\".k-window\")\n                .addClass(\"k-editor-window\")\n                .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.formatter.editor = this.editor;\n            this.formatter.toggle(range);\n            this.releaseRange(range);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        expandImmutablesIn: function(range) {\n            if (this.immutables()) {\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                this.restorePoint = new RestorePoint(range, this.editor.body);\n            }\n        },\n\n        _actionButtonsTemplate: function(ref) {\n            var messages = ref.messages;\n            var insertButtonIcon = ref.insertButtonIcon;\n            var cancelButtonIcon = ref.cancelButtonIcon;\n\n            return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-insert\\\">\" + (messages.dialogInsert) + \"</button>\"), { themeColor: \"primary\", icon: insertButtonIcon }) +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\">\" + (messages.dialogCancel) + \"</button>\"), { icon: cancelButtonIcon }) +\n        '</div>';\n        }\n    });\n\n    var GenericCommand = Class.extend({\n        init: function(startRestorePoint, endRestorePoint) {\n            this.body = startRestorePoint.body;\n            this.startRestorePoint = startRestorePoint;\n            this.endRestorePoint = endRestorePoint;\n        },\n\n        redo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.endRestorePoint.html;\n            this.editor.selectRange(this.endRestorePoint.toRange());\n        },\n\n        undo: function() {\n            dom.removeChildren(this.body);\n\n            this.body.innerHTML = this.startRestorePoint.html;\n            this.editor.selectRange(this.startRestorePoint.toRange());\n        }\n    });\n\n    extend(editorNS, {\n        _finishUpdate: finishUpdate,\n        Command: Command,\n        GenericCommand: GenericCommand\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        dom = Editor.Dom;\n\n    var ViewHtmlCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.async = true;\n        },\n\n        exec: function() {\n            var that = this,\n                editor = that.editor,\n                options = editor.options,\n                messages = editor.options.messages,\n                dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n                textarea = \".k-editor-textarea > textarea\",\n                content, comments;\n\n            options.serialization.immutables = editor.immutables;\n\n            comments = dom.getAllComments(editor.body);\n\n            content = EditorUtils.cacheComments(editor.value(), comments);\n            content = ViewHtmlCommand.indent(content);\n            content = EditorUtils.retrieveComments(content, comments);\n\n            options.serialization.immutables = undefined$1;\n\n            function apply(e) {\n                options.deserialization.immutables = editor.immutables;\n                editor.value(dialog.find(textarea).val());\n                options.deserialization.immutables = undefined$1;\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                editor.trigger(\"change\");\n            }\n\n            function close(e) {\n                e.preventDefault();\n\n                dialog.data(\"kendoWindow\").destroy();\n\n                if (editor.immutables) {\n                    editor.immutables.serializedImmutables = {};\n                }\n\n                editor.focus();\n            }\n\n            var window = this.createDialog(dialog, {\n                title: messages.viewHtml,\n                _footerTemplate: ViewHtmlCommand._footerTemplate,\n                _footerMessages: messages,\n                width: 600,\n                height: 400,\n                resizable: true,\n                close: close,\n                visible: false\n            })\n                .find(textarea).val(content).end()\n                .data(\"kendoWindow\");\n\n                window.center().open();\n\n                window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n                window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n            dialog.find(textarea).trigger(\"focus\");\n        }\n    });\n\n    extend(ViewHtmlCommand, {\n        template: function () { return '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n            '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n        '</div>'; },\n        _footerTemplate: function (ref) {\n            var dialogUpdate = ref.dialogUpdate;\n            var dialogCancel = ref.dialogCancel;\n\n            return \"<div class=\\\"k-actions k-actions-start k-actions-horizontal k-window-actions\\\">\" +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-update\\\">\" + (kendo.htmlEncode(dialogUpdate)) + \"</button>\"), { themeColor: \"primary\", icon: \"check\" }) +\n            kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\">\" + (kendo.htmlEncode(dialogCancel)) + \"</button>\"), { icon: \"cancel-outline\" }) +\n        \"</div>\";\n    },\n        indent: function(content) {\n            return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                          .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                          .replace(/<br \\/>/ig, \"<br />\\n\")\n                          .replace(/\\n$/, \"\");\n        }\n    });\n\n    kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\n    Editor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils;\n\n    var FormatCommand = Command.extend({\n        init: function(options) {\n            options.formatter = options.formatter();\n            var finder = options.formatter.finder;\n            if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n                finder._initOptions({ immutables: options.immutables });\n            }\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var FormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = this.options.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar && ui.getKendoToggleButton()) {\n                toolbar.toggle(ui, isFormatted);\n            }\n        }\n    });\n\n    $.extend(Editor, {\n        FormatCommand: FormatCommand,\n        FormatTool: FormatTool\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        Tool = Editor.Tool,\n        FormatTool = Editor.FormatTool,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        extend = $.extend,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n        KEYDOWN_NS = \"keydown.kendoEditor\",\n        KMARKER = \"k-marker\";\n\n    var InlineFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        numberOfSiblings: function(referenceNode) {\n            var textNodesCount = 0,\n                elementNodesCount = 0,\n                markerCount = 0,\n                parentNode = referenceNode.parentNode,\n                node;\n\n            for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                if (node != referenceNode) {\n                    if (node.className == KMARKER) {\n                        markerCount++;\n                    } else if (node.nodeType == 3) {\n                        textNodesCount++;\n                    } else {\n                        elementNodesCount++;\n                    }\n                }\n            }\n\n            if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                // full node selection\n                return 0;\n            } else {\n                return elementNodesCount + textNodesCount;\n            }\n        },\n\n        findSuitable: function(sourceNode, skip) {\n            if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                return null;\n            }\n\n            var node = sourceNode.parentNode;\n            var tags = this.format[0].tags;\n\n            while (!dom.ofType(node, tags)) {\n                if (this.numberOfSiblings(node) > 0) {\n                    return null;\n                }\n\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n\n        findFormat: function(sourceNode) {\n            var format = this.format,\n                attrEquals = dom.attrEquals,\n                i, len, node, tags, attributes;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                while (node) {\n                    node = dom.parentOfType(node, tags);\n                    if (node && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                }\n            }\n\n            return null;\n        },\n\n        isFormatted: function(nodes) {\n            var i, len;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                if (this.findFormat(nodes[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n\n    var InlineFormatter = Class.extend({\n        init: function(format, values) {\n            this.finder = new InlineFormatFinder(format);\n            this.attributes = extend({}, format[0].attr, values);\n            this.tag = format[0].tags[0];\n        },\n\n        wrap: function(node) {\n            return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n        },\n\n        activate: function(range, nodes) {\n            if (this.finder.isFormatted(nodes)) {\n                this.split(range);\n                this.remove(nodes);\n            } else {\n                this.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n            var nodes = textNodes(range);\n\n            if (nodes.length > 0) {\n                this.activate(range, nodes);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        apply: function(nodes) {\n            var formatNodes = [];\n            var i, l, node, formatNode;\n\n            if (nodes.length > 1) {\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.format(node, true);\n                    formatNodes.push(formatNode);\n\n                }\n            } else {\n                node = nodes[0];\n                formatNode = this.format(node, false);\n            }\n\n            this.consolidate(formatNodes);\n        },\n\n        format: function(node, outerMostInline) {\n            var formatNode = this.finder.findSuitable(node);\n            var attributes = this.attributes;\n            var styleAttr = attributes ? attributes.style || {} : {};\n\n            if (formatNode) {\n                if (dom.is(formatNode, \"font\")) {\n                    if (styleAttr.color) {\n                        formatNode.removeAttribute(\"color\");\n                    }\n                    if (styleAttr.fontName) {\n                        formatNode.removeAttribute(\"face\");\n                    }\n                    if (styleAttr.fontSize) {\n                        formatNode.removeAttribute(\"size\");\n                    }\n                }\n                dom.attr(formatNode, attributes);\n            } else {\n                while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                    node = node.parentNode;\n                }\n\n                formatNode = this.wrap(node);\n            }\n\n            return formatNode;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode;\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    if (this.attributes && this.attributes.style) {\n                        dom.unstyle(formatNode, this.attributes.style);\n                        if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                            dom.unwrap(formatNode);\n                        }\n                    } else {\n                        dom.unwrap(formatNode);\n                    }\n                }\n            }\n        },\n\n        split: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            var l = nodes.length;\n            var i, formatNode;\n\n            if (l > 0) {\n                for (i = 0; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        },\n\n        consolidate: function(nodes) {\n            var node, last;\n\n            while (nodes.length > 1) {\n                node = nodes.pop();\n                last = nodes[nodes.length - 1];\n\n                if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                    last.appendChild(node.previousSibling);\n                }\n\n                if (node.tagName == last.tagName &&\n                    node.previousSibling == last &&\n                    node.style.cssText == last.style.cssText &&\n                    node.className === last.className) {\n\n                    while (node.firstChild) {\n                        last.appendChild(node.firstChild);\n                    }\n\n                    dom.remove(node);\n                }\n            }\n        }\n    });\n\n    var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n        init: function(format, greedyProperty, fontAttr) {\n            this.format = format;\n            this.greedyProperty = greedyProperty;\n            this.fontAttr = fontAttr;\n            InlineFormatFinder.fn.init.call(this, format);\n        },\n\n        getInlineCssValue: function(node) {\n            var attributes = node.attributes;\n            var trim = kendo.trim;\n            var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n            var propertyAndValue, property, value;\n\n            if (!attributes) {\n                return;\n            }\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                attributeValue = attribute.nodeValue;\n\n                if (attribute.specified && name == \"style\") {\n\n                    css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                    for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                        pair = css[cssIndex];\n                        if (pair.length) {\n                            propertyAndValue = pair.split(\":\");\n                            property = trim(propertyAndValue[0].toLowerCase());\n                            value = trim(propertyAndValue[1]);\n\n                            if (property != this.greedyProperty) {\n                                continue;\n                            }\n\n                            return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                        }\n                    }\n                }\n\n                if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                    property = attribute.nodeValue;\n                    value = attribute.nodeValue;\n\n                    return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                }\n            }\n        },\n\n        getFormatInner: function(node) {\n            var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n            var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n            var i, len, value;\n\n            for (i = 0, len = parents.length; i < len; i++) {\n                value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n                if (value) {\n                    return value;\n                }\n            }\n\n            return \"inherit\";\n        },\n\n        getFormat: function(nodes) {\n            var result = this.getFormatInner(nodes[0]), i, len;\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != this.getFormatInner(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result;\n        },\n\n        isFormatted: function(nodes) {\n            return this.getFormat(nodes) !== \"\";\n        }\n    });\n\n    var GreedyInlineFormatter = InlineFormatter.extend({\n        init: function(format, values, greedyProperty) {\n            InlineFormatter.fn.init.call(this, format, values);\n\n            this.values = values;\n            this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n            if (greedyProperty) {\n                this.greedyProperty = kendo.toCamelCase(greedyProperty);\n            }\n\n        },\n\n        activate: function(range, nodes) {\n            var greedyProperty = this.greedyProperty;\n            var action = \"apply\";\n\n            this.split(range);\n\n            if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n                action = \"remove\";\n            }\n\n            this[action](nodes);\n        }\n    });\n\n    var InlineFormatTool = FormatTool.extend({\n        init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new InlineFormatFinder(options.format),\n                formatter: function() { return new InlineFormatter(options.format); }\n            }));\n        }\n    });\n\n    var DelayedExecutionTool = Tool.extend({\n        update: function(ui, nodes) {\n            var list = ui.data(this.type);\n\n            list.close();\n            list.value(this.finder.getFormat(nodes));\n        }\n    });\n\n    var FontTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            // IE has single selection hence we are using select box instead of combobox\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"span\", \"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options,\n                toolName = options.name,\n                dataSource,\n                range,\n                widget = ui.data(\"kendoComboBox\"),\n                defaultValue = [];\n\n            if (!widget) {\n                return;\n            }\n\n            if (options.defaultValue) {\n               defaultValue = [{\n                    text: editor.options.messages[options.defaultValue[0].text],\n                    value: options.defaultValue[0].value\n               }];\n            }\n\n            dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n            widget.setDataSource(dataSource);\n\n            widget.bind(\"change\", function (e) {\n                editor._range = range;\n                Tool.exec(editor, toolName, e.sender.value());\n            });\n\n            widget.bind(\"close\", function () {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            });\n\n            widget.value(\"inherit\");\n\n            widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n                var newRange = editor.getRange();\n                range = editor._containsRange(newRange) ? newRange : range;\n            })\n            .on(KEYDOWN_NS, function(e) {\n                if (e.keyCode === kendo.keys.ENTER) {\n                    editor._deleteSavedRange();\n                    e.preventDefault();\n                }\n            });\n        }\n\n    });\n\n    var ColorTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.format = [{ tags: [\"span\",\"font\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n        },\n\n        options: {\n            palette: \"websafe\",\n            columns: 18\n        },\n\n        update: function() {\n            this._widget.close();\n        },\n\n        command: function(commandArguments) {\n            var options = this.options,\n                format = this.format,\n                style = {};\n\n            return new Editor.FormatCommand(extend(commandArguments, {\n                formatter: function() {\n                    style[options.domAttr] = commandArguments.value;\n\n                    return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var that = this,\n                toolName = that.options.name,\n                component = this._widget = ui.getKendoColorPicker();\n\n            if (!component) {\n                return;\n            }\n\n            component.bind(\"change\", function () {\n                var color = component.value();\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n\n                editor.focus();\n            });\n\n            component.bind(\"open\", function () {\n                that.storedRange = editor.getRange();\n\n                component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!component._popup.element.is(\"[unselectable='on']\")) {\n                    component._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                component._popup.one(\"activate\", function () {\n                    component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            });\n\n            component.bind(\"close\", function (e) {\n                component._popup.element.off(MOUSEDOWN_NS);\n            });\n\n            component.unbind(\"activate\").bind(\"activate\", function (e) {\n                if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                component.trigger(\"change\");\n            });\n\n            component.wrapper\n                .attr({ unselectable: \"on\" })\n                .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n            component.value(\"transparent\");\n        }\n    });\n\n    extend(Editor, {\n        InlineFormatFinder: InlineFormatFinder,\n        InlineFormatter: InlineFormatter,\n        DelayedExecutionTool: DelayedExecutionTool,\n        GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n        GreedyInlineFormatter: GreedyInlineFormatter,\n        InlineFormatTool: InlineFormatTool,\n        FontTool: FontTool,\n        ColorTool: ColorTool\n    });\n\n    registerFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\n    registerTool(\"bold\", new InlineFormatTool({\n        key: \"B\",\n        ctrl: true,\n        format: formats.bold,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\n    registerTool(\"italic\", new InlineFormatTool({\n        key: \"I\",\n        ctrl: true,\n        format: formats.italic,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\n    registerTool(\"underline\", new InlineFormatTool({\n        key: \"U\",\n        ctrl: true,\n        format: formats.underline,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\n    registerTool(\"strikethrough\", new InlineFormatTool({\n        format: formats.strikethrough,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\n    registerTool(\"superscript\", new InlineFormatTool({\n        format: formats.superscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\n    registerTool(\"subscript\", new InlineFormatTool({\n        format: formats.subscript,\n        ui: {\n            togglable: true\n        }\n    }));\n\n    registerTool(\"foreColor\", new ColorTool({\n        cssAttr: \"color\",\n        fontAttr: \"color\",\n        domAttr: \"color\",\n        name: \"foreColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"foreground-color\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"backColor\", new ColorTool({\n        cssAttr: \"background-color\",\n        domAttr: \"backgroundColor\",\n        name: \"backColor\",\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"ColorPicker\",\n            componentOptions: {\n                views: [\"palette\"],\n                toolIcon: \"droplet\",\n                palette: \"websafe\",\n                columns: 18,\n                preview: false,\n                input: false,\n                buttons: false,\n                commandOn: \"change\",\n                closeOnSelect: true\n            }\n        }\n    }));\n\n    registerTool(\"fontName\", new FontTool({\n        cssAttr: \"font-family\",\n        fontAttr: \"face\",\n        domAttr: \"fontFamily\",\n        name: \"fontName\",\n        defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"fontSize\", new FontTool({\n        cssAttr: \"font-size\",\n        fontAttr: \"size\",\n        domAttr: \"fontSize\",\n        name: \"fontSize\",\n        defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                dataValueField: \"value\",\n                dataTextField: \"text\",\n                valuePrimitive: true\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        InlineFormatter = Editor.InlineFormatter,\n        InlineFormatFinder = Editor.InlineFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        editableTextNodes = RangeUtils.editableTextNodes,\n        registerTool = Editor.EditorUtils.registerTool,\n        keys = kendo.keys;\n\n    var HTTP_PROTOCOL = \"http://\";\n    var protocolRegExp = /^\\w*:\\/\\//;\n    var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\n    var LinkFormatFinder = Class.extend({\n        findSuitable: function(sourceNode) {\n            return dom.parentOfType(sourceNode, [\"a\"]);\n        }\n    });\n\n    var LinkFormatter = Class.extend({\n        init: function() {\n            this.finder = new LinkFormatFinder();\n        },\n\n        apply: function(range, attributes) {\n            var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n            var markers, doc, formatter, a, parent;\n\n            if (attributes.innerText) {\n                doc = RangeUtils.documentFromRange(range);\n                markers = RangeUtils.getMarkers(range);\n\n                range.deleteContents();\n                a = dom.create(doc, \"a\", attributes);\n                range.insertNode(a);\n\n                parent = a.parentNode;\n                if (dom.name(parent) == \"a\") {\n                    dom.insertAfter(a, parent);\n                }\n\n                if (dom.emptyNode(parent)) {\n                    dom.remove(parent);\n                }\n\n                // move range and markers after inserted link\n                var ref = a;\n                for (var i = 0; i < markers.length; i++) {\n                    dom.insertAfter(markers[i], ref);\n                    ref = markers[i];\n                }\n\n                if (markers.length) {\n                    dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                    range.setStartBefore(markers[0]);\n                    range.setEndAfter(markers[markers.length - 1]);\n                }\n            } else {\n                formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n                formatter.finder = this.finder;\n                formatter.apply(nodes);\n            }\n        }\n    });\n\n    var UnlinkCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: function(range) {\n                    var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                    new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n                }\n            };\n            this.options = options;\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var LinkCommand = Command.extend({\n        init: function(options) {\n            var that;\n            this.options = options;\n            Command.fn.init.call(this, options);\n            this.formatter = new LinkFormatter();\n\n            if (!options.url) {\n                this.attributes = null;\n                this.async = true;\n            } else {\n                this.exec = function() {\n                    this.formatter.immutables = that && that.immutables();\n                    this.formatter.apply(options.range, {\n                        href: options.url,\n                        innerText: options.text || options.url,\n                        target: options.target\n                    });\n                };\n            }\n        },\n\n        exec: function() {\n            var messages = this.editor.options.messages;\n            this._initialText = \"\";\n            this._range = this.lockRange(true);\n            this.formatter.immutables = this.immutables();\n\n            var nodes = textNodes(this._range);\n            var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n            var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n            var dialog = this.createDialog(\"<div/>\", {\n                title: messages.createLink,\n                minWidth: 340,\n                close: this._close.bind(this),\n                visible: false\n            }).data(\"kendoWindow\");\n\n            this._form = this._createForm(dialog);\n\n            if (a) {\n                this._range.selectNodeContents(a);\n                nodes = textNodes(this._range);\n            }\n\n            this._initialText = this.linkText(nodes);\n\n            dialog.wrapper\n                .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n                .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n                .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n                .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n                .find(\"#k-editor-link-text\").val(this._initialText).end()\n                .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n                .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n                .find(\".k-editor-link-text-row\").toggle(!img);\n\n            this._dialog = dialog.center().open();\n\n            $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-link-url\",\n                        label: encode(messages.linkWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-text\",\n                        label: encode(messages.linkText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-title\",\n                        label: encode(messages.linkToolTip),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-link-target\",\n                        editorOptions: {\n                            label: encode(messages.linkOpenInNewWindow)\n                        },\n                        label: \"\",\n                        editor: \"CheckBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        },\n\n        _keydown: function(e) {\n            var keys = kendo.keys;\n\n            if (e.keyCode == keys.ENTER) {\n                this._apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                this._close(e);\n            }\n        },\n\n        _apply: function(e) {\n            var element = this._dialog.element;\n            var href = $(\"#k-editor-link-url\", element).val();\n            var title, text, target;\n            var textInput = $(\"#k-editor-link-text\", element);\n\n            if (href && href != HTTP_PROTOCOL) {\n\n                if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                    href = \"mailto:\" + href;\n                }\n\n                this.attributes = { href: href };\n\n                title = $(\"#k-editor-link-title\", element).val();\n                if (title) {\n                    this.attributes.title = title;\n                }\n\n                if (textInput.is(\":visible\")) {\n                    text = kendo.trim(textInput.val());\n                    if (!text && !this._initialText) {\n                        this.attributes.innerText = href;\n                    } else if (text && (text !== this._initialText)) {\n                        this.attributes.innerText = dom.stripBom(text);\n                    }\n                }\n\n                target = $(\"#k-editor-link-target\", element).is(\":checked\");\n                this.attributes.target = target ? \"_blank\" : null;\n\n                this.formatter.apply(this._range, this.attributes);\n            }\n\n            this._close(e);\n\n            if (this.change) {\n                this.change();\n            }\n        },\n\n        _close: function(e) {\n            e.preventDefault();\n            this._form.destroy();\n            this._dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n            this.releaseRange(this._range);\n        },\n\n        linkUrl: function(anchor) {\n            if (anchor) {\n                // IE < 8 returns absolute url if getAttribute is not used\n                return anchor.getAttribute(\"href\", 2);\n            }\n\n            return HTTP_PROTOCOL;\n        },\n\n        linkText: function(nodes) {\n            var text = \"\";\n            var i;\n\n            for (i = 0; i < nodes.length; i++) {\n                text += nodes[i].nodeValue;\n            }\n\n            return dom.stripBom(text || \"\");\n        },\n\n        redo: function() {\n            var range = this.lockRange(true);\n\n            this.formatter.apply(range, this.attributes);\n            this.releaseRange(range);\n        }\n\n    });\n\n    var AutoLinkCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.formatter = new LinkFormatter();\n        },\n\n        exec: function() {\n            var detectedLink = this.detectLink();\n            if (!detectedLink) {\n                return;\n            }\n\n            var range = this.getRange();\n            var linkMarker = new kendo.ui.editor.Marker();\n            var linkRange = range.cloneRange();\n\n            linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n            linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n            range = this.lockRange();\n            linkMarker.add(linkRange);\n\n            this.formatter.apply(linkRange, {\n                href: this._ensureWebProtocol(detectedLink.text)\n            });\n\n            linkMarker.remove(linkRange);\n            this.releaseRange(range);\n        },\n\n        detectLink: function() {\n            var range = this.getRange();\n            var startNode = range.startContainer;\n            var startOffset = range.startOffset;\n            var prev = startNode.previousSibling;\n            if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n                startNode = startNode.parentNode;\n                startOffset = 0;\n            }\n            var traverser = new LeftDomTextTraverser({\n                node: startNode,\n                offset: startOffset,\n                cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n            });\n\n            var detection = new DomTextLinkDetection(traverser);\n            return detection.detectLink();\n        },\n\n        changesContent: function() {\n            return !!this.detectLink();\n        },\n\n        _ensureWebProtocol: function(linkText) {\n            var hasProtocol = this._hasProtocolPrefix(linkText);\n            return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n        },\n\n        _hasProtocolPrefix: function(linkText) {\n            return protocolRegExp.test(linkText);\n        },\n\n        _prefixWithWebProtocol: function(linkText) {\n            return HTTP_PROTOCOL + linkText;\n        }\n    });\n\n    var UnlinkTool = Tool.extend({\n        init: function(options) {\n            this.options = options;\n            this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n            Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n        },\n\n        update: function(ui, nodes) {\n            var isLink = this.finder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            if (isLink) {\n                toolbar.enable(ui, true);\n            } else {\n                toolbar.enable(ui, false);\n            }\n        }\n    });\n\n    var DomTextLinkDetection = Class.extend({\n        init: function(traverser) {\n            this.traverser = traverser;\n            this.start = DomPos();\n            this.end = DomPos();\n            this.text = \"\";\n        },\n\n        detectLink: function() {\n            var node = this.traverser.node;\n            var offset = this.traverser.offset;\n            if (dom.isDataNode(node)) {\n                var text = node.data.substring(0, offset);\n                if (/\\s{2}$/.test(dom.stripBom(text))) {\n                    return;\n                }\n            } else if (offset === 0) {//heuristic for new line\n                var p = dom.closestEditableOfType(node, dom.blockElements);\n                if (p && p.previousSibling) {\n                    this.traverser.init({\n                        node: p.previousSibling\n                    });\n                }\n            }\n\n            this.traverser.traverse(this._detectEnd.bind(this));\n            if (!this.end.blank()) {\n                this.traverser = this.traverser.clone(this.end);\n                this.traverser.traverse(this._detectStart.bind(this));\n\n                if (!this._isLinkDetected()) {\n                    var puntuationOptions = this.traverser.extendOptions(this.start);\n                    var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                    puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                    if (!this._isLinkDetected()) {\n                        this.start = DomPos();\n                    }\n                }\n            }\n\n            if (this.start.blank()) {\n                return null;\n            } else {\n                return {\n                    start: this.start,\n                    end: this.end,\n                    text: this.text\n                };\n            }\n        },\n\n        _isLinkDetected: function() {\n            return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n        },\n\n        _detectEnd: function(text, node) {\n            var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n            if (i > -1) {\n                this.end.node = node;\n                this.end.offset = i + 1;\n\n                return false;\n            }\n        },\n\n        _detectStart: function(text, node) {\n            var i = lastIndexOfRegExp(text, /\\s/);\n            var ii = i + 1;\n            this.text = text.substring(ii) + this.text;\n\n            this.start.node = node;\n            this.start.offset = ii;\n\n            if (i > -1) {\n                return false;\n            }\n        },\n\n        _skipStartPuntuation: function(text, node, offset) {\n            var i = indexOfRegExp(text, /\\w/);\n            var ii = i;\n            if (i === -1) {\n                ii = text.length;\n            }\n\n            this.text = this.text.substring(ii);\n            this.start.node = node;\n            this.start.offset = ii + (offset | 0);\n\n            if (i > -1) {\n                return false;\n            }\n        }\n    });\n\n    function lastIndexOfRegExp(str, search) {\n        var i = str.length;\n        while (i-- && !search.test(str[i])) {}\n\n        return i;\n    }\n    function indexOfRegExp(str, search) {\n        var r = search.exec(str);\n\n        return r ? r.index : -1;\n    }\n\n    var DomPos = function() {\n        return {\n            node: null,\n            offset: null,\n            blank: function() {\n                return this.node === null && this.offset === null;\n            }\n        };\n    };\n\n    var DomTextTraverser = Class.extend({\n        init: function(options) {\n            this.node = options.node;\n            this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n            this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n        },\n\n        traverse: function(callback) {\n            if (!callback) {\n                return;\n            }\n            this.cancel = false;\n            this._traverse(callback, this.node, this.offset);\n        },\n\n        _traverse: function(callback, node, offset) {\n            if (!node || this.cancel) {\n                return;\n            }\n            if (node.nodeType === 3) {\n                var text = node.data;\n                if (offset !== undefined$1) {\n                    text = this.subText(text, offset);\n                }\n                this.cancel = (callback(text, node, offset) === false);\n            }\n            else {\n                var edgeNode = this.edgeNode(node);\n                this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                return this._traverse(callback, edgeNode);\n            }\n\n            var next = this.next(node);\n            if (!next) {\n                var parent = node.parentNode;\n                while (!next && dom.isInline(parent)) {\n                    next = this.next(parent);\n                    parent = parent.parentNode;\n                }\n            }\n            this.cancel = this.cancel || this.cancelAtNode(next);\n            this._traverse(callback, next);\n        },\n\n        extendOptions: function(o) {\n            return $.extend({\n                node: this.node,\n                offset: this.offset,\n                cancelAtNode: this.cancelAtNode\n            }, o || {});\n        },\n\n        edgeNode: function(node) {},\n        next: function(node) {},\n        subText: function(text, offset) {}\n\n    });\n\n    var LeftDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(0, splitIndex);\n        },\n\n        next: function(node) {\n            return node.previousSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.lastChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new LeftDomTextTraverser(o);\n        }\n    });\n\n    var RightDomTextTraverser = DomTextTraverser.extend({\n        subText: function(text, splitIndex) {\n            return text.substring(splitIndex);\n        },\n\n        next: function(node) {\n            return node.nextSibling;\n        },\n\n        edgeNode: function(node) {\n            return node.firstChild;\n        },\n\n        clone: function(options) {\n            var o = this.extendOptions(options);\n            return new RightDomTextTraverser(o);\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        LinkFormatFinder: LinkFormatFinder,\n        LinkFormatter: LinkFormatter,\n        UnlinkCommand: UnlinkCommand,\n        LinkCommand: LinkCommand,\n        AutoLinkCommand: AutoLinkCommand,\n        UnlinkTool: UnlinkTool,\n        DomTextLinkDetection: DomTextLinkDetection,\n        LeftDomTextTraverser: LeftDomTextTraverser,\n        RightDomTextTraverser: RightDomTextTraverser\n    });\n\n    registerTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\n    registerTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\n    registerTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        FormatTool = Editor.FormatTool,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    var BlockFormatFinder = Class.extend({\n        init: function(format) {\n            this.format = format;\n        },\n\n        contains: function(node, children) {\n            var i, len, child;\n\n            for (i = 0, len = children.length; i < len; i++) {\n                child = children[i];\n                if (!child || !dom.isAncestorOrSelf(node, child)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var format = this.format,\n                suitable = [],\n                i, len, candidate;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                for (var f = format.length - 1; f >= 0; f--) {\n                    candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                    if (candidate) {\n                        break;\n                    }\n                }\n\n                if (!candidate || candidate.contentEditable === 'true') {\n                    return [];\n                }\n\n                if ($.inArray(candidate, suitable) < 0) {\n                    suitable.push(candidate);\n                }\n            }\n\n            this._resolveListsItems(suitable);\n\n            for (i = 0, len = suitable.length; i < len; i++) {\n                if (this.contains(suitable[i], suitable)) {\n                    return [suitable[i]];\n                }\n            }\n\n            return suitable;\n        },\n        _resolveListsItems: function(nodes) {\n            var i, node, wrapper;\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n                wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                if (dom.is(wrapper, \"li\")) {\n                    node = nodes[i] = wrapper;\n                }\n            }\n        },\n\n        findFormat: function(sourceNode, until) {\n            var format = this.format,\n                i, len, node, tags, attributes;\n            var editableParent = dom.editableParent(sourceNode);\n            var immutables = this.options && this.options.immutables;\n            var ImmutablesNS = Editor.Immutables;\n\n            for (i = 0, len = format.length; i < len; i++) {\n                node = sourceNode;\n                tags = format[i].tags;\n                attributes = format[i].attr;\n\n                if (immutables && tags && tags[0] == \"immutable\") {\n                    var immutable = ImmutablesNS.immutableParent(node);\n                    if (immutable && dom.attrEquals(immutable, attributes)) {\n                        return node;\n                    }\n                }\n\n                while (node && dom.isAncestorOf(editableParent, node)) {\n                    if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                        return node;\n                    }\n\n                    if (until && until(node)) {\n                        break;\n                    }\n\n                    node = node.parentNode;\n                }\n            }\n            return null;\n        },\n\n        getFormat: function(nodes) {\n            var that = this,\n                findFormat = function(node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    },\n                result = findFormat(nodes[0]),\n                i, len;\n\n            if (!result) {\n                return \"\";\n            }\n\n            for (i = 1, len = nodes.length; i < len; i++) {\n                if (result != findFormat(nodes[i])) {\n                    return \"\";\n                }\n            }\n\n            return result.nodeName.toLowerCase();\n        },\n\n        isFormatted: function(nodes, until) {\n            for (var i = 0, len = nodes.length; i < len; i++) {\n                if (!this.findFormat(nodes[i], until)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    });\n\n    var BlockFormatter = Class.extend({\n        init: function(format, values) {\n            this.format = format;\n            this.values = values;\n            this.finder = new BlockFormatFinder(format);\n        },\n\n        wrap: function(tag, attributes, nodes) {\n\n            var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n            if (dom.isInline(commonAncestor)) {\n                commonAncestor = dom.blockParentOrBody(commonAncestor);\n            }\n\n            var ancestors = dom.significantChildNodes(commonAncestor),\n                position = dom.findNodeIndex(ancestors[0]),\n                wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n                i, ancestor;\n\n            for (i = 0; i < ancestors.length; i++) {\n                ancestor = ancestors[i];\n                if (dom.isBlock(ancestor)) {\n                    dom.attr(ancestor, attributes);\n\n                    if (wrapper.childNodes.length) {\n                        dom.insertBefore(wrapper, ancestor);\n                        wrapper = wrapper.cloneNode(false);\n                    }\n\n                    position = dom.findNodeIndex(ancestor) + 1;\n\n                    continue;\n                }\n\n                wrapper.appendChild(ancestor);\n            }\n\n            if (wrapper.firstChild) {\n                dom.insertAt(commonAncestor, wrapper, position);\n            }\n        },\n\n        apply: function(nodes) {\n            var format, values = this.values;\n\n            function attributes(format) {\n                return extend({}, format && format.attr, values);\n            }\n\n            this._handleImmutables(nodes, true);\n\n            var images = dom.filter(\"img\", nodes);\n            var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n            var imageAttributes = attributes(imageFormat);\n            $.each(images, function() {\n                dom.attr(this, imageAttributes);\n            });\n\n            // only images were selected, no need to wrap\n            if (images.length == nodes.length) {\n                return;\n            }\n\n            var nonImages = dom.filter(\"img\", nodes, true);\n            var formatNodes = this.finder.findSuitable(nonImages);\n\n            if (formatNodes.length) {\n                for (var i = 0, len = formatNodes.length; i < len; i++) {\n                    format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                    dom.attr(formatNodes[i], attributes(format));\n                }\n            } else {\n                format = this.format[0];\n                this.wrap(format.tags[0], attributes(format), nonImages);\n            }\n        },\n\n        _handleImmutables: function(nodes, applyFormatting) {\n            if (!this.immutables()) {\n                return;\n            }\n            var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n            if (!immutableFormat) {\n                return;\n            }\n            var ImmutablesNS = Editor.Immutables;\n            var l = nodes.length - 1;\n            for (var i = l; i >= 0; i--) {\n                var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                if (!immutableParent) {\n                    continue;\n                }\n                if (immutableParent !== nodes[i + 1]) {\n                    if (applyFormatting) {\n                        dom.attr(immutableParent, immutableFormat.attr);\n                    } else {\n                        dom.unstyle(immutableParent, immutableFormat.attr.style);\n                    }\n                }\n                nodes.splice(i, 1);\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        remove: function(nodes) {\n            var i, l, formatNode, namedFormat, name;\n\n            this._handleImmutables(nodes, false);\n\n            for (i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    name = dom.name(formatNode);\n                    namedFormat = EditorUtils.formatByName(name, this.format);\n                    if (namedFormat.attr.style) {\n                        dom.unstyle(formatNode, namedFormat.attr.style);\n                    }\n                    if (namedFormat.attr.className) {\n                        dom.removeClass(formatNode, namedFormat.attr.className);\n                    }\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            if (that.finder.isFormatted(nodes)) {\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n    });\n\n    var GreedyBlockFormatter = Class.extend({\n        init: function(format, values) {\n            var that = this;\n            that.format = format;\n            that.values = values;\n            that.finder = new BlockFormatFinder(format);\n        },\n\n        apply: function(nodes) {\n            var format = this.format;\n            var blocks = dom.blockParents(nodes);\n            var formatTag = format[0].tags[0];\n            var i, len, list, formatter, range;\n            var element;\n            var tagName;\n            var block;\n            var immutalbeParent;\n\n            if (blocks.length) {\n                for (i = 0, len = blocks.length; i < len; i++) {\n                    block = blocks[i];\n                    immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                    if (!immutalbeParent) {\n                        tagName = dom.name(block);\n\n                        if (tagName == \"li\") {\n                            list = block.parentNode;\n                            formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                            range = this.editor.createRange();\n                            range.selectNode(blocks[i]);\n                            formatter.toggle(range);\n                        } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                            new BlockFormatter(format, this.values).apply(block.childNodes);\n                        } else {\n                            element = dom.changeTag(block, formatTag);\n                            dom.attr(element, format[0].attr);\n                        }\n                    }\n                }\n            } else {\n                var blockFormatter = new BlockFormatter(format, this.values);\n                blockFormatter.editor = this.editor;\n                blockFormatter.apply(nodes);\n            }\n        },\n\n        toggle: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                range.selectNodeContents(range.commonAncestorContainer);\n                nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                }\n            }\n\n            this.apply(nodes);\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        }\n    });\n\n    var BlockFormatTool = FormatTool.extend({ init: function(options) {\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new BlockFormatFinder(options.format),\n                formatter: function() {\n                    return new BlockFormatter(options.format);\n                }\n            }));\n        }\n    });\n\n    extend(Editor, {\n        BlockFormatFinder: BlockFormatFinder,\n        BlockFormatter: BlockFormatter,\n        GreedyBlockFormatter: GreedyBlockFormatter,\n        BlockFormatTool: BlockFormatTool\n    });\n\n    var listElements = [\"ul\",\"ol\",\"li\"];\n\n    registerFormat(\"justifyLeft\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyLeft\", new BlockFormatTool({\n        format: formats.justifyLeft,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyCenter\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyCenter\", new BlockFormatTool({\n        format: formats.justifyCenter,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyRight\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n        { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n    ]);\n    registerTool(\"justifyRight\", new BlockFormatTool({\n        format: formats.justifyRight,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    registerFormat(\"justifyFull\", [\n        { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n        { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n        { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n    ]);\n    registerTool(\"justifyFull\", new BlockFormatTool({\n        format: formats.justifyFull,\n        ui: {\n            togglable: true,\n            group: \"align\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        FormatTool = Editor.FormatTool,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        textNodes = RangeUtils.textNodes,\n        registerTool = Editor.EditorUtils.registerTool;\n\n    var ListFormatFinder = BlockFormatFinder.extend({\n        init: function(options) {\n            this.tag = options.tag;\n            this.attr = options.attr;\n            this.altAttr = options.altAttr;\n\n            var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n            var format = [{ tags: tags, attr: this.attr }];\n\n            if (this.altAttr) {\n                format.push({\n                    tags: tags,\n                    attr: this.altAttr\n                });\n            }\n\n            BlockFormatFinder.fn.init.call(this, format);\n        },\n\n        matchesType: function(node) {\n            return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        isFormatted: function(nodes) {\n            var formatNodes = [];\n            var formatNode, i;\n\n            for (i = 0; i < nodes.length; i++) {\n                formatNode = this.findFormat(nodes[i], this.isList);\n\n                if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                    formatNodes.push(formatNode);\n                }\n            }\n\n            if (formatNodes.length < 1) {\n                return false;\n            }\n\n            if (formatNodes.length != nodes.length) {\n                return false;\n            }\n\n            // check if sequential lists are selected\n            for (i = 0; i < formatNodes.length; i++) {\n                if (formatNodes[i].parentNode != formatNode.parentNode) {\n                    break;\n                }\n\n                if (formatNodes[i] != formatNode) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        findSuitable: function(nodes) {\n            var candidate = this.findFormat(nodes[0], this.isList);\n\n            if (candidate && dom.name(candidate) == this.tag) {\n                return candidate;\n            }\n\n            return null;\n        }\n\n    });\n\n    var ListFormatter = Class.extend({\n        init: function(options, unwrapTag) {\n            var that = this;\n            options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n            that.tag = options.tag;\n            that.attr = options.attr;\n            that.finder = new ListFormatFinder(options);\n            that.unwrapTag = unwrapTag;\n        },\n\n        isList: function(node) {\n            return dom.list(node);\n        },\n\n        immutables: function() {\n            return this.editor && !!this.editor.options.immutables;\n        },\n\n        wrap: function(list, nodes) {\n            var li = dom.create(list.ownerDocument, \"li\"),\n                i, node,\n                isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n\n                if (dom.is(node, 'li')) {\n                    list.appendChild(node);\n                    continue;\n                }\n\n                if (this.isList(node)) {\n                    while (node.firstChild) {\n                        list.appendChild(node.firstChild);\n                    }\n                    continue;\n                }\n\n                if (dom.is(node, \"td\")) {\n                    while (node.firstChild) {\n                        li.appendChild(node.firstChild);\n                    }\n                    list.appendChild(li);\n                    node.appendChild(list);\n                    list = list.cloneNode(false);\n                    li = li.cloneNode(false);\n                    continue;\n                }\n\n                li.appendChild(node);\n\n                if (dom.isBlock(node)) {\n                    list.appendChild(li);\n                    if (!isImmutable(node)) {\n                        dom.unwrap(node);\n                    }\n                    li = li.cloneNode(false);\n                }\n            }\n\n            if (li.firstChild) {\n                list.appendChild(li);\n            }\n        },\n\n        containsAny: function(parent, nodes) {\n            for (var i = 0; i < nodes.length; i++) {\n                if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        suitable: function(candidate, nodes) {\n            if (candidate.className == \"k-marker\") {\n                var sibling = candidate.nextSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n\n                sibling = candidate.previousSibling;\n\n                if (sibling && dom.isBlock(sibling)) {\n                    return false;\n                }\n            }\n\n            return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n        },\n\n        _parentLists: function(node) {\n            var editable = dom.closestEditable(node);\n\n            return $(node).parentsUntil(editable, \"ul,ol\");\n        },\n\n        split: function(range) {\n            var nodes = textNodes(range);\n            var start, end, parents;\n\n            if (nodes.length) {\n                start = dom.parentOfType(nodes[0], ['li']);\n                end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                range.setStartBefore(start);\n                range.setEndAfter(end);\n\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    var formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        parents = this._parentLists(formatNode);\n                        if (parents.length) {\n                            RangeUtils.split(range, parents.last()[0], true);\n                        } else {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            }\n        },\n\n        merge: function(tag, formatNode) {\n            var prev = formatNode.previousSibling, next;\n\n            while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n                prev = prev.previousSibling;\n            }\n\n            // merge with previous list\n            if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n                while (formatNode.firstChild) {\n                    prev.appendChild(formatNode.firstChild);\n                }\n                dom.remove(formatNode);\n                formatNode = prev;\n            }\n\n            next = formatNode.nextSibling;\n            while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n                next = next.nextSibling;\n            }\n\n            // merge with next list\n            if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n                while (formatNode.lastChild) {\n                    next.insertBefore(formatNode.lastChild, next.firstChild);\n                }\n                dom.remove(formatNode);\n            }\n        },\n\n        breakable: function(node) {\n            return (\n                node != node.ownerDocument.body &&\n                !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n                !node.attributes.contentEditable\n            );\n        },\n\n        findSuitableNode: function(nodes) {\n            var that = this,\n                finder = that.finder,\n                tag = that.tag,\n                formatNode;\n\n            formatNode = finder.findSuitable(nodes);\n\n            if (!formatNode) {\n                // Find the opposite tag\n                finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n                formatNode = finder.findSuitable(nodes);\n            }\n\n            if (!formatNode) {\n                // Find the same tag\n                finder = new ListFormatFinder({ tag: tag });\n                formatNode = finder.findSuitable(nodes);\n                formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n            }\n\n\n            return formatNode;\n        },\n\n        applyOnSection: function(section, nodes) {\n            var tag = this.tag;\n            var attr = this.attr;\n            var commonAncestor = dom.closestSplittableParent(nodes);\n\n            var ancestors = [];\n            var formatNode = this.findSuitableNode(nodes);\n\n            var childNodes;\n\n            if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n                childNodes = $.map(nodes, function(node) {\n                    return dom.parentOfType(node, [\"td\"]);\n                });\n            } else {\n                childNodes = dom.significantChildNodes(commonAncestor);\n\n                if ($.grep(childNodes, dom.isBlock).length) {\n                    childNodes = $.grep(childNodes, (function(node) {\n                        return this.containsAny(node, nodes);\n                    }).bind(this));\n                }\n\n                if (!childNodes.length) {\n                    childNodes = nodes;\n                }\n            }\n\n            function pushAncestor() {\n                ancestors.push(this);\n            }\n\n            for (var i = 0; i < childNodes.length; i++) {\n                var child = childNodes[i];\n                var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n                if (!suitable) {\n                    continue;\n                }\n\n                if (formatNode && this.isList(child)) {\n                    // merging lists\n                    $.each(child.children, pushAncestor);\n                    dom.remove(child);\n                } else {\n                    ancestors.push(child);\n                }\n            }\n\n            if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                ancestors = [commonAncestor];\n            }\n\n            if (!formatNode) {\n                formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n                if (dom.isBlock(ancestors[0])) {\n                    dom.mergeAttributes(ancestors[0], formatNode);\n                }\n                dom.insertBefore(formatNode, ancestors[0]);\n            }\n\n            this.wrap(formatNode, ancestors);\n\n            while (dom.isBom(formatNode.nextSibling)) {\n                dom.remove(formatNode.nextSibling);\n            }\n\n            if (!this.finder.matchesType(formatNode)) {\n                formatNode.removeAttribute(\"type\");\n                formatNode.style.listStyleType = \"\";\n                dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n            }\n\n            if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n                formatNode.removeAttribute(\"type\");\n            }\n\n            if (!dom.is(formatNode, tag)) {\n                dom.changeTag(formatNode, tag);\n            }\n\n            this.merge(tag, formatNode);\n        },\n\n        apply: function(nodes) {\n            var i = 0,\n                sections = [],\n                lastSection,\n                lastNodes,\n                section,\n                node,\n                l = nodes.length,\n                immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n            function addLastSection() {\n                if (lastSection) {\n                    sections.push({\n                        section: lastSection,\n                        nodes: lastNodes\n                    });\n                }\n            }\n\n            // split nodes into sections that need to be different lists\n            for (i = 0; i < l; i++) {\n                node = immutableParent(nodes[i]) || nodes[i];\n                section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n                if (!lastSection || section != lastSection) {\n                    addLastSection();\n                    lastNodes = [node];\n                    lastSection = section;\n                } else {\n                    lastNodes.push(node);\n                }\n            }\n\n            addLastSection();\n\n            for (i = 0; i < sections.length; i++) {\n                this.applyOnSection(sections[i].section, sections[i].nodes);\n            }\n        },\n\n        unwrap: function(ul) {\n            var fragment = ul.ownerDocument.createDocumentFragment(),\n                unwrapTag = this.unwrapTag,\n                parents,\n                li,\n                p,\n                child;\n\n            for (li = ul.firstChild; li; li = li.nextSibling) {\n                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n                while (li.firstChild) {\n                    child = li.firstChild;\n\n                    if (dom.isBlock(child)) {\n\n                        if (p.firstChild) {\n                            fragment.appendChild(p);\n                            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                        }\n\n                        fragment.appendChild(child);\n                    } else {\n                        p.appendChild(child);\n                    }\n                }\n\n                if (p.firstChild) {\n                    fragment.appendChild(p);\n                }\n            }\n\n            parents = this._parentLists(ul);\n\n            if (parents[0]) {\n                dom.insertAfter(fragment, parents.last()[0]);\n                parents.last().remove();\n            } else {\n                dom.insertAfter(fragment, ul);\n            }\n\n            dom.remove(ul);\n        },\n\n        remove: function(nodes) {\n            var formatNode;\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n\n                if (formatNode) {\n                    this.unwrap(formatNode);\n                }\n            }\n        },\n\n        toggle: function(range) {\n            var that = this,\n                nodes = textNodes(range),\n                ancestor = range.commonAncestorContainer;\n\n            if (!nodes.length) {\n                range.selectNodeContents(ancestor);\n                nodes = textNodes(range);\n                if (!nodes.length) {\n                    var text = ancestor.ownerDocument.createTextNode(\"\");\n                    range.startContainer.appendChild(text);\n                    nodes = [text];\n                    range.selectNode(text.parentNode);\n                }\n            }\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            if (that.finder.isFormatted(nodes)) {\n                that.split(range);\n                that.remove(nodes);\n            } else {\n                that.apply(nodes);\n            }\n        }\n\n    });\n\n    var ListCommand = Command.extend({\n        init: function(options) {\n            options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var ListTool = FormatTool.extend({\n        init: function(options) {\n            this.options = options;\n\n            FormatTool.fn.init.call(this, extend(options, {\n                finder: new ListFormatFinder(options)\n            }));\n        },\n\n        command: function(commandArguments) {\n            return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n        }\n    });\n\n    extend(Editor, {\n        ListFormatFinder: ListFormatFinder,\n        ListFormatter: ListFormatter,\n        ListCommand: ListCommand,\n        ListTool: ListTool\n    });\n\n    registerTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\n    registerTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        Command = Editor.Command,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n\n    var FormattingTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            var that = this;\n            Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n            that.type = \"kendoDropDownList\";\n\n            that.finder = {\n                getFormat: function() { return \"\"; }\n            };\n        },\n\n        options: {\n            items: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            width: 110\n        },\n\n        toFormattingItem: function(item) {\n            var value = item.value;\n\n            if (!value) {\n                return item;\n            }\n\n            if (item.tag || item.className) {\n                return item;\n            }\n\n            var dot = value.indexOf(\".\");\n\n            if (dot === 0) {\n                item.className = value.substring(1);\n            } else if (dot == -1) {\n                item.tag = value;\n            } else {\n                item.tag = value.substring(0, dot);\n                item.className = value.substring(dot + 1);\n            }\n\n            return item;\n        },\n\n        command: function(args) {\n            var that = this;\n            var item = args.value;\n\n            item = this.toFormattingItem(item);\n\n            return new Editor.FormatCommand({\n                range: args.range,\n                formatter: function() {\n                    var formatter,\n                        tags = (item.tag || item.context || \"span\").split(\",\"),\n                        format = [{\n                            tags: tags,\n                            attr: { className: item.className || \"\" }\n                        }];\n\n                    if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                        formatter = new Editor.GreedyInlineFormatter(format);\n                    } else {\n                        formatter = new Editor.GreedyBlockFormatter(format);\n                    }\n\n                    formatter.editor = that.editor;\n                    return formatter;\n                }\n            });\n        },\n\n        decorate: function(body) {\n            var component = this.component,\n                dataSource = component.dataSource,\n                items = dataSource.data(),\n                i, tag, className, style;\n\n            if (body) {\n                component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n            }\n\n            for (i = 0; i < items.length; i++) {\n                tag = items[i].tag || \"span\";\n                className = items[i].className;\n\n                style = dom.inlineStyle(body, tag, { className: className });\n\n                style = style.replace(/\"/g, \"'\");\n\n                items[i].style = style + \";display:inline-block\";\n            }\n\n            dataSource.trigger(\"change\");\n        },\n\n        initialize: function(ui, editor) {\n            var options = this.options;\n            var toolName = options.name;\n            var that = this;\n            var component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            that.editor = editor;\n            that.component = component;\n\n            // must be moved to themes\n            ui.closest(\".k-dropdownlist\").width(options.width);\n\n            component.setOptions({\n                optionLabel: editor.options.messages.formatting,\n                change: function () {\n                    var dataItem = component.dataItem();\n\n                    if (dataItem) {\n                        Tool.exec(editor, toolName, dataItem.toJSON());\n                    }\n                },\n                dataBound: function() {\n                    var i, items = component.dataSource.data(),\n                        optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                    for (i = 0; i < items.length; i++) {\n                        items[i] = that.toFormattingItem(items[i]);\n                    }\n\n                    if (optionLabel.length) {\n                        optionLabel.remove();\n                    }\n                }\n            });\n        },\n\n        getFormattingValue: function(items, nodes) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                var tag = item.tag || item.context || \"\";\n                var className = item.className ? \".\" + item.className : \"\";\n                var selector = tag + className;\n\n                var element = $(nodes[0]).closest(selector)[0];\n\n                if (!element) {\n                    continue;\n                }\n\n                if (nodes.length == 1) {\n                    return item.value;\n                }\n\n                for (var n = 1; n < nodes.length; n++) {\n                    if (!$(nodes[n]).closest(selector)[0]) {\n                        break;\n                    } else if (n == nodes.length - 1) {\n                        return item.value;\n                    }\n                }\n            }\n\n            return \"\";\n        },\n\n        update: function(ui, nodes) {\n            var selectBox = $(ui).data(this.type);\n            // necessary until formatBlock is deleted\n            if (!selectBox) {\n                return;\n            }\n\n            var dataSource = selectBox.dataSource,\n                items = dataSource.data(),\n                i, context,\n                ancestor = dom.commonAncestor.apply(null, nodes);\n\n            if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                return;\n            } else {\n                this._ancestor = ancestor;\n            }\n\n            for (i = 0; i < items.length; i++) {\n                context = items[i].context;\n\n                items[i].visible = !context || !!$(ancestor).closest(context).length;\n            }\n\n            dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n            DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n            selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n            selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    var CleanFormatCommand = Command.extend({\n        exec: function() {\n            var range = this.lockRange(true);\n            this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n            RangeUtils.wrapSelectedElements(range);\n\n            var nodes = RangeUtils.mapAll(range, function(node) {\n                return node;\n            });\n\n\n            for (var c = nodes.length - 1; c >= 0; c--) {\n                var node = nodes[c];\n                if (!this.immutableParent(node)) {\n                    this.clean(node);\n                }\n            }\n\n            this.releaseRange(range);\n        },\n\n        clean: function(node) {\n            if (!node || dom.isMarker(node)) {\n                return;\n            }\n\n            var name = dom.name(node);\n\n            if (name == \"ul\" || name == \"ol\") {\n                var listFormatter = new Editor.ListFormatter(name);\n                var prev = node.previousSibling;\n                var next = node.nextSibling;\n\n                listFormatter.unwrap(node);\n\n                // clean contents\n                for (; prev && prev != next; prev = prev.nextSibling) {\n                    this.clean(prev);\n                }\n            } else if (name == \"blockquote\") {\n                dom.changeTag(node, \"p\");\n            } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                    this.clean(node.childNodes[i]);\n                }\n\n                node.removeAttribute(\"style\");\n                node.removeAttribute(\"class\");\n            } else {\n                unwrapListItem(node);\n            }\n\n            if ($.inArray(name, this.tagsToClean) > -1) {\n                dom.unwrap(node);\n            }\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n\n    function unwrapListItem(node) {\n        var li = dom.closestEditableOfType(node, [\"li\"]);\n        if (li) {\n            var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n            var range = kendo.ui.editor.W3CRange.fromNode(node);\n            range.selectNode(li);\n            listFormatter.toggle(range);\n        }\n    }\n\n    $.extend(Editor, {\n        FormattingTool: FormattingTool,\n        CleanFormatCommand: CleanFormatCommand\n    });\n\n    registerTool(\"formatting\", new FormattingTool({\n        ui: {\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                highlightFirst: false,\n                autoWidth: true,\n                template: kendo.template(\n                    function (data) { return (\"<span unselectable=\\\"on\\\" style=\\\"display:block;\" + (data.style || \"\") + \"\\\">\" + (kendo.htmlEncode(data.text)) + \"</span>\"); }\n                )\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    registerTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        keys = kendo.keys,\n        KEDITORIMAGEURL = \"#k-editor-image-url\",\n        KEDITORIMAGETITLE = \"#k-editor-image-title\",\n        KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n        KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\n    var ImageCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertImage: function(img, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.src && attributes.src != \"http://\") {\n\n                var removeIEAttributes = function() {\n                    setTimeout(function() {\n                        if (!attributes.width) {\n                            img.removeAttribute(\"width\");\n                        }\n\n                        if (!attributes.height) {\n                            img.removeAttribute(\"height\");\n                        }\n\n                        img.removeAttribute(\"complete\");\n                    });\n                };\n\n                if (!img) {\n                    img = dom.create(doc, \"img\", attributes);\n                    img.onload = img.onerror = removeIEAttributes;\n\n                    range.deleteContents();\n                    range.insertNode(img);\n\n                    if (!img.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                    }\n\n                    removeIEAttributes();\n\n                    range.setStartAfter(img);\n                    range.setEndAfter(img);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    img.onload = img.onerror = removeIEAttributes;\n                    dom.attr(img, attributes);\n                    removeIEAttributes();\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            if (!that.insertImage(RangeUtils.image(range), range)) {\n                that.releaseRange(range);\n            }\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                applied = false,\n                img = RangeUtils.image(range),\n                imageWidth = img && img.getAttribute(\"width\") || \"\",\n                imageHeight = img && img.getAttribute(\"height\") || \"\",\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                imageBrowser = options.imageBrowser,\n                showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertImage,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                    h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n                that.attributes = {\n                    src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                    alt: element.find(KEDITORIMAGETITLE).val()\n                };\n\n                that.attributes.width = null;\n                that.attributes.height = null;\n\n                if (!isNaN(w) && w > 0) {\n                    that.attributes.width = w;\n                }\n\n                if (!isNaN(h) && h > 0) {\n                    that.attributes.height = h;\n                }\n\n                applied = that.insertImage(img, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                this._imageBrowser = new kendo.ui.ImageBrowser(\n                    element.find(\".k-imagebrowser\"),\n                    extend({}, imageBrowser)\n                );\n\n                this._imageBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORIMAGEURL).val(this.value());\n                    }\n                });\n\n                this._imageBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-image-url\",\n                        label: encode(messages.imageWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-title\",\n                        label: encode(messages.imageAltText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-width\",\n                        label: encode(messages.imageWidth),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-image-height\",\n                        label: encode(messages.imageHeight),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.ImageCommand = ImageCommand;\n\n    registerTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\n    var ImportCommand = Command.extend({\n        exec: function() {\n            (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n        },\n\n        _initializeUploadWidget: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var importOptions = editor.options[\"import\"];\n            var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                success: cmd._onUploadSuccess.bind(cmd),\n                progress: cmd._onUploadProgress.bind(cmd),\n                select: cmd._onUploadSelect.bind(cmd),\n                error: cmd._onUploadError.bind(cmd),\n                complete: cmd._onUploadComplete.bind(cmd),\n                showFileList: false,\n                multiple: false,\n                async: {\n                    saveUrl: importOptions.proxyURL,\n                    autoUpload: true,\n                    saveField: \"file\"\n                },\n                validation: {\n                    allowedExtensions: importOptions.allowedExtensions,\n                    maxFileSize: importOptions.maxFileSize\n                }\n            }).getKendoUpload();\n\n            editor._uploadWidget = upload;\n\n            return upload;\n        },\n        _onUploadComplete: function(ev) {\n            this._trigger(\"complete\", ev);\n            ev.sender.clearAllFiles();\n\n            this._removeLoadingOverlay();\n        },\n        _onUploadSuccess: function(ev) {\n            this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n            this._trigger(\"success\", ev);\n        },\n        _onUploadProgress: function(ev) {\n            this._trigger(\"progress\", ev);\n        },\n        _onUploadSelect: function(ev) {\n            this._trigger(\"select\", ev);\n            if (!ev.files[0].validationErrors) {\n                this._initLoadingOverlay();\n            }\n        },\n        _onUploadError: function(ev) {\n            this._trigger(\"error\", ev);\n        },\n\n        _trigger: function(eventType, uploadEvent) {\n            var editor = this.editor;\n            var importOptions = editor.options[\"import\"];\n            if (typeof importOptions[eventType] === \"function\") {\n                importOptions[eventType].call(editor, uploadEvent);\n            }\n        },\n\n        _initLoadingOverlay: function() {\n            var editable = this.editor.body;\n            if (Editor.Dom.is(editable, \"body\")) {\n                this._iframeWrapper = this._container =\n                    this.editor.wrapper.find(\"iframe\").parent()\n                    .css({ position: \"relative\" }).append(loadingOverlay);\n            } else {\n                this._container = $(editable).append(loadingOverlay);\n            }\n\n            kendo.ui.progress(this._container, true);\n        },\n\n        _removeLoadingOverlay: function() {\n            kendo.ui.progress(this._container, false);\n            $(this._iframeWrapper).css({\n                position: \"\"\n            });\n\n            delete this._container;\n            delete this._iframeWrapper;\n        }\n    });\n\n    extend(Editor, {\n        ImportCommand: ImportCommand\n    });\n\n    registerTool(\"import\", new Tool({\n        command: ImportCommand,\n        ui: {\n            showText: \"both\"\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            GenericCommand = editorNS.GenericCommand,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            RestorePoint = editorNS.RestorePoint,\n            extend = $.extend;\n\n    var InsertHtmlCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n            var options = this.options;\n            var range = options.range;\n            var body = editor.body;\n            var startRestorePoint = new RestorePoint(range, body);\n            var html = options.html || options.value || '';\n\n            editor.selectRange(range);\n\n            editor.clipboard.paste(html, options);\n\n            if (options.postProcess) {\n                options.postProcess(editor, editor.getRange());\n            }\n\n            var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n            genericCommand.editor = editor;\n            editor.undoRedoStack.push(genericCommand);\n\n            editor.focus();\n        }\n    });\n\n    var InsertHtmlTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var options = this.options,\n                dataSource = options.items ? options.items : editor.options.insertHtml,\n                component = ui.getKendoDropDownList();\n\n            if (!component) {\n                return;\n            }\n\n            component.one(\"open\", function () {\n                var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            });\n\n            component.setOptions({\n                dataSource: dataSource,\n                optionLabel: editor.options.messages.insertHtml\n            });\n            component.bind(\"change\", function () {\n                Tool.exec(editor, 'insertHtml', component.value());\n            });\n        },\n\n        command: function(commandArguments) {\n            return new InsertHtmlCommand(commandArguments);\n        },\n\n        update: function(ui) {\n            var component = ui.data(\"kendoDropDownList\");\n            component.close();\n            component.value(null);\n        }\n    });\n\n    extend(editorNS, {\n        InsertHtmlCommand: InsertHtmlCommand,\n        InsertHtmlTool: InsertHtmlTool\n    });\n\n    registerTool(\"insertHtml\", new InsertHtmlTool({\n        ui: {\n            initialValue: \"Insert HTML\",\n            type: \"component\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                autoSize: true,\n                highlightFirst: false\n            },\n            overflow: \"never\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        registerTool = EditorUtils.registerTool,\n        defaultExportAsItems = [\n            { text: 'Docx', value: 'docx' },\n            { text: 'Rtf', value: 'rtf' },\n            { text: 'Pdf', value: 'pdf' },\n            { text: 'Html', value: 'html' },\n            { text: 'Plain Text', value: 'txt' }\n        ];\n\n    var ExportAsCommand = Command.extend({\n        init: function(options) {\n            var cmd = this;\n            cmd.options = options;\n            Command.fn.init.call(cmd, options);\n            cmd.attributes = null;\n            cmd.exportType = options.exportType;\n        },\n\n        exec: function() {\n            var cmd = this;\n            var range = this.lockRange(true);\n            cmd.postToProxy();\n            cmd.releaseRange(range);\n        },\n\n        postToProxy: function() {\n            this.generateForm().appendTo('body').submit().remove();\n        },\n\n        generateForm: function() {\n            var cmd = this;\n            var exportAsOptions = cmd.editor.options.exportAs;\n            var form = $('<form>').attr({\n                action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n                method: 'POST'\n            });\n\n            form.append([\n                cmd.valueInput(),\n                cmd.exportTypeInput(),\n                cmd.fileNameInput(),\n                cmd.antiForgeryInput()\n            ]);\n\n            return form;\n        },\n\n        valueInput: function() {\n            var editor = this.editor;\n            return $('<input>').attr({\n                value: editor.encodedValue(),\n                name: 'value',\n                type: 'hidden'\n            });\n        },\n\n        exportTypeInput: function() {\n            var cmd = this;\n            return $('<input>').attr({\n                value: cmd.exportType,\n                name: 'exportType',\n                type: 'hidden'\n            });\n\n        },\n\n        fileNameInput: function() {\n            var editor = this.editor;\n            var exportAsOptions = editor.options.exportAs;\n            var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n            return $('<input>').attr({\n                value: fileName,\n                name: 'fileName',\n                type: 'hidden'\n            });\n        },\n\n        antiForgeryInput: function() {\n            var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n            return $(\"input[name^='__RequestVerificationToken']\").clone()\n                        .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n        }\n    });\n\n    var ExportAsTool = Tool.extend({\n        init: function(options) {\n            var tool = this;\n            Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n            tool.type = 'kendoDropDownList';\n        },\n\n        options: {\n            items: defaultExportAsItems\n        },\n\n        command: function(args) {\n            var value = args.value;\n            return new Editor.ExportAsCommand({\n                range: args.range,\n                exportType: value.exportType\n            });\n        },\n\n        initialize: function(ui, editor) {\n            var tool = this,\n                component = ui.getKendoDropDownList();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            e.sender.value(null);\n            e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n            this._exec(e.sender.value());\n        },\n\n        update: function(ui, editor) {\n            var component = ui.data(\"kendoDropDownList\");\n\n            component.close();\n            component.value(null);\n            ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { exportType: value } );\n            }\n        },\n\n        destroy: function() {\n            this._ancestor = null;\n        }\n    });\n\n    extend(Editor, {\n        ExportAsTool: ExportAsTool,\n        ExportAsCommand: ExportAsCommand\n    });\n\n    registerTool('exportAs', new ExportAsTool({\n        ui: {\n            type: \"component\",\n            overflow: \"never\",\n            component: \"DropDownList\",\n            componentOptions: {\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                valuePrimitive: true,\n                value: null,\n                width: \"140px\",\n                highlightFirst: false,\n                autoWidth: true,\n                itemTemplate: function (data) { return (\"<span class=\\\"k-link k-menu-link\\\" data-value=\\\"\" + (data.value) + \"\\\">\" + (data.text) + \"</strong></span>\"); },\n                icon: \"export\",\n                valueTemplate: function () { return (\"<span class=\\\"k-editor-export\\\">\" + (kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })) + \"<span class=\\\"k-export-tool-text\\\"></span></span>\"); }\n            }\n        }\n    }));\n\n    }(window.kendo.jQuery));\n\n    (function($, undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command,\n        Tool = Editor.Tool,\n        RangeUtils = Editor.RangeUtils,\n        blockElements = dom.blockElements,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatter = Editor.BlockFormatter;\n\n    function indent(node, value) {\n        var isRtl = $(node).css(\"direction\") == \"rtl\",\n            indentDirection = isRtl ? \"Right\" : \"Left\",\n            property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n        if (value === undefined$1) {\n            return node.style[property] || 0;\n        } else {\n            if (value > 0) {\n                node.style[property] = value + \"px\";\n            } else {\n                node.style[property] = \"\";\n\n                if (!node.style.cssText) {\n                    node.removeAttribute(\"style\");\n                }\n            }\n        }\n    }\n\n    var IndentFormatter = Class.extend({\n        init: function() {\n            this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n        },\n\n        apply: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targets = [],\n                i, len, formatNode, parentList, sibling;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            if (formatNodes.length) {\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    if (dom.is(formatNodes[i], \"li\")) {\n                        if (!$(formatNodes[i]).index()) {\n                            targets.push(formatNodes[i].parentNode);\n                        } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                            targets.push(formatNodes[i]);\n                        }\n                    } else {\n                        targets.push(formatNodes[i]);\n                    }\n                }\n\n                while (targets.length) {\n                    formatNode = targets.shift();\n                    if (dom.is(formatNode, \"li\")) {\n                        parentList = formatNode.parentNode;\n                        sibling = $(formatNode).prev(\"li\");\n                        var siblingList = sibling.find(\"ul,ol\").last();\n\n                        var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                        if (nestedList && sibling[0]) {\n                            if (siblingList[0]) {\n                               siblingList.append(formatNode);\n                               siblingList.append($(nestedList).children());\n                               dom.remove(nestedList);\n                            } else {\n                                sibling.append(nestedList);\n                                nestedList.insertBefore(formatNode, nestedList.firstChild);\n                            }\n                        } else {\n                            nestedList = sibling.children(\"ul,ol\")[0];\n                            if (!nestedList) {\n                                nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                                sibling.append(nestedList);\n                            }\n\n                            while (formatNode && formatNode.parentNode == parentList) {\n                                nestedList.appendChild(formatNode);\n                                formatNode = targets.shift();\n                            }\n                        }\n                    } else {\n                        var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                        indent(formatNode, marginLeft);\n\n                        for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                            if ($.contains(formatNode, targets[targetIndex])) {\n                                targets.splice(targetIndex, 1);\n                            }\n                        }\n                    }\n                }\n            } else {\n                var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n                formatter.apply(nodes);\n            }\n        },\n\n        getListTypeAttr: function(list) {\n            var type = list.getAttribute(\"type\");\n            var styleType = list.style.listStyleType;\n\n            return type ? { type: type } : { style: { listStyleType: styleType } };\n        },\n\n        mapImmutables: function(nodes) {\n            if (!this.immutables) {\n                return nodes;\n            } else {\n                var immutables = [];\n                return $.map(nodes, function(node) {\n                    var immutable = Editor.Immutables.immutableParent(node);\n                    if (immutable) {\n                        if ($.inArray(immutable, immutables) === -1) {\n                            immutables.push(immutable);\n                        } else {\n                            return null;\n                        }\n                    }\n                    return immutable || node;\n                });\n            }\n        },\n\n        remove: function(nodes) {\n            nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n            var formatNodes = this.finder.findSuitable(nodes),\n                targetNode, i, len, list, listParent, siblings,\n                formatNode, marginLeft;\n\n            formatNodes = this.mapImmutables(formatNodes);\n\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                formatNode = $(formatNodes[i]);\n\n                if (formatNode.is(\"li\")) {\n                    list = formatNode.parent();\n                    listParent = list.parent();\n                    // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                    if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                        // skip already processed nodes\n                        if (targetNode && $.contains(targetNode, listParent[0])) {\n                            continue;\n                        }\n\n                        siblings = formatNode.nextAll(\"li\");\n                        if (siblings.length) {\n                            $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                        }\n\n                        if (listParent.is(\"li\")) {\n                            formatNode.insertAfter(listParent);\n                        } else {\n                            formatNode.appendTo(listParent);\n                        }\n\n                        if (!list.children(\"li\").length) {\n                            list.remove();\n                        }\n\n                        continue;\n                    } else {\n                        if (targetNode == list[0]) {\n                            // removing format on sibling LI elements\n                            continue;\n                        }\n                        targetNode = list[0];\n                    }\n                } else {\n                    targetNode = formatNodes[i];\n                }\n\n                marginLeft = parseInt(indent(targetNode), 10) - 30;\n                indent(targetNode, marginLeft);\n            }\n        }\n\n    });\n\n    var IndentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = /** @ignore */ {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.apply(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            options.formatter = {\n                toggle: (function(range) {\n                    var indentFormatter = new IndentFormatter();\n                    indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                    indentFormatter.remove(RangeUtils.nodes(range));\n                }).bind(that)\n            };\n            Command.fn.init.call(this, options);\n        }\n    });\n\n    var OutdentTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n        },\n\n        initialize: function(ui, editor) {\n            $.extend(this.options, {\n                immutables: editor && editor.options.immutables\n            });\n        },\n\n        update: function(ui, nodes) {\n            var suitableNodes = this.finder.findSuitable(nodes),\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n                isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n            for (i = 0, len = suitableNodes.length; i < len; i++) {\n                suitable = suitableNodes[i];\n\n                if (this.options.immutables) {\n                    immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                    if (immutableParent) {\n                        suitable = immutableParent;\n                    }\n                }\n\n                isOutdentable = indent(suitable);\n\n                if (!isOutdentable) {\n                    listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                    isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                    (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n                }\n\n                if (isOutdentable) {\n                    toolbar.enable(ui, true);\n                    return;\n                }\n            }\n\n            toolbar.enable(ui, false);\n        }\n    });\n\n    extend(Editor, {\n        IndentFormatter: IndentFormatter,\n        IndentCommand: IndentCommand,\n        OutdentCommand: OutdentCommand,\n        OutdentTool: OutdentTool\n    });\n\n    registerTool(\"indent\", new Tool({ command: IndentCommand }));\n    registerTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        extend = $.extend,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        Command = editorNS.Command,\n        Tool = editorNS.Tool,\n        BlockFormatter = editorNS.BlockFormatter,\n        normalize = dom.normalize,\n        RangeUtils = editorNS.RangeUtils,\n        registerTool = editorNS.EditorUtils.registerTool;\n\n    var ParagraphCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        _insertMarker: function(doc, range) {\n            var marker = dom.create(doc, 'a'), container;\n            marker.className = \"k-marker\";\n\n            range.insertNode(marker);\n\n            if (!marker.parentNode) {\n                // inserting paragraph in Firefox full body range\n                container = range.commonAncestorContainer;\n                container.innerHTML = \"\";\n                container.appendChild(marker);\n            }\n\n            normalize(marker.parentNode);\n\n            return marker;\n        },\n\n        _moveFocus: function(range, candidate) {\n            if (dom.isEmpty(candidate)) {\n                range.setStartBefore(candidate);\n            } else {\n                range.selectNodeContents(candidate);\n\n                var focusNode = RangeUtils.textNodes(range)[0];\n\n                if (!focusNode) {\n                    while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                        candidate = candidate.firstChild;\n                    }\n\n                    focusNode = candidate;\n                }\n\n                if (dom.isEmpty(focusNode)) {\n                    range.setStartBefore(focusNode);\n                } else {\n                    if (dom.emptyNode(focusNode)) {\n                        focusNode.innerHTML = \"\\ufeff\";\n                    }\n                    var startNode = focusNode.firstChild || focusNode;\n                    if (dom.isDataNode(startNode)) {\n                        range.setStart(startNode, 0);\n                    } else {\n                        range.setStartBefore(startNode);\n                    }\n                }\n            }\n        },\n\n        shouldTrim: function(range) {\n            var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n                startInBlock = dom.parentOfType(range.startContainer, blocks),\n                endInBlock = dom.parentOfType(range.endContainer, blocks);\n            return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n        },\n\n        _blankAfter: function(node) {\n            while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n                node = node.nextSibling;\n            }\n\n            return !node;\n        },\n\n        exec: function() {\n            var range = this.getRange(),\n                doc = RangeUtils.documentFromRange(range),\n                parent, previous, next,\n                emptyParagraphContent = editorNS.emptyElementContent,\n                paragraph, marker, li, heading, tableNode, rng,\n                shouldTrim;\n\n            this.expandImmutablesIn(range);\n\n            shouldTrim = this.shouldTrim(range);\n\n            range.deleteContents();\n            marker = this._insertMarker(doc, range);\n\n            dom.stripBomNode(marker.previousSibling);\n            dom.stripBomNode(marker.nextSibling);\n\n            li = dom.closestEditableOfType(marker, ['li']);\n            heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n            tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n            if (li) {\n                // hitting 'enter' in empty li\n                if (dom.emptyNode(li)) {\n                    paragraph = dom.create(doc, 'p');\n\n                    if (dom.next(li)) {\n                        rng = range.cloneRange();\n                        rng.selectNode(li);\n\n                        RangeUtils.split(rng, li.parentNode);\n                    }\n\n                    var br = $(\"br\", li);\n                    if (br.length == 1) {\n                        br.remove();\n                    }\n\n                    var parentNode = li.parentNode;\n                    var parentChildrenLength = li.parentNode.children.length;\n                    var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                    dom.insertAfter(paragraph, parentNode);\n                    dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                    if (firstChild && firstChild !== marker) {\n                        paragraph.appendChild(firstChild);\n                        paragraph.appendChild(marker);\n                    } else {\n                        paragraph.innerHTML = emptyParagraphContent;\n                    }\n                    next = paragraph;\n                }\n            } else if (heading && this._blankAfter(marker)) {\n                paragraph = this._insertParagraphAfter(heading);\n                dom.remove(marker);\n                next = paragraph;\n            } else if (tableNode) {\n                paragraph = this._insertParagraphAfter(tableNode);\n                dom.remove(marker);\n                next = paragraph;\n            }\n\n            if (!next) {\n                if (!(li || heading)) {\n                    new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                }\n\n                range.selectNode(marker);\n\n                parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n                RangeUtils.split(range, parent, shouldTrim);\n\n                previous = parent.previousSibling;\n\n                if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                    previous = previous.firstChild;\n                }\n\n                next = parent.nextSibling;\n\n                this.clean(previous, { links: true });\n                this.clean(next, { links: true });\n\n                if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                    next = next.firstChild;\n                }\n\n                dom.remove(parent);\n\n                // normalize updates the caret display in Gecko\n                normalize(previous);\n            }\n\n            normalize(next);\n\n            this._moveFocus(range, next);\n\n            range.collapse(true);\n\n            dom.scrollTo(next, true);\n\n            RangeUtils.selectRange(range);\n        },\n\n        _insertParagraphAfter: function(node) {\n            var range = this.getRange();\n            var doc = RangeUtils.documentFromRange(range);\n            var emptyElementContent = editorNS.emptyElementContent;\n            var paragraph = dom.create(doc, 'p');\n\n            dom.insertAfter(paragraph, node);\n            paragraph.innerHTML = emptyElementContent;\n\n            return paragraph;\n        },\n\n        clean: function(node, options) {\n            var root = node;\n\n            if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                dom.remove(node.firstChild);\n            }\n\n            if (dom.isDataNode(node) && !node.nodeValue) {\n                node = node.parentNode;\n            }\n\n            if (node) {\n                var siblings = false;\n                while (node.firstChild && node.firstChild.nodeType == 1) {\n                    siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                    node = node.firstChild;\n                }\n\n                if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                    $(root).find(\".k-br\").remove();\n                    node.innerHTML = editorNS.emptyElementContent;\n                }\n\n                if (options && options.links) {\n                    while (node != root) {\n                        if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                            dom.unwrap(node);\n                            break;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n            }\n        }\n    });\n\n    var NewLineCommand = Command.extend({\n        init: function(options) {\n            this.options = options;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.getRange();\n            this.expandImmutablesIn(range);\n\n            var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n            var node = range.startContainer;\n            var filler;\n            var browser = kendo.support.browser;\n            var oldIE = browser.msie && browser.version < 11;\n            var tableNode = dom.is(node, 'table') && node;\n            var kbrParent;\n\n            range.deleteContents();\n            if (tableNode) {\n                dom.insertAfter(br, tableNode);\n            } else {\n                kbrParent = $(node).closest('.k-br');\n                range.insertNode(br);\n\n                if (kbrParent.length) {\n                    // pressing enter in an k-br node\n                    dom.unwrap(kbrParent[0]);\n                }\n            }\n\n            normalize(br.parentNode);\n\n            if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                // Gecko and WebKit cannot put the caret after only one br.\n                if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                    $(br.nextSibling).remove();\n                }\n                filler = br.cloneNode(true);\n                filler.className = 'k-br';\n                dom.insertAfter(filler, br);\n            }\n\n            range.setStartAfter(br);\n            range.collapse(true);\n\n            dom.scrollTo(br.nextSibling || br, true);\n\n            RangeUtils.selectRange(range);\n        }\n    });\n\n    extend(editorNS, {\n        ParagraphCommand: ParagraphCommand,\n        NewLineCommand: NewLineCommand\n    });\n\n    registerTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\n    registerTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n        LinkFormatter = Editor.LinkFormatter,\n        textNodes = RangeUtils.textNodes,\n        keys = kendo.keys,\n        KEDITORFILEURL = \"#k-editor-file-url\",\n        KEDITORFILETEXT = \"#k-editor-file-text\",\n        KEDITORFILETITLE = \"#k-editor-file-title\";\n\n    var FileCommand = Command.extend({\n        init: function(options) {\n            var that = this;\n            Command.fn.init.call(that, options);\n\n            that.formatter = new LinkFormatter();\n\n            that.async = true;\n            that.attributes = {};\n        },\n\n        insertFile: function(file, range) {\n            var attributes = this.attributes;\n            var doc = RangeUtils.documentFromRange(range);\n\n            if (attributes.href && attributes.href != \"http://\") {\n\n                if (!file) {\n                    file = dom.create(doc, \"a\", { href: attributes.href });\n                    file.innerHTML = attributes.innerHTML;\n                    file.title = attributes.title;\n\n                    range.deleteContents();\n                    range.insertNode(file);\n\n                    if (!file.nextSibling) {\n                        dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                    }\n\n                    range.setStartAfter(file);\n                    range.setEndAfter(file);\n                    RangeUtils.selectRange(range);\n                    return true;\n                } else {\n                    dom.attr(file, attributes);\n                }\n            }\n\n            return false;\n        },\n\n        redo: function() {\n            var that = this,\n                range = that.lockRange();\n\n            this.formatter.apply(range, this.attributes);\n            that.releaseRange(range);\n        },\n\n        exec: function() {\n            var that = this,\n                range = that.lockRange(),\n                nodes = textNodes(range),\n                applied = false,\n                file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n                dialog,\n                form,\n                isIE = kendo.support.browser.msie,\n                options = that.editor.options,\n                messages = options.messages,\n                fileBrowser = options.fileBrowser,\n                showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n                dialogOptions = {\n                    title: messages.insertFile,\n                    visible: false,\n                    resizable: showBrowser\n                };\n\n            this.expandImmutablesIn(range);\n\n            function apply(e) {\n                var element = dialog.element,\n                    href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                    innerHTML = element.find(KEDITORFILETEXT).val(),\n                    title = element.find(KEDITORFILETITLE).val();\n\n                that.attributes = {\n                    href: href,\n                    innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                    title: title\n                };\n\n                applied = that.insertFile(file, range);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n            }\n\n            function close(e) {\n                e.preventDefault();\n                form.destroy();\n                dialog.destroy();\n\n                dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                if (!applied) {\n                    that.releaseRange(range);\n                }\n            }\n\n            function keyDown(e) {\n                if (e.keyCode == keys.ENTER) {\n                    apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    close(e);\n                }\n            }\n\n            dialogOptions.close = close;\n\n            if (showBrowser) {\n                dialogOptions.width = 750;\n            }\n            dialogOptions.minWidth = 350;\n\n            dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n            form = that._createForm(dialog, showBrowser);\n\n            dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n            dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n            var element = dialog.element;\n            if (showBrowser) {\n                that._fileBrowser = new kendo.ui.FileBrowser(\n                    element.find(\".k-filebrowser\"),\n                    extend({}, fileBrowser)\n                );\n\n                that._fileBrowser.bind(\"change\", function(ev) {\n                    if (ev.selected.get(\"type\") === \"f\") {\n                        element.find(KEDITORFILEURL).val(this.value());\n                    }\n                } );\n\n                that._fileBrowser.bind(\"apply\", apply);\n            }\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n            dialog.center().open();\n            element.find(KEDITORFILEURL).trigger(\"focus\").select();\n        },\n\n        _createForm: function(dialog, showBrowser) {\n            var that = this;\n            var formElement = $(\"<div/>\").appendTo(dialog.element);\n            var messages = that.editor.options.messages;\n\n            var form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-file-url\",\n                        label: encode(messages.fileWebAddress),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-text\",\n                        label: encode(messages.fileText),\n                        editor: \"TextBox\"\n                    },\n                    {\n                        field: \"k-editor-file-title\",\n                        label: encode(messages.fileTitle),\n                        editor: \"TextBox\"\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            if (showBrowser) {\n                formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n            }\n\n            dialog.element.after($(that._actionButtonsTemplate({ messages: messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n            return form;\n        }\n\n    });\n\n    kendo.ui.editor.FileCommand = FileCommand;\n\n    registerTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        Command = Editor.Command,\n\n        NS = \"kendoEditor\",\n        ACTIVESTATE = \"k-active\",\n        SELECTEDSTATE = \"k-selected\",\n        SCOPE = \"scope\",\n        ROW = \"row\",\n        COL = \"col\",\n        ROWGROUP = \"rowgroup\",\n        COLGROUP = \"colgroup\",\n        COLSPAN = \"colspan\",\n        ROWSPAN = \"rowspan\",\n        TABLE = \"table\",\n        THEAD = \"thead\",\n        TBODY = \"tbody\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n\n        Tool = Editor.Tool,\n        InsertHtmlCommand = Editor.InsertHtmlCommand,\n        BlockFormatFinder = Editor.BlockFormatFinder,\n        BlockFormatTool = Editor.BlockFormatTool,\n        FormatCommand = Editor.FormatCommand,\n        registerTool = Editor.EditorUtils.registerTool,\n        registerFormat = Editor.EditorUtils.registerFormat,\n        formats = kendo.ui.Editor.fn.options.formats,\n        getTouches = kendo.getTouches;\n    var template = kendo.template;\n\n    var columnTemplate = function (ref) {\n        var width = ref.width;\n        var content = ref.content;\n\n        return (\"<td style=\\\"width:\" + width + \"%;\\\">\" + content + \"</td>\");\n    };\n\n    var tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\n    var TableCommand = InsertHtmlCommand.extend({\n        init: function(options) {\n            var o = $.extend({\n                postProcess: this.postProcess,\n                skipCleaners: true\n            }, options || {});\n\n            InsertHtmlCommand.fn.init.call(this, o);\n        },\n        _tableHtml: function(rows, columns) {\n            rows = rows || 1;\n            columns = columns || 1;\n            var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n            var rowHeight = 100 / rows;\n\n            return \"<table class='k-table' data-last>\" +\n                        new Array(rows + 1).join(\n                        \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                            new Array(columns + 1).join(columnHtml) +\n                        \"</tr>\") +\n                   \"</table>\";\n        },\n\n        postProcess: function(editor, range) {\n            var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n            range.setStart(insertedTable.find(TD)[0], 0);\n            range.collapse(true);\n\n            editor.selectRange(range);\n        },\n\n        exec: function() {\n            var options = this.options;\n            options.html = this._tableHtml(options.rows, options.columns);\n\n            InsertHtmlCommand.fn.exec.call(this);\n        }\n    });\n\n    var PopupTool = Tool.extend({\n        initialize: function(ui, editor) {\n            var that = this;\n            var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n            var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                copyAnchorStyles: false,\n                open: this._open.bind(this),\n                activate: this._activate.bind(this),\n                close: this._close.bind(this)\n            }).data(\"kendoPopup\");\n\n            ui.on(\"click\", this._toggle.bind(this))\n              .on(\"keydown\", this._keydown.bind(this));\n\n            this._editor = editor;\n            this._popup = popup;\n\n            editor.tablePopup = this._popup;\n\n            var tableWizard = new Editor.TableWizardTool({\n                command: Editor.TableWizardCommand,\n                insertNewTable: true\n            });\n\n            registerTool(\"tableWizardInsert\", tableWizard);\n\n            btn.appendTo(popup.element);\n            btn.kendoButton({\n                icon: \"table-wizard\"\n            });\n\n            btn.on(\"click\", function () {\n                that._editor.exec(\"tableWizardInsert\");\n            });\n        },\n\n        popup: function() {\n            return this._popup;\n        },\n\n        _activate: $.noop,\n\n        _open: function() {\n            this._popup.options.anchor.addClass(ACTIVESTATE);\n        },\n\n        _close: function() {\n            this._popup.options.anchor.removeClass(ACTIVESTATE);\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                keys = kendo.keys,\n                key = e.keyCode;\n\n            if (key == keys.ESC) {\n                that._popup.close();\n            } else if (key == keys.DOWN && e.altKey) {\n                that._popup.open();\n                that._setTableSize({ row: 1, col: 1 });\n            } else if (key === keys.ENTER) {\n                setTimeout(function () {\n                    that._setTableSize({ row: 1, col: 1 });\n                });\n            }\n        },\n\n        _toggle: function(e) {\n            var button = $(e.target).closest(\".k-tool\");\n\n            if (!button.hasClass(\"k-disabled\")) {\n                this.popup().toggle();\n            }\n        },\n\n        update: function(ui) {\n            var popup = this.popup();\n\n            if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n                popup.close();\n            }\n\n            ui.removeClass(\"k-hover\");\n        },\n\n        destroy: function() {\n            if (this._popup) {\n                this._popup.destroy();\n            }\n        }\n    });\n\n    var InsertTableTool = PopupTool.extend({\n        init: function(options) {\n            this.cols = 8;\n            this.rows = 6;\n\n            PopupTool.fn.init.call(this, $.extend(options, {\n                command: TableCommand,\n                popupTemplate:\n                    \"<div class='k-ct-popup'>\" +\n                        \"<div>\" +\n                            new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                        \"</div>\" +\n                        \"<div class='k-status'></div>\" +\n                    \"</div>\"\n            }));\n        },\n\n        _activate: function() {\n            var that = this,\n                element = that._popup.element,\n                cells = element.find(\".k-ct-cell\"),\n                firstCell = cells.eq(0),\n                lastCell = cells.eq(cells.length - 1),\n                start = kendo.getOffset(firstCell),\n                end = kendo.getOffset(lastCell),\n                cols = that.cols,\n                rows = that.rows,\n                cellWidth, cellHeight;\n\n            element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n            end.left += lastCell[0].offsetWidth;\n            end.top += lastCell[0].offsetHeight;\n\n            cellWidth = (end.left - start.left) / cols;\n            cellHeight = (end.top - start.top) / rows;\n\n            function tableFromLocation(e) {\n                var w = $(window);\n                return {\n                    row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                    col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                };\n            }\n\n            element.autoApplyNS(NS)\n                .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                    that._setTableSize(tableFromLocation(e));\n                })\n                .on(\"mouseleave\", \".k-ct-cell\", function() {\n                    that._setTableSize();\n                })\n                .on(\"down\", \".k-ct-cell\", function(e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n        },\n\n        _valid: function(size) {\n            return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n        },\n\n        _exec: function(size) {\n            if (this._valid(size)) {\n                this._editor.exec(\"createTable\", {\n                    rows: size.row,\n                    columns: size.col\n                });\n                this._popup.close();\n            }\n        },\n\n        _setTableSize: function(size) {\n            var element = this._popup.element;\n            var status = element.find(\".k-status\");\n            var cells = element.find(\".k-ct-cell\");\n            var cols = this.cols;\n            var messages = this._editor.options.messages;\n\n            if (this._valid(size)) {\n                status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n                cells.each(function(i) {\n                    $(this).toggleClass(\n                        SELECTEDSTATE,\n                        i % cols < size.col && i / cols < size.row\n                    );\n                });\n            } else {\n                status.text(messages.createTable);\n                cells.removeClass(SELECTEDSTATE);\n            }\n        },\n\n        _keydown: function(e) {\n            var initiallyVisible = this._popup.visible();\n\n            PopupTool.fn._keydown.call(this, e);\n\n            if (!this._popup.visible()) {\n                return;\n            }\n\n            var keys = kendo.keys;\n            var key = e.keyCode;\n            var cells = this._popup.element.find(\".k-ct-cell\");\n            var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n            var selectedRows = Math.floor(focus / this.cols);\n            var selectedColumns = focus % this.cols;\n\n            var changed = false,\n                button;\n\n            if (key == keys.DOWN && !e.altKey) {\n                changed = true;\n                selectedRows++;\n            } else if (key == keys.UP) {\n                changed = true;\n                selectedRows--;\n            } else if (key == keys.RIGHT) {\n                changed = true;\n                selectedColumns++;\n            } else if (key == keys.LEFT) {\n                changed = true;\n                selectedColumns--;\n            } else if (key == keys.TAB) {\n                button = this._popup.element.find(\".k-button\");\n\n                if (button.length > 0) {\n                    changed = true;\n                    button.trigger(\"focus\");\n                }\n            }\n\n            var tableSize = {\n                row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n            };\n\n            if (key == keys.ENTER && initiallyVisible) {\n                this._exec(tableSize);\n            } else {\n                this._setTableSize(tableSize);\n            }\n\n            if (changed) {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n            }\n        },\n\n        _open: function() {\n            var messages = this._editor.options.messages;\n\n            PopupTool.fn._open.call(this);\n\n            this.popup().element\n                .find(\".k-status\").text(messages.createTable).end()\n                .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n        },\n\n        _close: function() {\n            PopupTool.fn._close.call(this);\n            this.popup().element.off(\".\" + NS);\n        }\n    });\n\n    var TableModificationCommand = Command.extend({\n        undo: function() {\n            var point = this.restorePoint;\n            point.restoreHtml();\n\n            $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n                .each(function(index,el) {\n                    el.remove();\n                });\n\n            this.editor.selectRange(point.toRange());\n        },\n        _clearColIndexAttr: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n        },\n        _mapColIndices: function(table) {\n            dom.reMapTableColumns(table, \"col-index\");\n        },\n        _findRowSpanCell: function(parent, rowIndex, colIndex) {\n            var row, cell;\n\n            for (var i = rowIndex; i >= 0; i--) {\n                row = parent.rows[i];\n                cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n                if (cell.length) {\n                    return cell;\n                }\n            }\n        },\n        _resetElementResizing: function(editor) {\n            editor._destroyResizings();\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n        _findNextTdInRow: function(row, colIndex) {\n            var lastTd = row.find(\"td:last-child\"),\n                lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n                td;\n\n            for (var i = colIndex; i <= lastIndex; i++) {\n                td = row.find(\"[col-index=\" + i + \"]\");\n                if (td.length) {\n                    return td;\n                }\n            }\n        },\n        _adjustColgroups: function(row, table) {\n            var colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                cells = row.cells,\n                numberOfCells = cells.length,\n                i, colgroup, cell;\n\n            while (colElements.length > 0) {\n                colElements[0].remove();\n            }\n            while (colgroupElements.length > 0) {\n                colgroupElements[0].remove();\n            }\n\n            for (i = numberOfCells - 1; i >= 0; i--) {\n                cell = cells[i];\n                if (cell.getAttribute(SCOPE) === COLGROUP) {\n                    colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                    colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                    table.prepend(colgroup);\n                } else {\n                    table.prepend(dom.createEmptyNode(this.editor.document, COL));\n                }\n            }\n        },\n        _associateHeaderIds: function(table) {\n            dom.clearTableMappings(table, \"col-index\");\n            dom.reMapTableColumns(table, \"col-index\");\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n            dom.associateWithIds(table);\n        },\n        _getNumberOfColumns: function(table) {\n            return dom._getNumberOfColumns(table, \"td, th\");\n        }\n    });\n\n    var InsertRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                position = this.options.position || \"after\",\n                cellCount, row, cell,\n                newRow, rowIndex, rowSpanIndex, createdCell;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            row = td.parentNode;\n            rowIndex = dom.findNodeIndex(row, true);\n\n            if (td.rowSpan > 1 && position === \"after\") {\n                row = table.rows[rowIndex + td.rowSpan - 1];\n            }\n\n            cellCount = this._getNumberOfColumns(table);\n            newRow = row.cloneNode(true);\n            $(newRow).empty();\n\n            for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    } else {\n                        this._appendCell(newRow, cell);\n                    }\n                } else {\n                    rowIndex = dom.findNodeIndex(row, true);\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                    rowSpanIndex = cell.closest(TR).index();\n\n                    if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                        this._appendCell(newRow, cell);\n                    } else {\n                        cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                    }\n                }\n\n                createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n                if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                    createdCell.attr(SCOPE, ROW);\n                }\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newRow, row);\n            } else {\n                dom.insertAfter(newRow, row);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _appendCell: function(row, cell) {\n            var newCell;\n\n            newCell = cell.clone();\n            newCell.html(Editor.emptyTableCellContent);\n            newCell.removeAttr(ROWSPAN);\n            newCell.appendTo(row);\n        }\n    });\n\n    var InsertColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(true),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                columnIndex,\n                i,\n                rows = table && table.rows,\n                cell,\n                newCell,\n                position = this.options.position || \"after\";\n\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n            if (td.colSpan > 1 && position === \"after\") {\n                td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n                columnIndex = columnIndex + td.colSpan - 1;\n            }\n\n            for (i = 0; i < rows.length; i++) {\n                cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n                if (!cell) {\n                    continue;\n                }\n\n                newCell = cell.cloneNode();\n                newCell.innerHTML = Editor.emptyTableCellContent;\n                newCell.removeAttribute(COLSPAN);\n\n                if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                    newCell.setAttribute(SCOPE, COL);\n                }\n\n                if (position == \"before\") {\n                    dom.insertBefore(newCell, cell);\n                } else {\n                    dom.insertAfter(newCell, cell);\n                }\n\n                this._resizeCells(newCell, cell);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n\n            this._resetElementResizing(this.editor);\n        },\n        _processForColSpan: function(row, columnIndex, position, selectedCell) {\n            var cell,\n                colSpanEffect,\n                index = columnIndex - 1;\n\n            cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n            if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n                cell.colSpan += 1;\n                return;\n            }\n\n            if (cell) {\n                return cell;\n            }\n\n            for (index; index >= 0; index--) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n                if (cell && cell.colSpan > 1) {\n                    break;\n                }\n            }\n\n            if (!cell) {\n                return;\n            }\n\n            colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n            if (colSpanEffect === columnIndex && position === \"after\") {\n                return cell;\n            } else if (columnIndex <= colSpanEffect) {\n                cell.setAttribute(COLSPAN, cell.colSpan + 1);\n            }\n        },\n        _resizeCells: function(newCell, cell) {\n            var width = newCell.style.width,\n            parsedWidth, unit, calculatedWidth;\n\n            if (!width) {\n                return;\n            }\n\n            parsedWidth = parseFloat(width);\n            unit = width.slice(parsedWidth.toString().length);\n            calculatedWidth = (parsedWidth / 2) + unit;\n\n            newCell.style.width = calculatedWidth;\n            cell.style.width = calculatedWidth;\n        }\n    });\n\n    var DeleteRowCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange();\n            var rows = RangeUtils.mapAll(range, function(node) {\n                return $(node).closest(TR)[0];\n            });\n            var td = dom.closest(range.endContainer, [TD, TH]);\n            var row = rows[0];\n            var rowSpan = td ? td.rowSpan : 1;\n            var rowIndex = $(rows[0]).index();\n            var table = dom.closest(row, TABLE);\n            var rowParent = row.parentElement;\n            var focusElement;\n\n            if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            for (var x = 0; x < rowSpan; x++) {\n                if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                    rows.push(rowParent.rows[rowIndex + x]);\n                }\n            }\n\n            if (table.rows.length <= rows.length) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else if (rowParent.rows.length <= rows.length) {\n                focusElement = rowParent.nextSibling;\n\n                if (!focusElement) {\n                    focusElement = rowParent.previousSibling;\n                }\n\n                dom.remove(rowParent);\n            } else {\n                this._mapColIndices(table);\n\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    dom.removeTextSiblings(row);\n                    focusElement = dom.next(row) || dom.prev(row);\n                    focusElement = focusElement.cells[0];\n\n                    // IE needs to focus the new row before removing the old one\n                    this._focusElement(range, focusElement);\n                    focusElement = null;\n\n                    this._handleRowSpanCells(table, row);\n\n                    dom.remove(row);\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n                this._adjustColgroups(rowParent.rows[0], table);\n            }\n\n            if (focusElement) {\n                this._focusElement(range, focusElement);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _focusElement: function(range, node) {\n            range.setStart(node, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        },\n        _handleRowSpanCells: function(table, row) {\n            var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n                firstRow = table.rows[0],\n                lastCell = firstRow.cells[firstRow.cells.length - 1],\n                lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n            for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n                cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n                if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                    nextRow = table.rows[rowIndex + 1];\n                    adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                    if (adjacentCell.length) {\n                        adjacentCell.before(cell);\n                    } else {\n                        $(nextRow).append(cell);\n                    }\n                    this._reduceRowSpan(cell);\n                }\n\n                if (!cell.length) {\n                    cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                    this._reduceRowSpan(cell);\n                }\n            }\n        },\n        _reduceRowSpan: function(td) {\n            var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n            if (rowSpanValue <= 1) {\n                td.removeAttr(ROWSPAN);\n                if (td.attr(SCOPE) === ROWGROUP) {\n                    td.attr(SCOPE, ROW);\n                }\n            } else {\n                td.attr(ROWSPAN, rowSpanValue);\n            }\n        }\n    });\n\n    var DeleteColumnCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table = dom.closest(td, TABLE),\n                rows = table && table.rows,\n                columnIndex = dom.findNodeIndex(td, true),\n                columnCount = rows && rows[0].cells.length,\n                colElements = table.getElementsByTagName(COL),\n                colgroupElements = table.getElementsByTagName(COLGROUP),\n                focusElement, i, cell, x;\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            if (columnCount == 1 || td.colSpan == columnCount) {\n                focusElement = dom.next(table);\n                if (!focusElement || dom.insignificant(focusElement)) {\n                    focusElement = dom.prev(table);\n                }\n\n                if (focusElement && focusElement.rows) {\n                    focusElement = focusElement.rows[0].cells[0];\n                }\n\n                dom.remove(table);\n                this._resetElementResizing(this.editor);\n            } else {\n                dom.removeTextSiblings(td);\n\n                focusElement = dom.next(td) || dom.prev(td);\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n                for (x = 0; x < td.colSpan; x++) {\n                    for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                        cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                        if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                            cell.remove();\n                        } else {\n                            this._handleColSpanCells(rows[i], columnIndex + x);\n                        }\n                    }\n                }\n\n                this._clearColIndexAttr(table);\n            }\n\n            if (colElements.length > 0 || colgroupElements.length > 0) {\n                this._adjustColgroups(rows[0], table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            if (focusElement) {\n                range.setStart(focusElement, 0);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            }\n\n            this._resetElementResizing(this.editor);\n        },\n        _handleColSpanCells: function(row, colIndex) {\n            var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length && cell.prop(\"colSpan\") > 1) {\n                var clone = cell.clone(true);\n                cell.after(clone);\n                this._reduceColSpan(clone);\n                clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                cell.remove();\n                return;\n            }\n\n            for (var i = colIndex; i >= 0; i--) {\n                cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n                if (cell.length) {\n                    this._reduceColSpan(cell);\n                    cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                    return;\n                }\n            }\n        },\n        _reduceColSpan: function(td) {\n            var colSpanValue = td.prop(\"colSpan\") - 1;\n\n            if (colSpanValue <= 1) {\n                td.removeAttr(COLSPAN);\n                if (td.attr(SCOPE) === COLGROUP) {\n                    td.attr(SCOPE, COL);\n                }\n            } else {\n                td.attr(COLSPAN, colSpanValue);\n            }\n        }\n    });\n\n    var MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                table, row, columnIndex, nextTd, colspan;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                table = dom.closest(td, TABLE);\n                row = td.parentNode;\n                columnIndex = dom.findNodeIndex(td, true);\n                nextTd = row.children[columnIndex + 1];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n                nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n                if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n                $(td).prop(COLSPAN, colspan)\n                     .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n                $(td).width(td.offsetWidth);\n                $(nextTd).remove();\n\n                if (td.getAttribute(SCOPE) === COL) {\n                    td.setAttribute(SCOPE, COLGROUP);\n                }\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    this._adjustColgroups(row, table);\n                }\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                this._resetElementResizing(this.editor);\n        },\n        _getColspan: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n        }\n    });\n\n    var MergeCellsVerticallyCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                td = dom.closest(range.endContainer, [TD, TH]),\n                tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n                if (!td) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                tr = dom.closest(td, TR);\n                parent = dom.closest(td, [THEAD, TBODY]);\n                table = dom.closest(td, TABLE);\n                columnIndex = dom.findNodeIndex(td, true);\n                rowIndex = dom.findNodeIndex(tr, true);\n\n                if (rowIndex + 1 === parent.rows.length) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n                bottomTd = targetRow && targetRow.children[columnIndex];\n\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    this.releaseRange(range);\n                    return;\n                }\n\n                this._mapColIndices(table);\n\n                columnIndex = $(td).attr(\"col-index\");\n                bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n                if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                    this._clearColIndexAttr(table);\n                    this.releaseRange(range);\n                    return;\n                }\n\n                $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                     .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n                if (td.getAttribute(SCOPE) === ROW) {\n                    td.setAttribute(SCOPE, ROWGROUP);\n                }\n\n                $(bottomTd).remove();\n\n                if ($(table).find(\"[headers]\").length > 0) {\n                    this._associateHeaderIds(table);\n                }\n\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n        },\n        _getRowspan: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n        }\n    });\n\n    var SplitCellCommand = TableModificationCommand.extend({\n        exec: function() {\n            var range = this.lockRange(),\n                type = this.options.type,\n                attr = type === \"row\" ? COLSPAN : ROWSPAN,\n                td = dom.closest(range.endContainer, [TD, TH]),\n                parent = dom.closest(td, [THEAD, TBODY]),\n                table = dom.closest(td, TABLE),\n                emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n            if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellHorizontally(td, parent, attr, emptyTd);\n            } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n                this._splitCellVertically(td, parent, attr, emptyTd);\n            }\n\n            if ($(td).prop(attr.toLowerCase()) <= 1) {\n                $(td).removeAttr(attr);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n        },\n        _getRowspanValue: function(td) {\n            return parseInt(td.getAttribute(ROWSPAN), 10);\n        },\n        _getColspanValue: function(td) {\n            return parseInt(td.getAttribute(COLSPAN), 10);\n        },\n        _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n            var rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                tdToAdd = $(emptyTd),\n                colSpanResult = Math.floor(colSpan / 2);\n\n                if (colSpanResult > 1) {\n                    tdToAdd.attr(COLSPAN, colSpanResult);\n                }\n\n                if (rowSpan > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpan);\n                }\n\n                $(td).prop(attr, colSpan - colSpanResult)\n                    .after(tdToAdd);\n\n                $(td).width(td.offsetWidth);\n                tdToAdd.width(tdToAdd[0].offsetWidth);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === COLGROUP) {\n                        tdToAdd.attr(SCOPE, COL);\n                        if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, COL);\n                        }\n\n                        this._adjustColgroups(td.parentNode, parent.parentNode);\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        },\n        _splitCellVertically: function(td, parent, attr, emptyTd) {\n            var tr = dom.closest(td,TR),\n                columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n                rowIndex = dom.findNodeIndex(tr, true),\n                rowSpan = td.rowSpan,\n                colSpan = td.colSpan,\n                rowSpanResult = Math.floor(rowSpan / 2),\n                targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n                nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n                tdToAdd = $(emptyTd);\n\n                if (rowSpanResult > 1) {\n                    tdToAdd.attr(ROWSPAN, rowSpanResult);\n                }\n                if (colSpan > 1) {\n                    tdToAdd.attr(COLSPAN, colSpan);\n                }\n\n                if (nextTd && nextTd.length) {\n                    nextTd.before(tdToAdd);\n                } else {\n                    targetRow.append(tdToAdd);\n                }\n\n                $(td).prop(attr, rowSpan - rowSpanResult);\n\n                if (td.hasAttribute(SCOPE)) {\n                    if (td.getAttribute(SCOPE) === ROWGROUP) {\n                        tdToAdd.attr(SCOPE, ROW);\n                        if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                            td.setAttribute(SCOPE, ROW);\n                        }\n                    } else {\n                        tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                    }\n                }\n        }\n    });\n\n    var TableModificationTool = Tool.extend({\n        command: function(options) {\n            var commandsMap = {\n                row: {\n                    insert: InsertRowCommand,\n                    \"delete\": DeleteRowCommand,\n                    merge: MergeCellsHorizontallyCommand,\n                    split: SplitCellCommand\n                },\n                column: {\n                    insert: InsertColumnCommand,\n                    \"delete\": DeleteColumnCommand,\n                    merge: MergeCellsVerticallyCommand,\n                    split: SplitCellCommand\n                }\n            };\n\n            options = extend(options, this.options);\n            options.action = options.action || \"insert\";\n\n            return new commandsMap[options.type][options.action](options);\n        },\n\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    var TableFormatCommand = FormatCommand.extend({\n        exec: function() {\n            var that = this;\n            var editor = that.editor;\n\n            FormatCommand.fn.exec.call(this);\n\n            if (editor.elementResizing) {\n                editor.elementResizing._showResizeHandles();\n            }\n        }\n    });\n\n    // var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n    // });\n\n    var TableFormatTool = BlockFormatTool.extend({\n        update: function(ui, nodes) {\n            var isTable = !tableFormatFinder.isFormatted(nodes),\n                isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (toolbar) {\n                toolbar.toggle(ui, isFormatted);\n            }\n\n            if (isTable === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        },\n        command: function(commandArguments) {\n            var that = this;\n\n            return new TableFormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n        },\n        isTable: function(node) {\n            return dom.is(node, \"table\");\n        }\n    });\n\n    extend(kendo.ui.editor, {\n        PopupTool: PopupTool,\n        TableCommand: TableCommand,\n        InsertTableTool: InsertTableTool,\n        TableFormatTool: TableFormatTool,\n        TableFormatCommand: TableFormatCommand,\n        TableModificationTool: TableModificationTool,\n        InsertRowCommand: InsertRowCommand,\n        InsertColumnCommand: InsertColumnCommand,\n        DeleteRowCommand: DeleteRowCommand,\n        DeleteColumnCommand: DeleteColumnCommand,\n        MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n        MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n        SplitCellCommand: SplitCellCommand\n    });\n\n\n    registerTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\n    registerTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\n    registerTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\n    registerTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\n    registerTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\n    registerTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\n    registerTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\n    registerTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\n    registerTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\n    registerTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\n    registerTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\n    registerFormat(\"tableAlignLeft\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"left\" } }\n    ]);\n    registerTool(\"tableAlignLeft\", new TableFormatTool({\n        format: formats.tableAlignLeft,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignCenter\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n        { tags: [\"table\"], attr: { align: \"center\" } }\n    ]);\n    registerTool(\"tableAlignCenter\", new TableFormatTool({\n        format: formats.tableAlignCenter,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    registerFormat(\"tableAlignRight\", [\n        { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n        { tags: [\"table\"], attr: { align: \"right\" } }\n    ]);\n    registerTool(\"tableAlignRight\", new TableFormatTool({\n        format: formats.tableAlignRight,\n        ui: {\n            togglable: true,\n            group: \"tableAlign\"\n        }\n    }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            Class = kendo.Class,\n            editorNS = kendo.ui.editor,\n            RangeUtils = editorNS.RangeUtils,\n            dom = editorNS.Dom,\n            RestorePoint = editorNS.RestorePoint,\n            Marker = editorNS.Marker,\n            browser = kendo.support.browser,\n            extend = $.extend;\n\n    var Clipboard = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            var pasteCleanup = editor.options.pasteCleanup;\n            this.cleaners = [\n                new ScriptCleaner(pasteCleanup),\n                new TabCleaner(pasteCleanup),\n                new MSWordFormatCleaner(pasteCleanup),\n                new WebkitFormatCleaner(pasteCleanup),\n                new HtmlTagsCleaner(pasteCleanup),\n                new HtmlAttrCleaner(pasteCleanup),\n                new HtmlContentCleaner(pasteCleanup),\n                new CustomCleaner(pasteCleanup) //always keep at end\n            ];\n        },\n\n        htmlToFragment: function(html) {\n            var editor = this.editor,\n                doc = editor.document,\n                container = dom.create(doc, 'div'),\n                fragment = doc.createDocumentFragment();\n\n            container.innerHTML = html;\n\n            while (container.firstChild) {\n                fragment.appendChild(container.firstChild);\n            }\n\n            return fragment;\n        },\n\n        isBlock: function(html) {\n            return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n        },\n\n        _startModification: function() {\n            var range;\n            var restorePoint;\n            var editor = this.editor;\n\n            if (this._inProgress) {\n                return;\n            }\n\n            this._inProgress = true;\n\n            range = editor.getRange();\n            restorePoint = new RestorePoint(range, editor.body);\n\n            dom.persistScrollTop(editor.document);\n\n            return { range: range, restorePoint: restorePoint };\n        },\n\n        _endModification: function(modificationInfo) {\n            editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n            this.editor._selectionChange();\n\n            this._inProgress = false;\n        },\n\n        _contentModification: function(before, after) {\n            var that = this;\n            var editor = that.editor;\n            var modificationInfo = that._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            before.call(that, editor, modificationInfo.range);\n\n            setTimeout(function() {\n                after.call(that, editor, modificationInfo.range);\n\n                that._endModification(modificationInfo);\n            });\n        },\n\n        _removeBomNodes: function(range) {\n            var nodes = RangeUtils.textNodes(range);\n\n            for (var i = 0; i < nodes.length; i++) {\n                nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n            }\n        },\n\n        _onBeforeCopy: function(range) {\n            var marker = new Marker();\n            marker.add(range);\n\n            this._removeBomNodes(range);\n\n            marker.remove(range);\n\n            this.editor.selectRange(range);\n        },\n\n        oncopy: function() {\n            this._onBeforeCopy(this.editor.getRange());\n        },\n\n        oncut: function() {\n            this._onBeforeCopy(this.editor.getRange());\n            this._contentModification($.noop, $.noop);\n        },\n\n        _fileToDataURL: function(blob) {\n            var deferred = $.Deferred();\n\n            var reader = new FileReader();\n\n            if (!(blob instanceof window.File) && blob.getAsFile) {\n                blob = blob.getAsFile();\n            }\n\n            reader.onload = deferred.resolve.bind(deferred);\n\n            reader.readAsDataURL(blob);\n\n            return deferred.promise();\n        },\n\n        _triggerPaste: function(html, options) {\n            var args = { html: html || \"\" };\n\n            args.html = args.html.replace(/\\ufeff/g, \"\");\n\n            this.editor.trigger(\"paste\", args);\n\n            this.paste(args.html, options || {});\n        },\n\n        _handleImagePaste: function(e) {\n            if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n                return;\n            }\n\n            var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                        window.clipboardData || {};\n\n            var items = clipboardData.items || clipboardData.files;\n\n            return this._insertImages(items);\n        },\n\n        _insertImages: function(items) {\n            if (!items) {\n                return;\n            }\n\n            var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n            var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n            if (html.length || !images.length) {\n                return;\n            }\n\n            var modificationInfo = this._startModification();\n\n            if (!modificationInfo) {\n                return;\n            }\n\n            $.when.apply($, $.map(images, this._fileToDataURL))\n                .done((function() {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function(e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join(\"\");\n\n                    this._triggerPaste(html);\n\n                    this._endModification(modificationInfo);\n                }).bind(this));\n\n            return true;\n        },\n\n        onpaste: function(e) {\n            if (this.editor.body.contentEditable === \"false\") {\n                return;\n            }\n\n            if (this._handleImagePaste(e)) {\n                e.preventDefault();\n                return;\n            }\n\n            this.expandImmutablesIn();\n\n            this._contentModification(\n                function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                            className: 'k-paste-container',\n                            innerHTML: \"\\ufeff\"\n                        });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n\n                    this._decoreateClipboardNode(clipboardNode, body);\n\n                    body.appendChild(clipboardNode);\n\n                    //Browser scrolls to clipboardNode\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n\n                    // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).off('paste');\n                        textRange.execCommand('Paste');\n                        $(body).on('paste', this.onpaste.bind(this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n\n                    range.deleteContents();\n                },\n                function afterPaste(editor, range) {\n                    var html = \"\", containers;\n\n                    editor.selectRange(range);\n\n                    containers = $(editor.body).children(\".k-paste-container\");\n\n                    containers.each(function() {\n                        var lastChild = this.lastChild;\n\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n\n                        html += this.innerHTML;\n                    });\n\n                    containers.remove();\n\n                    this._triggerPaste(html, { clean: true });\n                }\n            );\n        },\n        ondragover: function(e) {\n            if (browser.msie || browser.edge) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        },\n        ondrop: function(e) {\n            if (!('FileReader' in window)) {\n                return;\n            }\n\n            var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n            var items = dataTransfer.items || dataTransfer.files;\n\n            if (this._insertImages(items)) {\n                e.preventDefault();\n            }\n        },\n        _decoreateClipboardNode: function(node, body) {\n            if (!browser.msie && !browser.webkit) {\n                return;\n            }\n\n            node = $(node);\n            node.css({\n                borderWidth: \"0px\",\n                width: \"0px\",\n                height: \"0px\",\n                overflow: \"hidden\",\n                margin: \"0\",\n                padding: \"0\"\n            });\n\n            if (browser.msie) {\n                //node inherits BODY styles and this causes the browser to add additional\n                var documentElement = $(body.ownerDocument.documentElement);\n\n                node.css({\n                    fontVariant: \"normal\",\n                    fontWeight: \"normal\",\n                    lineSpacing: \"normal\",\n                    lineHeight: \"normal\",\n                    textDecoration: \"none\"\n                });\n                var color = documentElement.css(\"color\");\n                if (color) {\n                    node.css(\"color\", color);\n                }\n                var fontFamily = documentElement.css(\"fontFamily\");\n                if (fontFamily) {\n                    node.css(\"fontFamily\", fontFamily);\n                }\n                var fontSize = documentElement.css(\"fontSize\");\n                if (fontSize) {\n                    node.css(\"fontSize\", fontSize);\n                }\n            }\n        },\n        _moveToCaretPosition: function(node, range) {\n            var that = this;\n            var body = that.editor.body;\n            var nodeOffset = dom.offset(node, body);\n            var caretOffset = that._caretOffset(range, body);\n            var translateX = caretOffset.left - nodeOffset.left;\n            var translateY = caretOffset.top - nodeOffset.top;\n            var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n            $(node).css({\n                \"-webkit-transform\": translate,\n                \"transform\": translate\n            });\n        },\n        _caretOffset: function(range, body) {\n            var editor = this.editor;\n            var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n            var startContainer = range.startContainer;\n            var rangeChanged;\n\n            if (range.collapsed) {\n                var isStartTextNode = dom.isDataNode(startContainer);\n                if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                    dom.insertBefore(caret, startContainer);\n                } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                    dom.insertAfter(caret, startContainer);\n                } else {\n                    range.insertNode(caret);\n                    rangeChanged = true;\n                }\n            } else {\n                startContainer = startContainer === body ?\n                    startContainer.childNodes[range.startOffset] : startContainer;\n                dom.insertBefore(caret, startContainer);\n            }\n\n            var offset = dom.offset(caret, body);\n            var prev = caret.previousSibling;\n            var next = caret.nextSibling;\n\n            dom.remove(caret);\n\n            if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                var prevLength = prev.length;\n                next.data = prev.data + next.data;\n                range.setStart(next, prevLength);\n                dom.remove(prev);\n\n                range.collapse(true);\n                editor.selectRange(range);\n            }\n\n            return offset;\n        },\n\n        expandImmutablesIn: function(range) {\n            var editor = this.editor;\n            if (editor && editor.options.immutables) {\n                var body = editor.body;\n                range = range || editor.getRange();\n                kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                if (range.startContainer === body && range.startOffset === 0) {\n                    var doc = body.ownerDocument;\n                    var bomNode = doc.createTextNode(\"\\ufeff\");\n                    body.insertBefore(bomNode, body.childNodes[0]);\n                    range.setStartBefore(bomNode);\n                }\n                editor.selectRange(range);\n            }\n        },\n\n        splittableParent: function(block, node) {\n            var parentNode, body;\n\n            if (block) {\n                return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n            }\n\n            parentNode = node.parentNode;\n            body = node.ownerDocument.body;\n\n            if (dom.isInline(parentNode)) {\n                while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                    parentNode = parentNode.parentNode;\n                }\n            }\n\n            return parentNode;\n        },\n\n        paste: function(html, options) {\n            var editor = this.editor,\n                i, l, childNodes;\n\n            this.expandImmutablesIn();\n\n            options = extend({ clean: false, split: true }, options);\n\n            if (!options.skipCleaners) {\n                for (i = 0, l = this.cleaners.length; i < l; i++) {\n                    if (this.cleaners[i].applicable(html)) {\n                        html = this.cleaners[i].clean(html);\n                    }\n                }\n            }\n\n            if (options.clean) {\n                // remove br elements which immediately precede block elements\n                html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n                // remove empty inline elements\n                html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n            }\n\n            html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n            // It is possible in IE to copy just <li> tags\n            html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n            var block = this.isBlock(html);\n\n            editor.focus();\n            var range = editor.getRange();\n            range.deleteContents();\n\n            if (range.startContainer == editor.document) {\n                range.selectNodeContents(editor.body);\n            }\n\n            var marker = new Marker();\n            var caret = marker.addCaret(range);\n\n            var parent = this.splittableParent(block, caret);\n            var unwrap = false;\n            var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n            if (options.split && splittable && (block || dom.isInline(parent))) {\n                range.selectNode(caret);\n                RangeUtils.split(range, parent, true);\n                unwrap = true;\n            }\n\n            var fragment = this.htmlToFragment(html);\n\n            if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n                var fragmentsHtml = [];\n                for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                    fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                }\n\n                fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n            }\n\n            childNodes = fragment.childNodes;\n\n            $(childNodes)\n                .filter(\"table\").addClass(\"k-table\").end()\n                .find(\"table\").addClass(\"k-table\");\n\n            $(childNodes).each(function(index, elm) {\n               if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                    elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n               }\n            });\n\n            range.insertNode(fragment);\n\n            parent = this.splittableParent(block, caret);\n            if (unwrap) {\n                while (caret.parentNode != parent) {\n                    dom.unwrap(caret.parentNode);\n                }\n\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.normalize(range.commonAncestorContainer);\n            caret.style.display = 'inline';\n            dom.restoreScrollTop(editor.document);\n            dom.scrollTo(caret);\n            marker.removeCaret(range);\n\n            var rangeEnd = range.commonAncestorContainer.parentNode;\n            if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n                range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n                range.collapse(true);\n            }\n\n            var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n            if (focusedTable.get(0)) {\n                var siblingNodes = focusedTable.parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n\n                if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                    dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n                }\n            }\n\n            editor.selectRange(range);\n        }\n    });\n\n    var Cleaner = Class.extend({\n        init: function(options) {\n            this.options = options || {};\n            this.replacements = [];\n        },\n\n        clean: function(html, customReplacements) {\n            var that = this,\n                replacements = customReplacements || that.replacements,\n                i, l;\n\n            for (i = 0, l = replacements.length; i < l; i += 2) {\n                html = html.replace(replacements[i], replacements[i + 1]);\n            }\n\n            return html;\n        }\n    });\n\n    var ScriptCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n            ];\n        },\n\n        applicable: function(html) {\n            return !this.options.none && (/<script[^>]*>/i).test(html);\n        }\n    });\n\n    var TabCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            var replacement = ' ';\n            this.replacements = [\n                /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n                /\\t/gi, replacement,\n                /&nbsp;&nbsp; &nbsp;/gi, replacement\n            ];\n        },\n\n        applicable: function(html) {\n            return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n        }\n    });\n\n    var MSWordFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.junkReplacements = [\n                /<\\?xml[^>]*>/gi, '',\n                /<!--(.|\\n)*?-->/g, '', /* comments */\n                /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n                /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n                /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n                /<\\/o>/g, ''\n            ];\n            this.replacements = this.junkReplacements.concat([\n                /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n                /<br><br>/g, '<BR><BR>',\n                /<br>\\n/g, '<br/>',\n                /<br>(?!\\n)/g, ' ',\n                /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n                /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n                /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n                /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n                /<BR><BR>/g, '<br>',\n                /^\\s*(&nbsp;)+/gi, '',\n                /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n                /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n                /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n                /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n                /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n                /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n                /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n            ]);\n        },\n\n        convertFontMatch: function(match, closing, args) {\n            var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n            var face = faceRe.exec(args);\n            var family = args && face && face[1];\n\n            if (closing) {\n                return '</span>';\n            } else if (family) {\n                return '<span style=\"font-family:' + family + '\">';\n            } else {\n                return '<span>';\n            }\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Mso/i).test(html) ||\n                   (/style=\"[^\"]*mso-/i).test(html) ||\n                   (/urn:schemas-microsoft-com:office/).test(html);\n        },\n\n        stripEmptyAnchors: function(html) {\n            return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n                if (!attributes || attributes.indexOf(\"href\") < 0) {\n                    return \"\";\n                }\n\n                return a;\n            });\n        },\n\n        listType: function(p, listData) {\n            var html = p.innerHTML;\n            var text = dom.innerText(p);\n\n            var startingSymbol;\n            var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n            var symbol = matchSymbol && matchSymbol[1];\n            var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n            var trimStartText = function(text) {\n                return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n            };\n\n            if (matchSymbol) {\n                startingSymbol = true;\n            }\n\n            html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n            if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n                (startingSymbol && /^.\\u00a0+/.test(html)) ||\n                (symbol && !isNumber && listData)) {\n                return {\n                    tag: 'ul',\n                    style: this._guessUnorderedListStyle(trimStartText(text))\n                };\n            }\n\n            if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                return {\n                    tag: 'ol',\n                    style: this._guessOrderedListStyle(trimStartText(text))\n                };\n            }\n        },\n\n        _convertToLi: function(p) {\n            var content;\n\n            if (p.childNodes.length == 1) {\n                content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n                content = this._checkForBullet(content);\n            } else {\n                content = this._getHtmlNoBullet(p);\n            }\n\n            dom.remove(p);\n\n            return dom.create(document, 'li', { innerHTML: content });\n        },\n\n        _checkForBullet: function(html) {\n            var p = dom.create(document, 'p', { innerHTML: html });\n            var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n            if (bulletRgx.test(p.innerText)) {\n                return this._getHtmlNoBullet(p);\n            }\n\n            return html;\n        },\n\n        _getHtmlNoBullet: function(element) {\n            var content,\n                name = dom.name(element);\n\n            dom.remove(element.firstChild);\n\n            // check for roman numerals\n            if (element.firstChild.nodeType == 3) {\n                if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                    dom.remove(element.firstChild);\n                }\n            }\n\n            if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n                dom.remove(element.firstChild);\n            }\n\n            if (name != \"p\") {\n                content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n            } else {\n                content = element.innerHTML;\n            }\n\n            return content;\n        },\n\n        _guessUnorderedListStyle: function(symbol) {\n            if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                return null;//return \"disc\"; //default CSS value\n            } else if (/^o/.test(symbol)) {\n                return \"circle\";\n            } else {\n                return \"square\";\n            }\n        },\n        _guessOrderedListStyle: function(symbol) {\n            var listType = null;\n            if (!/^\\d/.test(symbol)) {\n                listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                           (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n            }\n\n            return listType;\n        },\n\n        extractListLevels: function(html) {\n            var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n            html = html.replace(msoListRegExp, function(match, list, level) {\n                return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n            });\n\n            return html;\n        },\n\n        _createList: function(type, styleType) {\n            return dom.create(document, type, {\n                style: { listStyleType: styleType }\n            });\n        },\n\n        lists: function(placeholder) {\n            var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n                lastMargin = -1,\n                name,\n                levels = {},\n                li,\n                rootMargin,\n                rootIndex,\n                lastRootLi,\n                isLastRootLi,\n                rootList,\n                i, p, type, margin, list, listData,\n                acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n                isParentTable = false;\n\n            for (i = 0; i < blockChildren.length; i++) {\n                p = blockChildren[i];\n                listData = $(p).data();\n                var listIndex = listData.list;\n                name = dom.name(p);\n                isParentTable = !!$(p).parents(\"table\").length;\n\n                if (isParentTable) {\n                    continue;\n                }\n\n                var listType = this.listType(p, listData);\n                type = listType && listType.tag;\n\n                if (!type || acceptedNameTags.indexOf(name) < 0) {\n                    if (!p.innerHTML) {\n                        dom.remove(p);\n                    } else if (li && !isLastRootLi) {\n                        li.appendChild(p);\n                    }\n                    continue;\n                }\n\n                // not supported list levels in ie\n                if (browser.msie) {\n                    continue;\n                }\n\n                margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n                var levelType = type + listIndex;\n                if (!levels[margin]) {\n                    levels[margin] = {};\n                }\n\n                if (!rootMargin || rootMargin < 0) {\n                    rootMargin = margin;\n                    rootIndex = listIndex;\n                    lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                    rootList = this._createList(type, listType.style);\n                    dom.insertBefore(rootList, p);\n                    lastMargin = margin;\n                    levels[margin][levelType] = rootList;\n                }\n\n                isLastRootLi = lastRootLi === p;\n\n                list = levels[margin][levelType];\n\n                if (margin > lastMargin || !list) {\n                    list = this._createList(type, listType.style);\n                    levels[margin][levelType] = list;\n                    li.appendChild(list);\n                }\n\n                li = this._convertToLi(p);\n                list.appendChild(li);\n\n                if (isLastRootLi) {\n                    rootMargin = lastMargin = -1;\n                } else {\n                    lastMargin = margin;\n                }\n            }\n        },\n\n        removeAttributes: function(element) {\n            var attributes = element.attributes,\n                i = attributes.length,\n                significantStyles = [],\n                isSignificantCss = function(val) {\n                    var significantCss = [\"border\", \"background\", \"padding\"];\n\n                    return significantCss.filter(function(cssAttr) {\n                        return val.trim().indexOf(cssAttr) === 0;\n                    }).length > 0;\n                },\n                addSignificantStyles = function(val) {\n                    if (isSignificantCss(val)) {\n                        significantStyles.push(val.trim());\n                    }\n                },\n                attr, attributeName, attributeValues;\n\n            while (i--) {\n                if (dom.name(attributes[i]) != \"colspan\") {\n                    attr = attributes[i];\n                    attributeName = attr.name;\n\n                    if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                        attributeValues = attr.value.split(\";\");\n                        attributeValues.forEach(addSignificantStyles);\n                    }\n\n                    element.removeAttributeNode(attributes[i]);\n                }\n            }\n\n            if (significantStyles.length > 0) {\n                element.setAttribute(\"style\", significantStyles.join(\";\"));\n            }\n        },\n\n        createColGroup: function(row) {\n            var cells = row.cells;\n            var table = $(row).closest(\"table\");\n            var colgroup = table.children(\"colgroup\");\n\n            if (cells.length < 2) {\n                return;\n            } else if (colgroup.length) {\n                cells = colgroup.children();\n                colgroup[0].parentNode.removeChild(colgroup[0]);\n            }\n\n            colgroup = $($.map(cells, function(cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n\n                    return \"<col />\";\n                }).join(\"\"));\n\n            // jquery 1.9/2.0 discrepancy\n            if (!colgroup.is(\"colgroup\")) {\n                colgroup = $(\"<colgroup/>\").append(colgroup);\n            }\n\n            colgroup.prependTo(table);\n        },\n\n        convertHeaders: function(row) {\n            var cells = row.cells,\n                i,\n                boldedCells = $.map(cells, function(cell) {\n                    var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                    if (child && dom.name(child) == \"strong\") {\n                        return child;\n                    }\n                });\n\n            if (boldedCells.length == cells.length) {\n                for (i = 0; i < boldedCells.length; i++) {\n                    dom.unwrap(boldedCells[i]);\n                }\n\n                $(row).closest(\"table\")\n                    .find(\"colgroup\").after(\"<thead></thead>\").end()\n                    .find(\"thead\").append(row);\n\n                for (i = 0; i < cells.length; i++) {\n                    dom.changeTag(cells[i], \"th\");\n                }\n            }\n        },\n\n        removeParagraphs: function(cells) {\n            var i, j, len, cell, paragraphs;\n\n            for (i = 0; i < cells.length; i++) {\n                this.removeAttributes(cells[i]);\n\n                // remove paragraphs and insert line breaks between them\n                cell = $(cells[i]);\n                paragraphs = cell.children(\"p\");\n\n                for (j = 0, len = paragraphs.length; j < len; j++) {\n                    if (j < len - 1) {\n                        dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                    }\n\n                    dom.unwrap(paragraphs[j]);\n                }\n            }\n        },\n\n        removeTextNodes: function(trs) {\n            var i, j, childNodes, currentNode, row;\n\n            for (i = 0; i < trs.length; i++) {\n                row = trs[i];\n                childNodes = row.childNodes;\n\n                for (j = 0; j < childNodes.length; j++) {\n                    currentNode = childNodes[j];\n\n                    if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                        row.removeChild(currentNode);\n                    }\n                }\n            }\n        },\n\n        tables: function(placeholder) {\n            var tables = $(placeholder).find(\"table\"),\n                that = this,\n                rows,\n                firstRow, longestRow, i, j;\n\n            for (i = 0; i < tables.length; i++) {\n                rows = tables[i].rows;\n                longestRow = firstRow = rows[0];\n\n                for (j = 1; j < rows.length; j++) {\n                    if (rows[j].cells.length > longestRow.cells.length) {\n                        longestRow = rows[j];\n                    }\n                }\n\n                that.createColGroup(longestRow);\n                that.convertHeaders(firstRow);\n\n                that.removeAttributes(tables[i]);\n\n                that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n                that.removeTextNodes(tables.eq(i).find(\"tr\"));\n            }\n        },\n\n        headers: function(placeholder) {\n            var titles = $(placeholder).find(\"p.MsoTitle\");\n\n            for (var i = 0; i < titles.length; i++) {\n                dom.changeTag(titles[i], \"h1\");\n            }\n        },\n\n        removeFormatting: function(placeholder) {\n            $(placeholder).find(\"*\").each(function() {\n                $(this).css({\n                    fontSize: \"\",\n                    fontFamily: \"\"\n                });\n\n                if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                    this.removeAttribute(\"style\");\n                }\n            });\n        },\n\n        clean: function(html) {\n            var that = this, placeholder;\n            var filters = this.options;\n\n            if (filters.none) {\n                html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                html = that.stripEmptyAnchors(html);\n            } else {\n\n                html = filters.msConvertLists ? this.extractListLevels(html) : html;\n                html = Cleaner.fn.clean.call(that, html);\n                html = that.stripEmptyAnchors(html);\n\n                placeholder = dom.create(document, 'div', { innerHTML: html });\n                that.headers(placeholder);\n\n                if (filters.msConvertLists) {\n                    that.lists(placeholder);\n                }\n                that.tables(placeholder);\n\n                if (filters.msAllFormatting) {\n                    that.removeFormatting(placeholder);\n                }\n\n                html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n            }\n\n            return html;\n        }\n    });\n\n    var WebkitFormatCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n\n            this.replacements = [\n                /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n                /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n                /^<div>(.*)<\\/div>$/, '$1'\n            ];\n        },\n\n        applicable: function(html) {\n            return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n        }\n    });\n\n    var DomCleaner = Cleaner.extend({\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n            container = this.cleanDom(container);\n            return container.innerHTML;\n        },\n\n        cleanDom: function(container) {\n            return container;\n        }\n    });\n\n    var HtmlTagsCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var tags = this.collectTags();\n\n            $(container).find(tags).each(function() {\n                dom.unwrap(this);\n            });\n\n            return container;\n        },\n\n        collectTags: function() {\n            if (this.options.span) {\n                return \"span\";\n            }\n        },\n\n        applicable: function() {\n            return this.options.span;\n        }\n    });\n\n    var HtmlAttrCleaner = DomCleaner.extend({\n        cleanDom: function(container) {\n            var attributes = this.collectAttr();\n            var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n            nodes.removeAttr(attributes.join(\" \"));\n\n            return container;\n        },\n\n        collectAttr: function() {\n            if (this.options.css) {\n                return [\"class\", \"style\"];\n            }\n\n            return [];\n        },\n\n        applicable: function() {\n            return this.options.css;\n        }\n    });\n\n    var TextContainer = function() {\n        this.text = \"\";\n        this.add = function(text) {\n            this.text += text;\n        };\n    };\n\n    var HtmlTextLines = Class.extend({\n        init: function(separators) {\n            this.separators = separators || {\n                    text: \" \",\n                    line: \"<br/>\"\n                };\n            this.lines = [];\n            this.inlineBlockText = [];\n            this.resetLine();\n        },\n\n        appendText: function(text) {\n            if (text.nodeType === 3) {\n                text = text.nodeValue;\n            }\n\n            this.textContainer.add(text);\n        },\n\n        appendInlineBlockText: function(text) {\n            this.inlineBlockText.push(text);\n        },\n\n        flashInlineBlockText: function() {\n            if (this.inlineBlockText.length) {\n                this.appendText(this.inlineBlockText.join(\" \"));\n                this.inlineBlockText = [];\n            }\n        },\n\n        endLine: function() {\n            this.flashInlineBlockText();\n            this.resetLine();\n        },\n\n        html: function() {\n            var separators = this.separators;\n            var result = \"\";\n            var lines = this.lines;\n\n            this.flashInlineBlockText();\n\n            for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                var line = lines[i];\n                for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                    var text = line[j].text;\n                    result += text;\n                    if (j !== jl1) {\n                        result += separators.text;\n                    }\n                }\n                if (i !== il1) {\n                    result += separators.line;\n                }\n            }\n\n            return result;\n        },\n\n        resetLine: function() {\n            this.textContainer = new TextContainer();\n            this.line = [];\n            this.line.push(this.textContainer);\n            this.lines.push(this.line);\n        }\n    });\n\n    var DomEnumerator = Class.extend({\n        init: function(callback) {\n            this.callback = callback;\n        },\n        enumerate: function(node) {\n            if (!node) {\n                return;\n            }\n\n            var preventDown = this.callback(node);\n\n            var child = node.firstChild;\n            if (!preventDown && child) {\n                this.enumerate(child);\n            }\n\n            this.enumerate(node.nextSibling);\n        }\n    });\n\n    var HtmlContentCleaner = Cleaner.extend({\n        init: function(options) {\n            Cleaner.fn.init.call(this, options);\n            this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n            this.enumerator = new DomEnumerator(this.buildText.bind(this));\n        },\n\n        clean: function(html) {\n            var container = dom.create(document, 'div', { innerHTML: html });\n\n            return this.cleanDom(container);\n        },\n\n        cleanDom: function(container) {\n            this.separators = this.getDefaultSeparators();\n            this.htmlLines = new HtmlTextLines(this.separators);\n            this.enumerator.enumerate(container.firstChild);\n            this.hasText = false;\n\n            return this.htmlLines.html();\n        },\n\n        buildText: function(node) {\n            if (dom.isDataNode(node)) {\n                if (dom.isEmptyspace(node)) {\n                    return;\n                }\n                this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                this.hasText = true;\n            } else if (dom.isBlock(node) && this.hasText) {\n                var action = this.actions[dom.name(node)] || this.actions.block;\n                return action(this, node);\n            } else if (dom.isBr(node)) {\n                this.htmlLines.appendText(this.separators.line);\n            }\n        },\n\n        applicable: function() {\n            var o = this.options;\n            return o.all || o.keepNewLines;\n        },\n\n        getDefaultSeparators: function() {\n            if (this.options.all) {\n                return { text: \" \", line: \" \" };\n            } else {\n                return { text: \" \", line: \"<br/>\" };\n            }\n        },\n\n        actions: {\n            ul: $.noop,\n            ol: $.noop,\n            table: $.noop,\n            thead: $.noop,\n            tbody: $.noop,\n            td: function(cleaner, node) {\n                var tdCleaner = new HtmlContentCleaner({ all: true });\n\n                var cellText = tdCleaner.cleanDom(node);\n                cleaner.htmlLines.appendInlineBlockText(cellText);\n\n                return true;\n            },\n\n            block: function(cleaner) {\n                cleaner.htmlLines.endLine();\n            }\n        }\n    });\n\n    var CustomCleaner = Cleaner.extend({\n        clean: function(html) {\n            return this.options.custom(html);\n        },\n\n        applicable: function() {\n            return typeof(this.options.custom) === \"function\";\n        }\n    });\n\n    extend(editorNS, {\n        Clipboard: Clipboard,\n        Cleaner: Cleaner,\n        ScriptCleaner: ScriptCleaner,\n        TabCleaner: TabCleaner,\n        MSWordFormatCleaner: MSWordFormatCleaner,\n        WebkitFormatCleaner: WebkitFormatCleaner,\n        HtmlTagsCleaner: HtmlTagsCleaner,\n        HtmlAttrCleaner: HtmlAttrCleaner,\n        HtmlContentCleaner: HtmlContentCleaner,\n        HtmlTextLines: HtmlTextLines,\n        CustomCleaner: CustomCleaner\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n        extend = $.extend;\n    var nodeTypes = dom.nodeTypes;\n    var PREVIOUS_SIBLING = \"previousSibling\";\n\n    function selected(node, range) {\n        return range.startContainer === node && range.endContainer === node &&\n            range.startOffset === 0 && range.endOffset == node.childNodes.length;\n    }\n\n    function getSibling(node, direction, condition) {\n        var sibling = node ? node[direction] : null;\n\n        while (sibling && !condition(sibling)) {\n            sibling = sibling[direction];\n        }\n\n        return sibling;\n    }\n\n    var tableCells = \"td,th,caption\";\n    var tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\n    var tableElements = tableCellsWrappers + \",\" + tableCells;\n    var inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\n    var RemoveTableContent = Class.extend({\n        remove: function(range) {\n            var that = this;\n            var marker = new Marker();\n            marker.add(range, false);\n\n            var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n            var doc = RangeUtils.documentFromRange(range);\n            var start = marker.start;\n            var end = marker.end;\n            var cellsTypes = tableCells.split(\",\");\n            var startCell = dom.parentOfType(start, cellsTypes);\n            var endCell = dom.parentOfType(end, cellsTypes);\n            that._removeContent(start, startCell, true);\n            that._removeContent(end, endCell, false);\n            $(nodes).each(function(i, node) {\n                node = $(node);\n                (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                    cell.innerHTML = \"&#65279;\";\n                });\n            });\n            if (startCell && !start.previousSibling) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n            }\n            if (endCell && !end.nextSibling) {\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n            }\n            if (startCell) {\n                range.setStartBefore(start);\n            } else if (nodes[0]) {\n                startCell = $(nodes[0]);\n                startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                if (startCell.length) {\n                    range.setStart(startCell.get(0), 0);\n                }\n            }\n\n            range.collapse(true);\n\n            dom.remove(start);\n            dom.remove(end);\n        },\n        _removeContent: function(start, top, forwards) {\n            if (top) {\n                var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                    next,\n                    getNext = function(node) {\n                        while (node && !node[sibling]) {\n                            node = node.parentNode;\n                        }\n                        return node && $.contains(top, node) ? node[sibling] : null;\n                    };\n                start = getNext(start);\n                while (start) {\n                    next = getNext(start);\n                    dom.remove(start);\n                    start = next;\n                }\n            }\n        }\n    });\n\n    var TypingHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard,\n                isTypingKey = keyboard.isTypingKey(e),\n                evt = extend($.Event(), e);\n\n            that.editor.trigger(\"keydown\", evt);\n\n            if (evt.isDefaultPrevented()) {\n                e.preventDefault();\n                return true;\n            }\n\n            if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                var range = editor.getRange();\n                var body = editor.body;\n                that.startRestorePoint = new RestorePoint(range, body);\n\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                }\n\n                if (browser.webkit && !range.collapsed && selected(body, range)) {\n                    body.innerHTML = \"\";\n                }\n\n                if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                    var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                    backspaceHandler.deleteSelection(range);\n                }\n\n                keyboard.startTyping(function() {\n                    that._removeBomSpan();\n                    that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function(e) {\n            var keyboard = this.editor.keyboard;\n\n            this.editor.trigger(\"keyup\", e);\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping();\n                return true;\n            }\n\n            return false;\n        },\n\n        _removeBomSpan: function() {\n            var node = this.editor.getRange().commonAncestorContainer;\n\n            if (!dom.emptyNode(node)) {\n                if (node.nodeType === 3) {\n                    node = node.parentNode;\n                }\n\n                if (dom.insignificant(node)) {\n                    // typing in an insignificant node\n                    // make it significant\n                    node.textContent = dom.stripBom(node.textContent);\n                    dom.unwrap(node);\n                }\n            }\n        }\n    });\n\n    var BackspaceHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n        _addCaret: function(container) {\n            var caret = dom.create(this.editor.document, \"a\");\n\n            // Only if not Chrome: Make sure to include cared in the formatted inline node\n            if (!kendo.support.browser.chrome && container.firstChild &&\n                container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n                container = container.firstChild;\n            }\n\n            dom.insertAt(container, caret, 0);\n            dom.stripBomNode(caret.previousSibling);\n            dom.stripBomNode(caret.nextSibling);\n            return caret;\n        },\n        _restoreCaret: function(caret) {\n            var range = this.editor.createRange();\n\n            if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                range.setStart(caret.previousSibling, caret.previousSibling.length);\n            } else {\n                range.setStartAfter(caret);\n            }\n\n            range.collapse(true);\n            this.editor.selectRange(range);\n            dom.remove(caret);\n        },\n        _handleDelete: function(range) {\n            var node = range.endContainer;\n            var block = dom.closestEditableOfType(node, dom.blockElements);\n\n            if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                // join with next sibling\n                var next = dom.next(block);\n                if (!next || dom.name(next) != \"p\") {\n                    return false;\n                }\n\n                var caretPlaceholder = dom.significantChildNodes(next)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n                var caret = this._addCaret(caretPlaceholder);\n\n                this._merge(block, next);\n\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            return false;\n        },\n        _cleanBomBefore: function(range) {\n            var offset = range.startOffset;\n            var node = range.startContainer;\n            var text = node.nodeValue;\n            var count = 0;\n            while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n                count++;\n            }\n\n            if (count > 0) {\n                node.deleteData(offset - count, count);\n\n                range.setStart(node, Math.max(0, offset - count));\n                range.collapse(true);\n\n                this.editor.selectRange(range);\n            }\n        },\n        _handleBackspace: function(range) {\n            var node = range.startContainer;\n            var li = dom.closestEditableOfType(node, ['li']);\n            var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n            var editor = this.editor;\n            var previousSibling;\n\n            if (dom.isDataNode(node)) {\n                if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                    range.setStart(node, 0);\n                    range.setEnd(node, node.length);\n                    editor.selectRange(range);\n                    return false;\n                }\n                this._cleanBomBefore(range);\n            }\n\n            previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.htmlIndentSpace(sibling);\n            });\n\n            //deleting the first list item with empty content in IE results in invalid range\n            if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                range.startOffset = 0;\n                range.endOffset = 0;\n                editor.selectRange(range);\n            }\n\n            var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n            var liIndex = li && $(li).index();\n            var startAtNonFirstLi = startAtLi && liIndex > 0;\n            if (startAtNonFirstLi) {\n                block = li;\n                previousSibling = dom.prev(li);\n            }\n\n            if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                if (block.innerText === '') {\n                    block.innerHTML = '\\ufeff';\n                }\n                return true;\n            }\n\n            // outdent\n            if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n                editor.exec(\"outdent\");\n                return true;\n            }\n\n            // unwrap block\n            if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n                var caretPlaceholder = dom.significantChildNodes(block)[0];\n                caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n                var caret = this._addCaret(caretPlaceholder);\n                this._merge(previousSibling, block);\n                this._restoreCaret(caret);\n\n                return true;\n            }\n\n            // unwrap li element\n            if (startAtLi && liIndex === 0) {\n                var child = li.firstChild;\n                if (!child) {\n                    li.innerHTML = editorNS.emptyElementContent;\n                    child = li.firstChild;\n                }\n\n                var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n                range.selectNodeContents(li);\n                formatter.toggle(range);\n\n                if (dom.insignificant(child)) {\n                    range.setStartBefore(child);\n                } else {\n                    range.setStart(child, 0);\n                }\n\n                editor.selectRange(range);\n\n                return true;\n            }\n\n            var rangeStartNode = node.childNodes[range.startOffset - 1];\n            var linkRange = range;\n            var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n            var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n                return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n            });\n            if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n                anchor = anchor || previousNode;\n                linkRange = editor.createRange();\n                linkRange.setStart(anchor, anchor.childNodes.length);\n                linkRange.collapse(true);\n            }\n\n            anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n            var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n            if (isEndOfLink) {\n                var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n                editor.execCommand(command);\n                editor._selectionChange();\n            }\n            return false;\n        },\n        _handleSelection: function(range) {\n            var ancestor = range.commonAncestorContainer;\n            var table = dom.closest(ancestor, \"table\");\n            var emptyParagraphContent = editorNS.emptyElementContent;\n            var editor = this.editor;\n            var parentElementOrNode;\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n                return true;\n            }\n\n            var marker = new Marker();\n            marker.add(range, false);\n\n            if (range.commonAncestorContainer === editor.body) {\n                this._surroundFullyContent(marker, range);\n            }\n\n            if (editor.immutables) {\n                this._handleImmutables(marker);\n            }\n\n            this._surroundFullySelectedAnchor(marker, range);\n\n            range.setStartAfter(marker.start);\n            range.setEndBefore(marker.end);\n\n            var start = range.startContainer;\n            var end = range.endContainer;\n\n            range.deleteContents();\n\n            if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n                range.selectNode(end);\n                range.deleteContents();\n            }\n\n            if (table && $(table).text() === \"\") {\n                range.selectNode(table);\n                range.deleteContents();\n            }\n\n            ancestor = range.commonAncestorContainer;\n\n            if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n                ancestor.innerHTML = emptyParagraphContent;\n                range.setStart(ancestor, 0);\n            }\n\n            this._join(start, end);\n\n            dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n            marker.remove(range);\n\n            start = range.startContainer;\n            if (dom.name(start) == \"tr\") {\n                start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                range.setStart(start, dom.getNodeLength(start));\n            }\n\n            range.collapse(true);\n\n            editor.selectRange(range);\n\n            parentElementOrNode = start.parentElement || start.parentNode;\n\n            if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n                this._cleanBomBefore(range);\n            }\n\n            return true;\n        },\n        _handleImmutables: function(marker) {\n            var immutableParent = editorNS.Immutables.immutableParent;\n            var startImmutable = immutableParent(marker.start);\n            var endImmutable = immutableParent(marker.start);\n            if (startImmutable) {\n                dom.insertBefore(marker.start, startImmutable);\n            }\n            if (endImmutable) {\n                dom.insertAfter(marker.end, endImmutable);\n            }\n            if (startImmutable) {\n                dom.remove(startImmutable);\n            }\n            if (endImmutable && endImmutable.parentNode) {\n                dom.remove(endImmutable);\n            }\n        },\n        _surroundFullyContent: function(marker, range) {\n            var children = range.commonAncestorContainer.children,\n                startParent = children[0],\n                endParent = children[children.length - 1];\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _surroundFullySelectedAnchor: function(marker, range) {\n            var start = marker.start,\n                startParent = $(start).closest(\"a\").get(0),\n                end = marker.end,\n                endParent = $(end).closest(\"a\").get(0);\n\n            this._moveMarker(marker, range, startParent, endParent);\n        },\n        _moveMarker: function(marker, range, startParent, endParent) {\n            var start = marker.start,\n                end = marker.end;\n\n            if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                dom.insertBefore(start, startParent);\n            }\n\n            if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                dom.insertAfter(end, endParent);\n            }\n        },\n        _root: function(node) {\n            while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n                node = node.parentNode;\n            }\n\n            return node;\n        },\n        _join: function(start, end) {\n            start = this._root(start);\n            end = this._root(end);\n\n            if (start != end && dom.is(end, \"p\")) {\n                this._merge(start, end);\n            }\n        },\n        _merge: function(dest, src) {\n            dom.removeTrailingBreak(dest);\n\n            while (dest && src.firstChild) {\n                if (dest.nodeType == 1) {\n                    dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                    if (dest) {\n                        dest.appendChild(src.firstChild);\n                    }\n                } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                    this._mergeWithTextNode(dest, src.firstChild);\n                } else {\n                    dest.parentNode.appendChild(src.firstChild);\n                }\n            }\n\n            dom.remove(src);\n        },\n\n        _mergeWithTextNode: function(textNode, appendedNode) {\n            if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                    dom.insertAfter(appendedNode, textNode.nextSibling);\n                }\n                else {\n                    dom.insertAfter(appendedNode, textNode);\n                }\n            }\n        },\n\n        _isCaret: function(element) {\n            return $(element).is(\"a\");\n        },\n\n        keydown: function(e) {\n            var method, startRestorePoint;\n            var editor = this.editor;\n            var range = editor.getRange();\n            var keyCode = e.keyCode;\n            var keys = kendo.keys;\n            var backspace = keyCode === keys.BACKSPACE;\n            var del = keyCode == keys.DELETE;\n\n            if (editor.immutables && editor.immutables.keydown(e, range)) {\n                return;\n            }\n\n            if ((backspace || del) && !range.collapsed) {\n                method = \"_handleSelection\";\n            } else if (backspace) {\n                method = \"_handleBackspace\";\n            } else if (del) {\n                method = \"_handleDelete\";\n            }\n\n            if (!method) {\n                return;\n            }\n\n            startRestorePoint = new RestorePoint(range, editor.body);\n\n            if (this[method](range)) {\n                e.preventDefault();\n\n                editorNS._finishUpdate(editor, startRestorePoint);\n            }\n        },\n        deleteSelection: function(range) {\n            this._handleSelection(range);\n        },\n        keyup: $.noop\n    });\n\n    var SystemHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.systemCommandIsInProgress = false;\n        },\n\n        createUndoCommand: function() {\n            this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n        },\n\n        changed: function() {\n            if (this.startRestorePoint) {\n                return this.startRestorePoint.html != this.editor.body.innerHTML;\n            }\n\n            return false;\n        },\n\n        keydown: function(e) {\n            var that = this,\n                editor = that.editor,\n                keyboard = editor.keyboard;\n\n            if (keyboard.isModifierKey(e)) {\n\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                }\n\n                that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                return true;\n            }\n\n            if (keyboard.isSystem(e)) {\n                that.systemCommandIsInProgress = true;\n\n                if (that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                }\n\n                return true;\n            }\n\n            return false;\n        },\n\n        keyup: function() {\n            var that = this;\n\n            if (that.systemCommandIsInProgress && that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n                return true;\n            }\n\n            return false;\n        }\n    });\n\n    var SelectAllHandler = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n        },\n\n        keydown: function(e) {\n            if (!browser.webkit || e.isDefaultPrevented() ||\n                !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                return;\n            }\n            if (this.editor.options.immutables) {\n                this._toSelectableImmutables();\n            }\n            this._selectEditorBody();\n        },\n\n        _selectEditorBody: function() {\n            var editor = this.editor;\n            var range = editor.getRange();\n            range.selectNodeContents(editor.body);\n\n            setTimeout(function() {\n                editor.selectRange(range);\n            });\n        },\n\n        _toSelectableImmutables: function() {\n            var editor = this.editor,\n                body = editor.body,\n                immutable = editorNS.Immutables.immutable,\n                emptyTextNode = dom.emptyTextNode,\n                first = body.firstChild,\n                last = body.lastChild;\n\n            while (emptyTextNode(first)) {\n                first = first.nextSibling;\n            }\n\n            while (emptyTextNode(last)) {\n                last = last.previousSibling;\n            }\n\n            if (first && immutable(first)) {\n                $(bomSpan).prependTo(body);\n            }\n\n            if (last && immutable(last)) {\n                $(bomSpan).appendTo(body);\n            }\n        },\n\n        keyup: $.noop\n    });\n\n    var Keyboard = Class.extend({\n        init: function(handlers) {\n            this.handlers = handlers;\n            this.typingInProgress = false;\n        },\n\n        isCharacter: function(keyCode) {\n            return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n                   (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n                   keyCode == 229;\n        },\n\n        toolFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                toolOptions,\n                modifier = this._getShortcutModifier(e, navigator.platform);\n\n            for (toolName in tools) {\n                toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                    toolOptions.ctrl == modifier &&\n                    toolOptions.alt == e.altKey &&\n                    toolOptions.shift == e.shiftKey) {\n                    return toolName;\n                }\n            }\n        },\n\n        _getShortcutModifier: function(e, platform) {\n            var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n            return mac ? e.metaKey : e.ctrlKey;\n        },\n\n        toolsFromShortcut: function(tools, e) {\n            var key = String.fromCharCode(e.keyCode),\n                toolName,\n                o,\n                matchesKey,\n                found = [];\n            var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n            for (toolName in tools) {\n                o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n                matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                if (matchesKey &&\n                    o.ctrl == e.ctrlKey &&\n                    o.alt == e.altKey &&\n                    o.shift == e.shiftKey) {\n                    found.push(tools[toolName]);\n                }\n            }\n\n            return found;\n        },\n\n        isTypingKey: function(e) {\n            var keyCode = e.keyCode;\n            return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n                   keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n                   (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n        },\n\n        isModifierKey: function(e) {\n            var keyCode = e.keyCode;\n            return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n                   (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n                   (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n        },\n\n        isSystem: function(e) {\n            return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n        },\n\n        startTyping: function(callback) {\n            this.onEndTyping = callback;\n            this.typingInProgress = true;\n        },\n\n        stopTyping: function() {\n            if (this.typingInProgress && this.onEndTyping) {\n                this.onEndTyping();\n            }\n            this.typingInProgress = false;\n        },\n\n        endTyping: function(force) {\n            var that = this;\n            that.clearTimeout();\n            if (force) {\n                that.stopTyping();\n            } else {\n                that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n            }\n        },\n\n        isTypingInProgress: function() {\n            return this.typingInProgress;\n        },\n\n        clearTimeout: function() {\n            window.clearTimeout(this.timeout);\n        },\n\n        notify: function(e, what) {\n            var i, handlers = this.handlers;\n\n            for (i = 0; i < handlers.length; i++) {\n                if (handlers[i][what](e)) {\n                    break;\n                }\n            }\n        },\n\n        keydown: function(e) {\n            this.notify(e, 'keydown');\n        },\n\n        keyup: function(e) {\n            this.notify(e, 'keyup');\n        }\n    });\n\n    extend(editorNS, {\n        TypingHandler: TypingHandler,\n        SystemHandler: SystemHandler,\n        BackspaceHandler: BackspaceHandler,\n        SelectAllHandler: SelectAllHandler,\n        Keyboard: Keyboard\n    });\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var ExportPdfCommand = Command.extend({\n        init: function(options) {\n            this.async = true;\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var that = this;\n            var range = that.lockRange(true);\n            var editor = that.editor;\n\n            editor._destroyResizings();\n\n            editor.saveAsPDF().then(function() {\n                that.releaseRange(range);\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeElementResizing();\n            });\n        }\n    });\n\n    extend(editorNS, {\n        ExportPdfCommand: ExportPdfCommand\n    });\n\n    registerTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n        // Imports ================================================================\n        var kendo = window.kendo,\n            editorNS = kendo.ui.editor,\n            Command = editorNS.Command,\n            EditorUtils = editorNS.EditorUtils,\n            registerTool = EditorUtils.registerTool,\n            Tool = editorNS.Tool,\n            extend = $.extend;\n\n    var PrintCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n\n            this.managesUndoRedo = true;\n        },\n\n        exec: function() {\n            var editor = this.editor;\n\n            if (kendo.support.browser.msie) {\n                editor.document.execCommand(\"print\", false, null);\n            } else if (editor.window.print) {\n                editor.window.print();\n            }\n        }\n    });\n\n    extend(editorNS, {\n        PrintCommand: PrintCommand\n    });\n\n    registerTool(\"print\", new Tool({ command: PrintCommand }));\n\n    })(window.kendo.jQuery);\n\n    (function($) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        dom = Editor.Dom,\n        RangeUtils = Editor.RangeUtils,\n        registerTool = EditorUtils.registerTool;\n\n    var CopyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            this.inlineStyles = [];\n            this.blockStyles = [];\n            this.collectStyles(range);\n            this.editor.inlineStyles = this.inlineStyles;\n            this.editor.blockStyles = this.blockStyles;\n            this.releaseRange(range);\n        },\n\n        collectStyles: function(range) {\n            var rangeNodes = RangeUtils.nodes(range);\n            var node;\n\n            if (rangeNodes.length === 1) {\n                node = rangeNodes[0].parentNode;\n            } else {\n                node = range.startContainer;\n            }\n\n            while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n                if (dom.isBlock(node)) {\n                    this.populateStyles(node, \"blockStyles\");\n                    if (dom.is(node, \"li\")) {\n                        node = node.parentNode;\n                    } else {\n                        node = null;\n                    }\n                } else {\n                    this.populateStyles(node, \"inlineStyles\");\n                    node = node.parentNode;\n                }\n            }\n        },\n\n        populateStyles: function(node, destination) {\n            var styles = node.style;\n            var attributes = node.attributes;\n            var nodeStyles = {\n                tags: [ node.tagName ],\n                attr: {\n                    style: {}\n                }\n            };\n            var styleValue, styleKey, attributeKey, attributeValue, i;\n\n            for (i = 0; styles && i < styles.length; i++) {\n                styleKey = styles[i];\n                styleValue = styles[styleKey];\n                nodeStyles.attr.style[styleKey] = styleValue;\n            }\n\n            for (i = 0; attributes && i < attributes.length; i++) {\n                attributeKey = attributes[i].nodeName;\n                attributeValue = attributes[i].nodeValue;\n                if (attributeKey === \"style\") {\n                    continue;\n                } else if (attributeKey === \"class\") {\n                    nodeStyles.attr.className = attributeValue;\n                } else {\n                    nodeStyles.attr[attributeKey] = attributeValue;\n                }\n            }\n\n            this[destination].push(nodeStyles);\n        }\n    });\n\n    var ApplyFormatCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n\n        exec: function() {\n            var range = this.lockRange(true);\n            var markers = RangeUtils.getMarkers(range);\n            var editor = this.editor;\n            var inlineStyles = editor.inlineStyles;\n            var blockStyles = editor.blockStyles;\n            var nodes;\n\n            if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n                return;\n            }\n\n            if (markers.length === 3) {\n                this.marker.removeCaret(range);\n                this.marker.caret = null;\n            }\n\n            this.removeEmptyElementsFromRange(range);\n            nodes = RangeUtils.nodes(range);\n            this.cleanInlineParents(nodes);\n            dom.normalize(range.commonAncestorContainer);\n\n            if (markers.length === 2) {\n                range.setStartAfter(markers[0]);\n                range.setEndBefore(markers[1]);\n            } else {\n                range.setStartBefore(nodes[0]);\n                range.setEndAfter(nodes[0]);\n            }\n\n            nodes = RangeUtils.nodes(range);\n\n            if (nodes && blockStyles && blockStyles.length) {\n                this.applyBlockStyles(nodes, blockStyles);\n            }\n\n            if (nodes && inlineStyles && inlineStyles.length) {\n                this.applyInlineStyles(nodes, inlineStyles);\n            }\n\n            this.releaseRange(range);\n        },\n\n        removeEmptyElementsFromRange: function(range) {\n            var isEmptyInline = function(node) {\n                return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n            };\n            var emptyElements, i;\n\n            emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n            if (emptyElements && emptyElements.length > 0) {\n                for (i = 0; i < emptyElements.length; i++) {\n                    emptyElements[i].parentNode.removeChild(emptyElements[i]);\n                }\n            }\n        },\n\n        cleanInlineParents: function(nodes) {\n            var i, node, parent, children, j, child, newNode;\n\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                parent = node.parentNode;\n\n                if (this.immutableParent(node)) {\n                    continue;\n                }\n\n                while (parent && dom.isInline(parent)) {\n                    children = parent.childNodes;\n\n                    for (j = 0; j < children.length; j++) {\n                        child = children[j];\n\n                        if (!dom.isMarker(child) && child !== node) {\n                            newNode = parent.cloneNode(true);\n                            newNode.innerHTML = \"\";\n                            dom.wrap(child, newNode);\n                        }\n                    }\n\n                    dom.unwrap(parent);\n                    parent = node.parentNode;\n                }\n            }\n        },\n\n        applyBlockStyles: function(nodes, blockStyles) {\n            var formatTag = blockStyles[0].tags[0];\n            var attr = blockStyles[0].attr;\n            var document = this.editor.document;\n            var i, len, node, wrapper, blockParent, outerWrapper;\n            var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n            for (i = 0, len = nodes.length; i < len; i++) {\n                node = nodes[i];\n\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n\n                blockParent = dom.blockParentOrBody(node);\n\n                if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                    if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                        previousNodes = [];\n                        nextNodes = [];\n                        previous = node.previousSibling;\n                        next = node.nextSibling;\n\n                        while (previous) {\n                            if (!dom.isMarker(previous)) {\n                                previousNodes.push(previous);\n                            }\n\n                            previous = previous.previousSibling;\n                        }\n\n                        if (previousNodes.length) {\n                            prevWrapper = blockParent.cloneNode(true);\n                            prevWrapper.innerHTML = \"\";\n                            dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                            for (j = 0; j < previousNodes.length; j++) {\n                                child = previousNodes[j];\n                                dom.insertAt(prevWrapper, child, 0);\n                            }\n                        }\n\n                        while (next) {\n                            if (!dom.isMarker(next)) {\n                                nextNodes.push(next);\n                            }\n\n                            next = next.nextSibling;\n                        }\n\n                        if (nextNodes.length) {\n                            nextWrapper = blockParent.cloneNode(true);\n                            nextWrapper.innerHTML = \"\";\n                            dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                            for (j = 0; j < nextNodes.length; j++) {\n                                child = nextNodes[j];\n                                nextWrapper.appendChild(child);\n                            }\n                        }\n\n                        dom.unwrap(blockParent);\n                    }\n\n                    wrapper = dom.create(document, formatTag, attr);\n                    dom.wrap(node, wrapper);\n                } else if (blockParent.tagName === formatTag) {\n                    dom.attr(blockParent, attr);\n                }\n            }\n\n            if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n                listItems = [];\n\n                while (dom.is(wrapper, \"li\")) {\n                    listItems.push(wrapper);\n                    wrapper = dom.prev(wrapper);\n                }\n\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n                outerWrapper.appendChild(listItems[0]);\n\n                for (i = 1, len = listItems.length; i < len; i++) {\n                    dom.insertBefore(listItems[i], outerWrapper.firstChild);\n                }\n            } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n                outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n                dom.wrap(wrapper, outerWrapper);\n            }\n        },\n\n        applyInlineStyles: function(nodes, inlineStyles) {\n            var document = this.editor.document;\n            var currentStyle, createdNode, topNode, i, newNode, node;\n\n            for (i = 0; i < inlineStyles.length; i++) {\n                currentStyle = inlineStyles[i];\n                createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n                if (topNode) {\n                    createdNode.appendChild(topNode);\n                }\n\n                topNode = createdNode;\n            }\n\n            if (topNode) {\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                        continue;\n                    }\n                    newNode = topNode.cloneNode(true);\n                    dom.insertBefore(newNode, node);\n\n                    while (newNode.children && newNode.children.length) {\n                        newNode = newNode.children[0];\n                    }\n\n                    newNode.appendChild(node);\n                }\n            }\n        },\n\n        immutables: function() {\n            return this.editor && this.editor.options.immutables;\n        },\n\n        immutableParent: function(node) {\n            return this.immutables() && Editor.Immutables.immutableParent(node);\n        }\n    });\n\n    var CopyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new CopyFormatCommand(commandArguments);\n        }\n    });\n\n    var ApplyFormatTool = Tool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n        },\n\n        command: function(commandArguments) {\n            return new ApplyFormatCommand(commandArguments);\n        }\n    });\n\n    $.extend(Editor, {\n        CopyFormatCommand: CopyFormatCommand,\n        ApplyFormatCommand: ApplyFormatCommand,\n        CopyFormatTool: CopyFormatTool,\n        ApplyFormatTool: ApplyFormatTool\n    });\n\n    registerTool(\"copyFormat\", new CopyFormatTool({ }));\n    registerTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n    })(window.kendo.jQuery);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n\n        var PERCENTAGE = \"%\";\n        var PIXEL = \"px\";\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = \"string\";\n\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n\n            return 0;\n        }\n\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            }\n            else {\n                return ((parseFloat(value) / total) * 100);\n            }\n        }\n\n        function inPercentages(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n        }\n\n        function inPixels(value) {\n            return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n        }\n\n        function toPercentages(value) {\n            return (parseFloat(value) + PERCENTAGE);\n        }\n\n        function toPixels(value) {\n            return (parseFloat(value) + PIXEL);\n        }\n\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n\n        extend(Editor, {\n            ResizingUtils: ResizingUtils\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var MOUSE_ENTER = \"mouseenter\";\n        var MOUSE_LEAVE = \"mouseleave\";\n        var MOUSE_MOVE = \"mousemove\";\n        var MOUSE_UP = \"mouseup\";\n\n        var COMMA = \",\";\n        var DOT = \".\";\n        var LAST_CHILD = \":last-child\";\n\n        var TABLE = \"table\";\n\n        var TableElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n\n                that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n                that._destroyResizeHandle();\n            },\n\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: \"\",\n                rtl: false,\n                handle: {\n                    dataAttribute: \"\",\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: \"\"\n                }\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n            },\n\n            resizingInProgress: function() {\n                var that = this;\n                var resizable = that._resizable;\n\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n\n                return false;\n            },\n\n            resize: noop,\n\n            detectElementBorderHovering: function(e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        }\n                        else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n\n            elementBorderHovered: noop,\n\n            showResizeHandle: function(tableElement, e) {\n                var that = this;\n\n                if (e.buttons !== 0) {\n                    //prevent showing when a mouse button is still being pressed\n                    return;\n                }\n\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n\n                that._initResizable(tableElement);\n\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n\n            _initResizeHandle: function() {\n                var that = this;\n                var options = that.options;\n\n                that._destroyResizeHandle();\n\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n\n            setResizeHandlePosition: noop,\n\n            setResizeHandleDimensions: noop,\n\n            setResizeHandleDataAttributes: function(tableElement) {\n                var that = this;\n\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n\n            _attachResizeHandleEventHandlers: function() {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n\n                that.resizeHandle\n                    .on(MOUSE_DOWN + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).show();\n                    })\n                    .on(MOUSE_UP + eventNamespace, function() {\n                        resizeHandle.find(DOT + markerClass).hide();\n                    });\n            },\n\n            _hideResizeMarker: function() {\n                var that = this;\n\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n\n            _destroyResizeHandle: function() {\n                var that = this;\n\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n\n            _initResizable: function(tableElement) {\n                var that = this;\n\n                if (!that.resizeHandle) {\n                    return;\n                }\n\n                that._destroyResizable();\n\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: that.onResizeStart.bind(that),\n                    resize: that.onResize.bind(that),\n                    resizeend: that.onResizeEnd.bind(that)\n                });\n            },\n\n            _destroyResizable: function() {\n                var that = this;\n\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n\n            onResizeStart: function() {\n                this._disableKeyboard();\n            },\n\n            onResize: function(e) {\n                this.setResizeHandleDragPosition(e);\n            },\n\n            setResizeHandleDragPosition: noop,\n\n            onResizeEnd: function(e) {\n                var that = this;\n\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n\n            _disableKeyboard: function() {\n                var options = this.options;\n\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                    e.preventDefault();\n                });\n            },\n\n            _forceResizing: function(e) {\n                var resizable = this._resizable;\n\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n\n        var ResizingFactory = Class.extend({\n            create: function(editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n\n                $(editor.body)\n                    .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                        var table = e.currentTarget;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing) {\n                            if (resizing.element !== table && !resizing.resizingInProgress()) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, table, options);\n                            }\n                        }\n                        else {\n                            that._initResizing(editor, table, options);\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                        var parentTable;\n                        var resizing = editor[resizingName];\n\n                        e.stopPropagation();\n\n                        if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                            parentTable = $(resizing.element).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    })\n                    .on(MOUSE_LEAVE + NS, function() {\n                        var resizing = editor[resizingName];\n\n                        if (resizing && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                        }\n                    })\n                    .on(MOUSE_UP + NS, function(e) {\n                        var resizing = editor[resizingName];\n                        var parentTable;\n\n                        if (resizing && resizing.resizingInProgress()) {\n                            parentTable = $(e.target).parents(TABLE)[0];\n\n                            if (parentTable) {\n                                resizing._forceResizing(e);\n                                that._destroyResizing(editor, options);\n                                that._initResizing(editor, parentTable, options);\n                            }\n                        }\n                    });\n            },\n\n            dispose: function(editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n\n            _initResizing: function(editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n\n            _destroyResizing: function(editor, options) {\n                var resizingName = options.name;\n\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n\n        TableElementResizing.create = function(editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n\n        TableElementResizing.dispose = function(editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n\n        extend(Editor, {\n            TableElementResizing: TableElementResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n\n        var NS = \".kendoEditorColumnResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n        var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n        var BODY = \"body\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TD = \"td\";\n        var TH = \"th\";\n        var TR = \"tr\";\n\n        var COLATTR = \"col-index\";\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [TD, TH],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"column\",\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n                if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(column) {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var columnOffsetLeft = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var innerElementOffsetTop = tableInnerElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(tableInnerElement.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: innerElementOffsetTop + scrollTopOffset,\n                    left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: fullHeight\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rootElement = $(options.rootElement);\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(column.css(\"marginLeft\"));\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                                (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                                parseFloat(resizeHandle.css(\"marginLeft\"));\n                var browser = kendo.support.browser;\n\n                if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n\n                resizeHandle.css({ left: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? (-1) : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                var colIndex;\n                var nextColumn;\n\n                dom.reMapTableColumns(that.element, COLATTR);\n\n                colIndex = parseInt(column.attr(COLATTR), 10);\n\n                if (column.prop(\"colSpan\") > 1) {\n                    column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                    colIndex = parseInt(column.attr(COLATTR), 10);\n                }\n\n                nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n                dom.clearTableMappings(that.element, COLATTR);\n            },\n\n            _setTableComputedWidth: function() {\n                var element = this.element;\n\n                if (element.style[WIDTH] === \"\") {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n\n            _setColumnsComputedWidth: function() {\n                var that = this;\n                var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n                var innerElementWidth = outerWidth(tableInnerElement);\n                var columns = tableInnerElement.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function() {\n                    return outerWidth($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                    }\n                    else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n\n            _resizeTopAndBottomColumns: function(column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).attr(COLATTR);\n                var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        var cell = this;\n                        return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                    });\n                var length = topAndBottomColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n\n            _resizeColumn: function(column, newWidth) {\n                var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n                }\n                else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n\n            _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                    .filter(function() {\n                        return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                    });\n                var length = adjacentColumns.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n\n            _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n\n        ColumnResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"columnResizing\",\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n\n        ColumnResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            ColumnResizing: ColumnResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var math = window.Math;\n        var abs = math.abs;\n\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorRowResizing\";\n        var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n        var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n        var BODY = \"body\";\n        var TR = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n\n        var COMMA = \",\";\n        var HEIGHT = \"height\";\n\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: \"row\",\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template:\n                        '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                            '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                    '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                }\n            },\n\n            elementBorderHovered: function(tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n                if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n\n            setResizeHandlePosition: function(row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n                var rowOffsetLeft = row.offset().left -\n                                        (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                        parseFloat(row.css(\"marginLeft\"));\n                var rowOffsetTop = row.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(row.css(\"marginTop\"));\n                var browser = kendo.support.browser;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    scrollLeftOffset = scrollLeftOffset * -1;\n                }\n\n                that.resizeHandle.css({\n                    top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                    left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                    position: \"absolute\"\n                });\n            },\n\n            setResizeHandleDimensions: function() {\n                var that = this;\n                var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n                that.resizeHandle.css({\n                    width: innerTableElement.width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n\n            setResizeHandleDragPosition: function(e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableHead = $(that.element).children(THEAD);\n                var tableBody = $(that.element).children(TBODY);\n                var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var $row = $(row);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var tableTopOffset = topInnerTableElement.offset().top -\n                                        (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                        parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n                var rowOffsetTop = $row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat($row.css(\"marginTop\"));\n\n                var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                    (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(resizeHandle.css(\"marginTop\"));\n\n                var handleOffset = constrain({\n                    value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                    min: rowOffsetTop + scrollTopOffset + min,\n                    max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n\n                resizeHandle.css({ top: handleOffset });\n            },\n\n            resize: function(e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableHead = element.children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableHeadHeight + tableBodyHeight - options.min)\n                });\n\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n                if (inPercentages(initialStyleHeight)) {\n                    //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                    that._setRowsHeightInPercentages();\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setTableHeight: function(newHeight) {\n                var element = this.element;\n\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                }\n                else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n\n        RowResizing.create = function(editor) {\n            TableElementResizing.create(editor, {\n                name: \"rowResizing\",\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n\n        RowResizing.dispose = function(editor) {\n            TableElementResizing.dispose(editor, {\n                eventNamespace: NS\n            });\n        };\n\n        extend(Editor, {\n            RowResizing: RowResizing\n        });\n\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n\n        var NS = \".kendoEditorElementResizeHandle\";\n        var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var HALF_INSIDE = \"halfInside\";\n        var MOUSE_OVER = \"mouseover\";\n        var MOUSE_OUT = \"mouseout\";\n\n        var BODY = \"body\";\n        var TABLE = \"table\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        var ElementResizeHandle = Observable.extend({\n            init: function(options) {\n                var that = this;\n\n                Observable.fn.init.call(that);\n\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS).remove();\n                that.element = null;\n\n                that._destroyDraggable();\n\n                that.unbind();\n            },\n\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template:\n                    \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                        \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                    \"</div>\"\n            },\n\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n\n            show: function() {\n                this._setPosition();\n            },\n\n            _setPosition: function() {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: \"absolute\"\n                });\n            },\n\n            _attachEventHandlers: function() {\n                var that = this;\n\n                $(that.element)\n                    .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                    .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n            },\n\n            _onMouseOver: function() {\n                this.trigger(MOUSE_OVER);\n            },\n\n            _onMouseOut: function() {\n                this.trigger(MOUSE_OUT);\n            },\n\n            _addStyles: function() {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n            },\n\n            _initPositioningStrategy: function() {\n                var that = this;\n                var options = that.options;\n\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n\n            _initDraggable: function() {\n                var that = this;\n                var element = that.element;\n\n                if (that._draggable || !element) {\n                    return;\n                }\n\n                that._draggable = new Draggable(element, {\n                    dragstart: that._onDragStart.bind(that),\n                    drag: that._onDrag.bind(that),\n                    dragend: that._onDragEnd.bind(that)\n                });\n            },\n\n            _onDragStart: function() {\n                this.trigger(DRAG_START);\n            },\n\n            _onDrag: function(e) {\n                var that = this;\n\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n\n            _onDragEnd: function() {\n                this.trigger(DRAG_END);\n            },\n\n            _destroyDraggable: function() {\n                var that = this;\n\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n\n            _initDraggingStrategy: function() {\n                var that = this;\n\n                that._draggingStrategy = HandleDraggingStrategy.create({\n                    name: that.options.direction\n                });\n            }\n        });\n\n        var StrategyFactory = Class.extend({\n            init: function() {\n                this._items = [];\n            },\n\n            register: function(name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n\n            create: function(options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : \"\";\n                var match;\n                var item;\n                var i;\n\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n        var HandlePositioningStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n\n            getPosition: function() {\n                var that = this;\n\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n                return scrollOffsetPosition;\n            },\n\n            calculatePosition: noop,\n\n            applyHandleOffset: function(position) {\n                var options = this.options;\n                var handle = $(options.handle);\n\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - (outerHeight(handle) / 2),\n                        left: position.left - (outerWidth(handle) / 2)\n                    };\n                }\n\n                return position;\n            },\n\n            applyScrollOffset: function(position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var browser = kendo.support.browser;\n                var rootLeft;\n\n                if (!rootElement.is(BODY)) {\n                    rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                    if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                        rootLeft = rootLeft * -1;\n                    }\n\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + rootLeft - scrollBarWidth\n                    };\n                }\n\n                return position;\n            }\n        });\n\n        HandlePositioningStrategy.create = function(options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top,\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function() {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n                return {\n                    top: offset.top + (outerHeight(resizableElement) / 2),\n                    left: offset.left + marginLeft\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n        var HandleDraggingStrategy = Class.extend({\n            init: function(options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n\n            adjustDragDelta: function(deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n\n        HandleDraggingStrategy.create = function(options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n            options: {\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: (-1)\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: 1\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    modifier: (-1)\n                },\n                deltaY: {\n                    modifier: 1\n                }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n        extend(Editor, {\n            ElementResizeHandle: ElementResizeHandle\n        });\n    })(window.kendo);\n\n    (function(kendo, undefined$1) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var ElementResizeHandle = Editor.ElementResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var RangeUtils = Editor.RangeUtils;\n\n        var NS = \".kendoEditorElementResizing\";\n        var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n        var TABLE_CLASS = \"k-table\";\n        var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n        var DRAG_START = \"dragStart\";\n        var DRAG = \"drag\";\n        var DRAG_END = \"dragEnd\";\n        var KEY_DOWN = \"keydown\";\n        var MOUSE_DOWN = \"mousedown\";\n        var SELECT = \"select\";\n        var DROP = \"drop\";\n\n        var COLUMN = \"td\";\n        var ROW = \"tr\";\n        var TBODY = \"tbody\";\n        var THEAD = \"thead\";\n        var TABLE = \"table\";\n        var IMG = \"img\";\n        var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n        var COMMA = \",\";\n        var WIDTH = \"width\";\n        var HEIGHT = \"height\";\n\n        var EAST = \"east\";\n        var NORTH = \"north\";\n        var NORTHEAST = \"northeast\";\n        var NORTHWEST = \"northwest\";\n        var SOUTH = \"south\";\n        var SOUTHEAST = \"southeast\";\n        var SOUTHWEST = \"southwest\";\n        var WEST = \"west\";\n\n        var DOT = \".\";\n\n        function isUndefined(value) {\n            return typeof(value) === \"undefined\";\n        }\n\n        var ElementResizing = Class.extend({\n            init: function(element, options) {\n                var that = this;\n\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n\n                // Check whether the element is TABLE or IMG\n                if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                    that.element = element;\n                }\n            },\n\n            destroy: function() {\n                var that = this;\n\n                $(that.element).off(NS);\n                that.element = null;\n\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n\n                that._destroyResizeHandles();\n            },\n\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [{\n                    direction: NORTHWEST\n                }, {\n                    direction: NORTH\n                }, {\n                    direction: NORTHEAST\n                }, {\n                    direction: EAST\n                }, {\n                    direction: SOUTHEAST\n                }, {\n                    direction: SOUTH\n                }, {\n                    direction: SOUTHWEST\n                }, {\n                    direction: WEST\n                }]\n            },\n\n            resize: function(args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                that.showResizeHandles();\n            },\n\n            _resizeWidth: function() {\n                return false;\n            },\n\n            _resizeHeight: function() {\n                return false;\n            },\n\n            _getMaxDimensionValue: function(dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? (-1) : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n                if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    }\n                    else {\n                        return (parentDimension + parentScrollOffset);\n                    }\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            },\n\n            showResizeHandles: function() {\n                var that = this;\n\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n\n            _initResizeHandles: function() {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n\n                if (handles && handles.length > 0) {\n                    return;\n                }\n\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new ElementResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n\n                that._bindToResizeHandlesEvents();\n            },\n\n            _destroyResizeHandles: function() {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n\n                that.handles = [];\n            },\n\n            _showResizeHandles: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n\n            _bindToResizeHandlesEvents: function() {\n                return false;\n            },\n\n            _onResizeHandleDragStart: function() {\n                var that = this;\n                var element = $(that.element);\n\n                element.addClass(ELEMENT_RESIZING_CLASS);\n\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n\n            _onResizeHandleDrag: function(e) {\n                this.resize(e);\n            },\n\n            _onResizeHandleDragEnd: function() {\n                var that = this;\n                $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n\n            _enableKeyboard: function() {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n\n            _disableKeyboard: function() {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                    e.preventDefault();\n                });\n            }\n        });\n\n        var TableResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                    handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _hasRowsInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n\n                return false;\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n\n                if (inPercentages(styleWidth)) {\n                    //detect resizing greater than 100%\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    }\n                    else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n\n                that._setColumnsWidth();\n\n                element[0].style[WIDTH] = newWidth;\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n\n                if (hasRowsInPixels && delta < 0) {\n                    //decreasing table height when rows are sized in pixels is not possible\n                    that._setRowsHeightInPercentages();\n                }\n\n                if (inPercentages(styleHeight)) {\n                    //detect resizing greater than 100%\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    }\n                    else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                }\n                else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n\n                element[0].style[HEIGHT] = newHeight;\n\n                if (hasRowsInPixels && delta < 0) {\n                    //restore original rows height unit\n                    that._setRowsHeightInPixels();\n                }\n            },\n\n            _setColumnsWidth: function() {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n\n                    if (styleWidth !== \"\") {\n                        return inPercentages(styleWidth) ? true : false;\n                    }\n                    else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n\n            _setRowsHeightInPercentages: function() {\n                var that = this;\n                var tableHead = $(that.element).children(THEAD);\n                var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n                }\n            },\n\n            _setRowsHeightInPixels: function() {\n                var that = this;\n                var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function() {\n                    return outerHeight($(this));\n                });\n                var i;\n\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            }\n        });\n\n        var ImageResizing = ElementResizing.extend({\n            _bindToResizeHandlesEvents: function() {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                    if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                        handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                    } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                        handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                    } else {\n                        handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                    }\n\n                    handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n                }\n            },\n\n            _getDeltas: function(args) {\n                return extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n            },\n\n            _onResizeHandleDragVertical: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragHorizontal: function(args) {\n                var deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this.showResizeHandles();\n            },\n\n            _onResizeHandleDragLocked: function(args) {\n                var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                    initialWidth = this._initialElementWidth,\n                    initialHeight = this._initialElementHeight,\n                    deltas;\n\n                if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                    args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                    args.deltaY = args.deltaX;\n                } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                    args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                    args.deltaX = args.deltaY;\n                }\n\n                deltas = this._getDeltas(args);\n\n                this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n                this.showResizeHandles();\n            },\n\n            _resizeWidth: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentWidth = outerWidth(element);\n                var newWidth;\n                var constrainedWidth;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n\n                //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: that._getMaxDimensionValue(WIDTH)\n                });\n\n                newWidth = toPixels(constrainedWidth);\n                element[0].style[WIDTH] = newWidth;\n                element.attr(WIDTH, Math.floor(constrainedWidth));\n            },\n\n            _resizeHeight: function(delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var currentHeight = outerHeight(element);\n                var newHeight;\n                var constrainedHeight;\n\n                if (delta === 0) {\n                    return;\n                }\n\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n\n                //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n                //on each drag does not work due to browser calculation of computed styles\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: that.options.minHeight,\n                    max: Number.MAX_SAFE_INTEGER\n                });\n\n                newHeight = toPixels(constrainedHeight);\n                element[0].style[HEIGHT] = newHeight;\n                element.attr(HEIGHT, Math.floor(constrainedHeight));\n            }\n        });\n\n        var ElementResizingFactory = Class.extend({\n            create: function(editor) {\n                var factory = this;\n\n                $(editor.body)\n                    .on(\"dragstart\" + NS, function() {\n                        var nodes = RangeUtils.nodes(editor.getRange()),\n                            hasImg = false;\n\n                        nodes.forEach(function(node) {\n                            if (node.nodeName === \"IMG\") {\n                                hasImg = true;\n                            }\n                        });\n\n                        if (hasImg && nodes.length > 1) {\n                            editor.elementResizing._destroyResizeHandles();\n                        }\n                    })\n                    .on(DROP + NS, function() {\n                        setTimeout(function() {\n                            var image = RangeUtils.image(editor.getRange());\n\n                            if (image) {\n                                editor.elementResizing._destroyResizeHandles();\n                                editor.elementResizing.element = image;\n                                editor.elementResizing.showResizeHandles();\n                            }\n                        });\n                    })\n                    .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                        var eventTarget = e.target;\n                        var eventCurrentTarget = e.currentTarget;\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n\n                        if (elementResizing) {\n                            if (element && eventCurrentTarget !== element) {\n                                if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                    //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                    //instead of stopping event propagation\n                                    return;\n                                }\n                                else {\n                                    if (element !== eventTarget) {\n                                        editor._destroyElementResizing();\n                                        factory._initResizing(editor, eventCurrentTarget);\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            factory._initResizing(editor, eventCurrentTarget);\n                        }\n\n                        editor._showElementResizeHandles();\n                    })\n                    .on(MOUSE_DOWN + NS, function(e) {\n                        var elementResizing = editor.elementResizing;\n                        var element = elementResizing ? elementResizing.element : null;\n                        var target = e.target;\n                        var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                        if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                            editor._destroyElementResizing();\n                        }\n                    });\n            },\n\n            dispose: function(editor) {\n                $(editor.body).off(NS);\n            },\n\n            _initResizing: function(editor, element) {\n                // table and image resizing is natively supported in IE\n                // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n                // Enable custom resize handlers for FF too\n                if (!browser.msie) {\n                    if ($(element).is(TABLE)) {\n                        editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    } else if ($(element).is(IMG)) {\n                        editor.elementResizing = new ImageResizing(element, {\n                            appendHandlesTo: editor.body,\n                            rtl: kendo.support.isRtl(editor.element),\n                            rootElement: editor.body\n                        });\n                    }\n\n                    if (editor._showElementResizeHandlesProxy) {\n                        editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                        editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                    }\n                }\n            }\n        });\n\n        ElementResizingFactory.current = new ElementResizingFactory();\n\n        extend(Editor, {\n            TableResizing: TableResizing,\n            ImageResizing: ImageResizing,\n            ElementResizing: ElementResizing,\n            ElementResizingFactory: ElementResizingFactory\n        });\n\n    })(window.kendo);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        EditorUtils = Editor.EditorUtils,\n        RangeUtils = Editor.RangeUtils,\n        dom = Editor.Dom,\n        registerTool = EditorUtils.registerTool,\n        Command = Editor.Command;\n\n    var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\n    var cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\n    var reUnit = /([a-z]+|%)$/i;\n\n    var COL = \"col\";\n    var ROW = \"row\";\n    var COLGROUP = \"colgroup\";\n    var SCOPE = \"scope\";\n    var COL_INDEX = \"col-index\";\n    var TH = \"th\";\n    var TD = \"td\";\n    var THEAD = \"thead\";\n    var HEADERS = \"headers\";\n    var TABLE = \"table\";\n\n    var TableWizardCommand = Command.extend({\n        exec: function() {\n            var cmd = this;\n            var editor = cmd.editor;\n            var range = cmd.range = cmd.lockRange();\n            var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n            var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n            var options = {\n                visible: false,\n                messages: editor.options.messages,\n                closeCallback: cmd.onDialogClose.bind(cmd),\n                table: cmd.parseTable(selectedTable, selectedCells),\n                dialogOptions: editor.options.dialogOptions,\n                isRtl: kendo.support.isRtl(editor.wrapper)\n            };\n\n            var dialog = new Editor.TableWizardDialog(options);\n            dialog.open();\n        },\n\n        onDialogClose: function(data) {\n            var cmd = this;\n            cmd.releaseRange(cmd.range);\n\n            if (data) { //Ok button pressed\n                if (cmd.options.insertNewTable) {\n                    cmd.insertTable(cmd.createNewTable(data));\n                } else {\n                    cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                }\n            }\n        },\n        releaseRange: function(range) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            dom.windowFromDocument(doc).focus();\n            Command.fn.releaseRange.call(cmd, range);\n        },\n        insertTable: function(table) {\n            var range = this.range;\n\n            range.insertNode(table);\n            range.collapse(true);\n            this.editor.selectRange(range);\n\n            this._ensureFocusableAfterTable(table);\n        },\n        _ensureFocusableAfterTable: function(table) {\n            var siblingNodes = $(table).parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === table) {\n                dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n            }\n        },\n        updateTable: function(data, table, selectedCells) {\n            var cmd = this;\n            var tableRows = $(table.rows).toArray();\n            var tableProp = data.tableProperties;\n            var rows = tableProp.rows;\n            var tHead = table.tHead;\n            var last = cmd._lastInCollection;\n            var lastSelectedRow, cellProp;\n\n            //Leave only first selected cell\n            while (selectedCells.length > 1) {\n                selectedCells.pop();\n            }\n\n            lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n            cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n            if (tableRows.length < rows) {\n                cmd._addRows(lastSelectedRow, rows, tableRows);\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n            cmd._updateTableProperties(table, tableProp);\n\n            cellProp = data.cellProperties;\n            if (selectedCells[0]) {\n                dom.attr(selectedCells[0], { id: cellProp.id || null });\n            }\n            (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                cmd._updateCellProperties(cell, cellProp);\n            });\n\n            cmd._updateCaption(table, tableProp);\n\n            if (tHead) {\n                cmd._updateHeadersWithThead(table, data);\n            } else {\n                cmd._updateHeadersNoThead(table, data);\n            }\n\n            cmd._updateHeaderAssociates(table, tableProp);\n            dom.clearTableMappings(table, COL_INDEX);\n        },\n        _isHeadingRow: function(row) {\n            return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n        },\n        _isHeadingCell: function(cell) {\n            return dom.is(cell, TH);\n        },\n        cellsWithHeadersAssociated: function(table) {\n            var cells = $(table.rows).children();\n            var headingIds = [];\n            var checkHeader = function(header) {\n                return headingIds.indexOf(header) > -1;\n            };\n\n            cells.each(function(c, cell) {\n                if (cell.id && dom.is(cell, TH)) {\n                    headingIds.push(cell.id);\n                }\n            });\n\n            var associatedCells = cells.filter(function(c, cell) {\n                var headersAttr = cell.getAttribute(HEADERS);\n                var headersArray;\n\n                if (headersAttr && !dom.is(cell, TH)) {\n                    headersArray = headersAttr.split(\" \");\n\n                    if (headersArray && headersArray.length > 0) {\n                        return headersArray.some(checkHeader);\n                    }\n                }\n\n                return false;\n            });\n\n            return !!associatedCells.length;\n        },\n        _insertCells: function(count, row, index) {\n            index = isNaN(index) ? -1 : index;\n            for (var i = 0, cell; i < count; i++) {\n                cell = row.insertCell(index);\n                cell.innerHTML = \"&nbsp;\";\n            }\n        },\n        _deleteTableRows: function(rows, count) {\n            for (var i = 0, row, rowParent; i < count; i++) {\n                row = rows.pop();\n                rowParent = row.parentNode;\n                rowParent.removeChild(row);\n                if (!rowParent.rows.length) {\n                    dom.remove(rowParent);\n                }\n            }\n        },\n        createNewTable: function(data) {\n            var cmd = this;\n            var doc = cmd.editor.document;\n            var tableProp = data.tableProperties;\n            var table = dom.create(doc, TABLE);\n            var rowIndex = 0;\n            var thead;\n\n            cmd._updateTableProperties(table, tableProp);\n            cmd._updateCaption(table, tableProp);\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                thead = table.createTHead();\n                cmd._createTableRows(data, thead, rowIndex, true);\n                rowIndex += tableProp.headerRows;\n            }\n\n            var tbody = table.createTBody();\n            cmd._createTableRows(data, tbody, rowIndex, false);\n\n            dom.reMapTableColumns(table, COL_INDEX);\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            }\n\n            dom.clearTableMappings(table, COL_INDEX);\n\n            return table;\n        },\n        _createTableRows: function(data, container, initialIndex, headerRows) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var cellProp = data.cellProperties;\n            var columns = tableProp.columns;\n            var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n            var cellPropToAll = cellProp.selectAllCells;\n            var headerColumns = tableProp.headerColumns;\n\n            for (var r = initialIndex, row; r < rows; r++) {\n                row = container.insertRow();\n\n                for (var c = 0, cell; c < columns; c++) {\n                    if (headerRows || headerColumns > c) {\n                        cell = document.createElement(TH);\n                    } else {\n                        cell = document.createElement(TD);\n                    }\n\n                    row.appendChild(cell);\n                    cell.innerHTML = \"&nbsp;\";\n                    if (r === 0 && c === 0 && cellProp.id) {\n                        cell.id = cellProp.id;\n                    }\n                    cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n                }\n            }\n        },\n        _addRows: function(lastSelectedRow, rows, tableRows) {\n            var cmd = this;\n            var rowIndex = $(lastSelectedRow).index();\n            var cellsLength = lastSelectedRow.cells.length;\n            var newRowsCount = rows - tableRows.length;\n            var parent = lastSelectedRow.parentNode;\n            var row;\n\n            while (newRowsCount) {\n                row = parent.insertRow(rowIndex + 1);\n                cmd._insertCells(cellsLength - row.cells.length, row);\n                newRowsCount--;\n            }\n        },\n        _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n            var cmd = this;\n            var last = cmd._lastInCollection;\n            var firstRowLastCell = last(tableRows[0].cells);\n            var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n            if (numberOfColumns > columns) {\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                    while (rowColumns > columns) {\n                        if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                            lastCurrentCell.colSpan -= 1;\n                        } else {\n                            row.deleteCell(-1);\n                        }\n\n                        lastCurrentCell = last(row.cells);\n                        rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                    }\n                });\n            }\n\n            if (numberOfColumns < columns) {\n                var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                $(tableRows).each(function(i, row) {\n                    var lastCurrentCell = last(row.cells);\n                    cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n                });\n            }\n        },\n        _updateTableProperties: function(table, data) {\n            var style = this._getStylesData(data);\n            dom.attr(table, {\n                cellSpacing: data.cellSpacing || null,\n                cellPadding: data.cellPadding || null,\n                className: data.className || null,\n                id: data.id || null,\n                summary: data.summary || null,\n                style: style || null\n            });\n            $(table).addClass(\"k-table\");\n        },\n        _updateCellProperties: function(cell, data) {\n            var style = this._getStylesData(data);\n            style.padding = data.cellPadding || null;\n            style.margin = data.cellMargin || null;\n            dom.attr(cell, {\n                style: style || null,\n                className: data.className || null\n            });\n        },\n        _updateCaption: function(table, data) {\n            if (table.caption && !data.captionContent) {\n                table.deleteCaption();\n            } else if (data.captionContent) {\n                var caption = table.createCaption();\n                caption.innerHTML = data.captionContent;\n                var alignment = this._getAlignmentData(data.captionAlignment);\n                dom.attr(caption, {\n                    style: {\n                        textAlign: alignment.textAlign,\n                        verticalAlign: alignment.verticalAlign\n                    }\n                });\n            }\n        },\n        _updateHeadersNoThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var rows = table.rows;\n            var row, cells, cell, i, j;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n                cells = row.cells;\n\n                for (j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                        dom.changeTag(cell, TH, false);\n                    } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    }\n                }\n            }\n        },\n        _updateHeadersWithThead: function(table, data) {\n            var cmd = this;\n            var tableProp = data.tableProperties;\n            var thead = table.tHead;\n            var rowIndex = 0;\n            var tbody = table.tBodies[0];\n            var row, cell, i;\n\n            if (!tbody) {\n                tbody = table.createTBody();\n            }\n\n            if (tableProp.headerRows && tableProp.headerRows > 0) {\n                if (!thead) {\n                    thead = table.createTHead();\n                }\n\n                while (thead.rows.length < tableProp.headerRows) {\n                    thead.appendChild(tbody.rows[0]);\n                }\n\n                while (thead.rows.length > tableProp.headerRows) {\n                    tbody.appendChild(thead.rows[0]);\n                }\n\n                cmd._swapToHeaderCells(thead);\n            } else if (thead) {\n                while (thead.rows.length > 0) {\n                    tbody.appendChild(thead.rows[thead.rows.length - 1]);\n                }\n\n                table.deleteTHead();\n            }\n\n            while (tbody.rows.length > rowIndex) {\n                row = tbody.rows[rowIndex];\n                for (i = 0; i < row.cells.length; i++) {\n                    cell = row.cells[i];\n                    if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TD, false);\n                    } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                        dom.changeTag(cell, TH, false);\n                    }\n                }\n                rowIndex += 1;\n            }\n        },\n        _updateHeaderAssociates: function(table, tableProp) {\n            var cmd = this;\n\n            if (tableProp.cellsWithHeaders === \"ids\") {\n                if (!cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeScopes(table);\n                }\n                dom.associateWithIds(table);\n            } else if (tableProp.cellsWithHeaders === \"scope\") {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                }\n                cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n            } else {\n                if (cmd.cellsWithHeadersAssociated(table)) {\n                    cmd._removeAssociates(table);\n                } else {\n                    cmd._removeScopes(table);\n                }\n            }\n        },\n        _addScopes: function(table, headerRows, headerCols) {\n            var rows = table.rows;\n            var i, j, row, cell;\n\n            for (i = 0; i < rows.length; i++) {\n                row = rows[i];\n\n                for (j = 0; j < row.cells.length; j++) {\n                    cell = row.cells[j];\n\n                    if (i < headerRows) {\n                        cell.setAttribute(SCOPE, COL);\n                    } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                        cell.setAttribute(SCOPE, ROW);\n                    }\n                }\n            }\n        },\n        _removeScopes: function(table) {\n            $(table).find(TH).removeAttr(SCOPE);\n            $(table).find(COL).remove();\n            $(table).find(COLGROUP).remove();\n        },\n        _removeAssociates: function(table) {\n            $(table).find(\"th, td\").removeAttr(\"id headers\");\n        },\n        _swapToHeaderCells: function(thead) {\n            var tds = $(thead).find(\"td\");\n            var swapCell = function(index, cell) {\n                dom.changeTag(cell, TH, false);\n            };\n            tds.each(swapCell);\n        },\n        _getStylesData: function(data) {\n            var alignment = this._getAlignmentData(data.alignment);\n            var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n            return {\n                width: data.width ? data.width + data.widthUnit : null,\n                height: data.height ? data.height + data.heightUnit : null,\n                textAlign: alignment.textAlign,\n                verticalAlign: alignment.verticalAlign,\n                backgroundColor: data.bgColor || \"\",\n                borderWidth: data.borderWidth,\n                borderStyle: data.borderStyle,\n                borderColor: data.borderColor || \"\",\n                borderCollapse: data.collapseBorders ? \"collapse\" : null,\n                whiteSpace: whiteSpace\n            };\n        },\n        _getAlignmentData: function(alignment) {\n            var textAlign = \"\";\n            var verticalAlign = textAlign;\n\n            if (alignment) {\n                if (alignment.indexOf(\" \") != -1) {\n                    var align = alignment.split(\" \");\n                    textAlign = align[0];\n                    verticalAlign = align[1];\n                } else {\n                    textAlign = alignment;\n                }\n            }\n            return { textAlign: textAlign, verticalAlign: verticalAlign };\n        },\n        parseTable: function(table, selectedCells) {\n            if (!table) {\n                return { tableProperties: {}, selectedCells: [] };\n            }\n\n            var cmd = this;\n            var tStyle = table.style;\n            var rows = table.rows;\n            var caption = table.caption;\n            var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n            captionClone.find(\".k-marker\").remove();\n\n            var cssClass = table.className;\n            cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n            cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n            cssClass = cssClass.replace(/^k-table$/, \"\");\n\n            var tableAlignment = cmd._getAlignment(table, true);\n            var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n            var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n            var cellsWithHeaders;\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cellsWithHeaders = \"ids\";\n            } else if ($(table).find(\"th[scope]\").length > 0) {\n                cellsWithHeaders = \"scope\";\n            } else {\n                cellsWithHeaders = \"none\";\n            }\n\n            dom.reMapTableColumns(table, COL_INDEX);\n            var numberOfColumns = dom._getNumberOfColumns(table);\n            var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n            dom.clearTableMappings(table, COL_INDEX);\n\n            var tableJson = {\n                tableProperties: {\n                    width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                    height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                    columns: numberOfColumns,\n                    rows: rows.length,\n                    widthUnit: cmd._getUnit(tStyle.width),\n                    heightUnit: cmd._getUnit(tStyle.height),\n                    cellSpacing: table.cellSpacing,\n                    cellPadding: table.cellPadding,\n                    alignment: tableAlignment.textAlign,\n                    bgColor: tStyle.backgroundColor || table.bgColor,\n                    className: cssClass,\n                    id: table.id,\n                    borderWidth: tStyle.borderWidth || table.border,\n                    borderColor: tStyle.borderColor,\n                    borderStyle: tStyle.borderStyle || \"\",\n                    collapseBorders: !!tStyle.borderCollapse,\n                    summary: table.summary,\n                    captionContent: caption ? captionClone.html() : \"\",\n                    captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                    headerRows: numberOfHeaderRows,\n                    headerColumns: numberOfHeaderColumns,\n                    cellsWithHeaders: cellsWithHeaders\n                },\n                selectedCells: []\n            };\n\n            tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n            return tableJson;\n        },\n        parseTableRows: function(rows, selectedCells, tableJson) {\n            var cmd = this;\n            var data = [], row, rowData, cells, cell, cellData;\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                rowData = { cells: [] };\n                cells = row.cells;\n                data.push(rowData);\n                for (var j = 0; j < cells.length; j++) {\n                    cell = cells[j];\n                    cellData = cmd.parseCell(cell);\n                    if ($.inArray(cell, selectedCells) != -1) {\n                        tableJson.selectedCells.push(cellData);\n                    }\n                    rowData.cells.push(cellData);\n                }\n            }\n            return data;\n        },\n        parseCell: function(cell) {\n            var cmd = this;\n            var cStyle = cell.style;\n            var alignment = cmd._getAlignment(cell);\n            alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n            var data = {\n                width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                widthUnit: cmd._getUnit(cStyle.width),\n                heightUnit: cmd._getUnit(cStyle.height),\n                cellMargin: cStyle.margin,\n                cellPadding: cStyle.padding,\n                alignment: alignment,\n                bgColor: cStyle.backgroundColor || cell.bgColor,\n                className: cell.className,\n                id: cell.id,\n                borderWidth: cStyle.borderWidth || cell.border,\n                borderColor: cStyle.borderColor,\n                borderStyle: cStyle.borderStyle,\n                wrapText: cStyle.whiteSpace != \"nowrap\"\n            };\n\n            return data;\n        },\n        _getAlignment: function(element, horizontalOnly) {\n            var style = element.style;\n            var hAlign = style.textAlign || element.align || \"\";\n            if (horizontalOnly) {\n                return { textAlign: hAlign };\n            }\n            var vAlign = style.verticalAlign || element.vAlign || \"\";\n            if (hAlign && vAlign) {\n                return { textAlign: hAlign, verticalAlign: vAlign };\n            }\n            if (!hAlign && vAlign) {\n                return { textAlign: \"left\", verticalAlign: vAlign };\n            }\n            if (hAlign && !vAlign) {\n                return { textAlign: hAlign, verticalAlign: \"top\" };\n            }\n            return { textAlign: \"\", verticalAlign: \"\" };\n        },\n        _getUnit: function(value) {\n            var unit = (value || \"\").match(reUnit);\n            return unit ? unit[0] : \"px\";\n        },\n        _selectedTable: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return tableFormatFinder.findSuitable(nodes)[0];\n        },\n        _selectedCells: function(range) {\n            var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n            return cellsFormatFinder.findSuitable(nodes);\n        },\n        _lastInCollection: function(collection) {\n            return collection[collection.length - 1];\n        }\n    });\n\n    var TableWizardTool = Editor.Tool.extend({\n        command: function(options) {\n            options.insertNewTable = this.options.insertNewTable;\n            return new TableWizardCommand(options);\n        }\n    });\n\n    var TableWizardEditTool = TableWizardTool.extend({\n        update: function(ui, nodes) {\n            var isFormatted = !tableFormatFinder.isFormatted(nodes),\n                toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n            if (isFormatted === true) {\n                toolbar.hide(ui);\n            } else {\n                toolbar.show(ui);\n            }\n        }\n    });\n\n    kendo.ui.editor.TableWizardTool = TableWizardTool;\n    kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\n    registerTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false }));\n\n    })(window.kendo.jQuery);\n\n    (function($, undefined$1) {\n\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        numericTextBoxSettings = { format: \"0\", min: 0 },\n        units = [\"px\", \"em\"],\n        borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\n    var DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\n    var tableAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-middle-left\",\n            value: \"left\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) });\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" });\n    }\n    };\n\n    var cellAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-middle-left\",\n            value: \"left middle\"\n        }, {\n            className: \"table-align-middle-center\",\n            value: \"center middle\"\n        }, {\n            className: \"table-align-middle-right\",\n            value: \"right middle\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) });\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" });\n    }\n    };\n\n    var accessibilityAlignmentDropDownSettings = {\n        dataSource: [{\n            className: \"table-align-top-left\",\n            value: \"left top\"\n        }, {\n            className: \"table-align-top-center\",\n            value: \"center top\"\n        }, {\n            className: \"table-align-top-right\",\n            value: \"right top\"\n        }, {\n            className: \"table-align-bottom-left\",\n            value: \"left bottom\"\n        }, {\n            className: \"table-align-bottom-center\",\n            value: \"center bottom\"\n        }, {\n            className: \"table-align-bottom-right\",\n            value: \"right bottom\"\n        }, {\n            className: \"align-remove\",\n            value: \"\"\n        }],\n        dataTextField: \"className\",\n        dataValueField: \"value\",\n        template: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className) });\n    },\n        valueTemplate: function (ref) {\n           var className = ref.className;\n           var tooltip = ref.tooltip;\n\n           return kendo.ui.icon($((\"<span title=\\\"\" + (encode(tooltip)) + \"\\\"></span>\")), { icon: encode(className), iconClass: \"k-align-group\" });\n    }\n    };\n\n    var dialogTemplate = function (ref) {\n           var messages = ref.messages;\n\n           return '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    \"<li class=\\\"k-active\\\">\" + (messages.tableTab) + \"</li>\" +\n                    \"<li>\" + (messages.cellTab) + \"</li>\" +\n                    \"<li>\" + (messages.accessibilityTab) + \"</li>\" +\n                '</ul>' +\n                '<div id=\"k-table-properties\"></div>' +\n                '<div id=\"k-cell-properties\"></div>' +\n                '<div id=\"k-accessibility-properties\"></div>' +\n            '</div>' +\n            '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                    kendo.html.renderButton((\"<button class=\\\"k-dialog-ok\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogOk) + \"</span></button>\"), {\n                        icon: 'check',\n                            themeColor: \"primary\"\n                        }) +\n                        kendo.html.renderButton((\"<button class=\\\"k-dialog-close\\\"><span class=\\\"k-button-text\\\">\" + (messages.dialogCancel) + \"</span></button>\"), {\n                            icon: 'cancel-outline'\n                        }) +\n            '</div>' +\n        '</div>';\n    };\n\n    var TableWizardDialog = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n        open: function() {\n            var that = this,\n                options = that.options,\n                dialogOptions = options.dialogOptions,\n                tableData = options.table,\n                dialog,\n                messages = options.messages,\n                isIE = kendo.support.browser.msie;\n\n            function close(e) {\n                e.preventDefault();\n                that.destroy();\n                dialog.destroy();\n            }\n\n            function okHandler(e) {\n                that.collectDialogValues(tableData);\n\n                close(e);\n\n                if (that.change) {\n                    that.change();\n                }\n\n                options.closeCallback(tableData);\n            }\n\n            function closeHandler(e) {\n                close(e);\n                options.closeCallback();\n            }\n\n            dialogOptions.close = closeHandler;\n            dialogOptions.minWidth = 400;\n            dialogOptions.title = messages.tableWizard;\n            dialogOptions.visible = options.visible;\n\n            dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n                .kendoWindow(dialogOptions)\n                .addClass(\"k-editor-window\")\n                .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n                .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n                .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n                .data(\"kendoWindow\");\n\n            var element = dialog.element;\n            that._initTabStripComponent(element);\n            that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n            that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n            that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n            dialog.center();\n            dialog.open();\n\n            if (isIE) {\n                var dialogHeight = element.closest(\".k-window\").height();\n                element.css(\"max-height\", dialogHeight);\n            }\n        },\n\n        _initTabStripComponent: function(element) {\n            var components = this.components = {};\n            components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n                animation: false\n            }).data(\"kendoTabStrip\");\n        },\n\n        collectDialogValues: function() {\n            var that = this;\n            var data = that.options.table;\n            that._collectTableViewValues(data);\n            that._collectCellViewValues(data);\n            that._collectAccessibilityViewValues(data);\n        },\n\n        _collectTableViewValues: function(tableData) {\n            var tableView = this.components.tableView;\n            var tableProperties = tableData.tableProperties;\n            tableProperties.width = tableView.width.value();\n            tableProperties.widthUnit = tableView.widthUnit.value();\n            tableProperties.height = tableView.height.value();\n            tableProperties.columns = tableView.columns.value();\n            tableProperties.rows = tableView.rows.value();\n            tableProperties.heightUnit = tableView.heightUnit.value();\n            tableProperties.cellSpacing = tableView.cellSpacing.value();\n            tableProperties.cellPadding = tableView.cellPadding.value();\n            tableProperties.alignment = tableView.alignment.value();\n            tableProperties.bgColor = tableView.bgColor.value();\n            tableProperties.className = tableView.className.value();\n            tableProperties.id = tableView.id.value();\n            tableProperties.borderWidth = tableView.borderWidth.value();\n            tableProperties.borderColor = tableView.borderColor.value();\n            tableProperties.borderStyle = tableView.borderStyle.value();\n            tableProperties.collapseBorders = tableView.collapseBorders.check();\n        },\n\n        _collectCellViewValues: function(table) {\n            var cellData = table.cellProperties = {};\n            var cellView = this.components.cellView;\n\n            cellData.selectAllCells = cellView.selectAllCells.check();\n            cellData.width = cellView.width.value();\n            cellData.widthUnit = cellView.widthUnit.value();\n            cellData.height = cellView.height.value();\n            cellData.heightUnit = cellView.heightUnit.value();\n            cellData.cellMargin = cellView.cellMargin.value();\n            cellData.cellPadding = cellView.cellPadding.value();\n            cellData.alignment = cellView.alignment.value();\n            cellData.bgColor = cellView.bgColor.value();\n            cellData.className = cellView.className.value();\n            cellData.id = cellView.id.value();\n            cellData.borderWidth = cellView.borderWidth.value();\n            cellData.borderColor = cellView.borderColor.value();\n            cellData.borderStyle = cellView.borderStyle.value();\n            cellData.wrapText = cellView.wrapText.check();\n\n            if (!cellData.width) {\n                cellData.selectAllCells = true;\n                cellData.width = 100 / table.tableProperties.columns;\n                cellData.widthUnit = \"%\";\n            }\n        },\n\n       _collectAccessibilityViewValues: function(table) {\n            var tableProperties = table.tableProperties;\n            var accessibilityView = this.components.accessibilityView;\n            tableProperties.captionContent = accessibilityView.captionContent.value();\n            tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n            tableProperties.summary = accessibilityView.summary.value();\n            tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n            tableProperties.headerRows = accessibilityView.headerRows.value();\n            tableProperties.headerColumns = accessibilityView.headerColumns.value();\n        },\n        _addUnit: function(units, value) {\n            if (value && $.inArray(value, units) == -1) {\n                units.push(value);\n            }\n        },\n\n        _initNumericTextbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoNumericTextBox(\n                    settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n                ).data(\"kendoNumericTextBox\");\n            if (property in data) {\n                component.value(parseInt(data[property], 10));\n            }\n        },\n\n        _initDropDownList: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n            var component = storage[property] = element.kendoDropDownList({\n                dataSource: dataSource,\n                optionLabel: this.options.messages.borderNone\n            }).data(\"kendoDropDownList\");\n            this._setComponentValue(component, data, property);\n        },\n\n        _initTableAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var tableView = this.components.tableView;\n            var dataSource = tableAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeft;\n            dataSource[1].tooltip = messages.alignCenter;\n            dataSource[2].tooltip = messages.alignRight;\n            dataSource[3].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n        },\n\n        _initCellAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var cellView = this.components.cellView;\n            var dataSource = cellAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftMiddle;\n            dataSource[4].tooltip = messages.alignCenterMiddle;\n            dataSource[5].tooltip = messages.alignRightMiddle;\n            dataSource[6].tooltip = messages.alignLeftBottom;\n            dataSource[7].tooltip = messages.alignCenterBottom;\n            dataSource[8].tooltip = messages.alignRightBottom;\n            dataSource[9].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n        },\n\n        _initAccessibilityAlignmentDropDown: function(element, data) {\n            var messages = this.options.messages;\n            var accessibilityView = this.components.accessibilityView;\n            var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n            dataSource[0].tooltip = messages.alignLeftTop;\n            dataSource[1].tooltip = messages.alignCenterTop;\n            dataSource[2].tooltip = messages.alignRightTop;\n            dataSource[3].tooltip = messages.alignLeftBottom;\n            dataSource[4].tooltip = messages.alignCenterBottom;\n            dataSource[5].tooltip = messages.alignRightBottom;\n            dataSource[6].tooltip = messages.alignRemove;\n\n            this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n        },\n        _initAlignmentDropDown: function(element, settings, name, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            component.list.addClass('k-align');\n            this._setComponentValue(component, data, name);\n        },\n        _initAssociationDropDown: function(element, name, settings, data, storage) {\n            var component = storage[name] =\n                element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n            this._setComponentValue(component, data, name);\n        },\n        _setComponentValue: function(component, data, property) {\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initColorPicker: function(element, property, data, storage) {\n            var component = storage[property] =\n                element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n            if (data[property]) {\n                component.value(data[property]);\n            }\n        },\n        _initInput: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        _initCheckbox: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n            if (property in data) {\n                component.check(data[property]);\n            }\n        },\n\n        _initTextArea: function(element, property, data, storage, settings) {\n            var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n            if (property in data) {\n                component.value(data[property]);\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            that._destroyComponents(this.components);\n\n            delete that.components;\n        },\n        _destroyComponents: function(components) {\n            for (var widget in components) {\n                if (components[widget].destroy) {\n                    components[widget].destroy();\n                }\n                delete components[widget];\n            }\n        },\n\n        _dialogTemplate: function(messages) {\n            return kendo.template(dialogTemplate)({ messages: messages });\n        },\n\n        _onColumnsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        },\n\n        _onRowsNumberChange: function(args) {\n            var that = this;\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        },\n\n        _createTablePropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-table-properties\");\n            var components = that.components;\n            var tableView = components.tableView = {};\n            var tableProperties = table.tableProperties = table.tableProperties || {};\n            var form;\n\n            that._addUnit(units, tableProperties.widthUnit);\n            that._addUnit(units, tableProperties.heightUnit);\n            tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n            form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-table-width\",\n                        label: encode(messages.width),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView);\n                            that._initDropDownList($((\"<input id=\\\"k-editor-table-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"widthUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        field: \"k-editor-table-height\",\n                        label: encode(messages.height),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView);\n                            that._initDropDownList($((\"<input id=\\\"k-editor-table-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"heightUnit\",\n                                tableProperties,\n                                tableView,\n                                units);\n                        }\n                    },{\n                        field: \"k-editor-table-columns\",\n                        label: encode(messages.columns),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                                \"columns\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onColumnsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        field: \"k-editor-table-rows\",\n                        label: encode(messages.rows),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                                \"rows\",\n                                tableProperties,\n                                tableView,\n                                {\n                                    min: 1,\n                                    value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                    change: that._onRowsNumberChange.bind(that)\n                                });\n                        }\n                    },{\n                        field: \"k-editor-table-cell-spacing\",\n                        label: encode(messages.cellSpacing),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-table-cell-padding\",\n                        label: encode(messages.cellPadding),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding\" />').appendTo(container), \"cellPadding\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-table-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                        }\n                    },{\n                        field: \"k-editor-table-bg\",\n                        label: encode(messages.background),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-css-class\",\n                        label: encode(messages.cssClass),\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-id\",\n                        label: encode(messages.id),\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-border-width\",\n                        label: encode(messages.border),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                            that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                        }\n                    },{\n                        field: \"k-editor-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                tableProperties,\n                                tableView,\n                                borderStyles);\n                        }\n                    },{\n                        field: \"k-editor-collapse-borders\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            return form;\n        },\n\n        _createCellPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-cell-properties\");\n            var components = that.components;\n            var cellView = components.cellView = {};\n            var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n            var form;\n\n            that._addUnit(units, cellProperties.widthUnit);\n            that._addUnit(units, cellProperties.heightUnit);\n            form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-selectAllCells\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                        }\n                    },{\n                        field: \"k-editor-cell-width\",\n                        label: encode(messages.width),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView);\n                            that._initDropDownList($((\"<input id=\\\"k-editor-cell-width-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"widthUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        field: \"k-editor-cell-height\",\n                        label: encode(messages.height),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView);\n                            that._initDropDownList($((\"<input id=\\\"k-editor-cell-height-type\\\" aria-label=\\\"\" + (messages.units) + \"\\\" />\")).appendTo(container),\n                                \"heightUnit\",\n                                cellProperties,\n                                cellView,\n                                units);\n                        }\n                    },{\n                        field: \"k-editor-table-cell-margin\",\n                        label: encode(messages.cellMargin),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-table-cells-padding\",\n                        label: encode(messages.cellPadding),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding\" />').appendTo(container), \"cellPadding\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-cell-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                        }\n                    },{\n                        field: \"k-editor-cell-bg\",\n                        label: encode(messages.background),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-cell-css-class\",\n                        label: encode(messages.cssClass),\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-cell-id\",\n                        label: encode(messages.id),\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-cell-border-width\",\n                        label: encode(messages.border),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView);\n                            that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView);\n                        }\n                    },{\n                        field: \"k-editor-cell-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                cellProperties,\n                                cellView,\n                                borderStyles);\n                        }\n                    },{\n                        field: \"k-editor-wrap-text\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-wrap-text\" />').appendTo(container), \"wrapText\", cellProperties, cellView, { label: encode(messages.wrapText) });\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            return form;\n        },\n\n        _createAccessibilityPropertiesForm: function(dialog, messages) {\n            var that = this;\n            var table = that.options.table;\n            var formElement = dialog.element.find(\"#k-accessibility-properties\");\n            var components = that.components;\n            var accessibilityView = components.accessibilityView = {};\n            var tableProperties = table.tableProperties;\n            var form;\n\n            form = formElement.kendoForm({\n                renderButtons: false,\n                items: [\n                    {\n                        field: \"k-editor-table-header-rows\",\n                        label: encode(messages.headerRows),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                            \"headerRows\",\n                            tableProperties,\n                            accessibilityView,\n                            {\n                                max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                            });\n                        }\n                    },{\n                        field: \"k-editor-table-header-columns\",\n                        label: encode(messages.headerColumns),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                            \"headerColumns\",\n                            tableProperties,\n                            accessibilityView,\n                            {\n                                max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                            });\n                        }\n                    },{\n                        field: \"k-editor-table-caption\",\n                        label: encode(messages.caption),\n                        editor: function(container, options) {\n                            that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                        }\n                    },{\n                        field: \"k-editor-accessibility-alignment\",\n                        label: encode(messages.alignment),\n                        editor: function(container, options) {\n                            that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                        }\n                    },{\n                        field: \"k-editor-accessibility-summary\",\n                        label: encode(messages.summary),\n                        editor: function(container, options) {\n                            that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                rows: 5,\n                                placeholder: messages.tableSummaryPlaceholder\n                            });\n                        }\n                    },{\n                        field: \"k-editor-cells-headers\",\n                        label: encode(messages.associateCellsWithHeaders),\n                        editor: function(container, options) {\n                            var element = $((\"<select id=\\\"k-editor-cells-headers\\\">\\n                            <option value=\\\"none\\\">\" + (messages.associateNone) + \"</option>\\n                            <option value=\\\"scope\\\">\" + (messages.associateScope) + \"</option>\\n                            <option value=\\\"ids\\\">\" + (messages.associateIds) + \"</option>\\n                        </select>\")).appendTo(container);\n\n                            that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                        }\n                    }\n                ]\n            }).data(\"kendoForm\");\n\n            return form;\n        }\n    });\n\n    kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n    })(window.kendo.jQuery);\n\n    var __meta__ = {\n            id: \"editor\",\n            name: \"Editor\",\n            category: \"web\",\n            description: \"Rich text editor component\",\n            depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n            features: [ {\n                id: \"editor-imagebrowser\",\n                name: \"Image Browser\",\n                description: \"Support for uploading and inserting images\",\n                depends: [ \"imagebrowser\" ]\n            }, {\n                id: \"editor-resizable\",\n                name: \"Resize handle\",\n                description: \"Support for resizing the content area via a resize handle\",\n                depends: [ \"resizable\" ]\n            }, {\n                id: \"editor-tablewizard\",\n                name: \"Table wizard dialog\",\n                description: \"Support for table properties configuration\",\n                depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n            }, {\n                id: \"editor-pdf-export\",\n                name: \"PDF export\",\n                description: \"Export Editor content as PDF\",\n                depends: [ \"pdf\", \"drawing\" ]\n            }]\n        };\n\n}));\n"]}